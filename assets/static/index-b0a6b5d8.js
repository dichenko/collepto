var Na=Object.defineProperty;var Ca=(e,t,n)=>t in e?Na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bt=(e,t,n)=>(Ca(e,typeof t!="symbol"?t+"":t,n),n);import{r as l,a as fn,R as mn,b as je,c as Sa}from"./vendor-5fe3892a.js";import{E as Ea,S as wt,F as Pa,X as ke,a as Ra,A as de,C as rt,b as Nt,c as dr,d as ka,D as Ia,M as Ta,e as hn,f as Aa,L as Ct,U as pn,I as ur,g as Ie,h as Da,G as La,i as St,T as Qt,j as gn,P as er,k as Ma,l as xn,m as Oa,n as $a,o as Ar,H as _a}from"./ui-68270d57.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var vn={exports:{}},Tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=l,Ba=Symbol.for("react.element"),za=Symbol.for("react.fragment"),Ua=Object.prototype.hasOwnProperty,Wa=Fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Va={key:!0,ref:!0,__self:!0,__source:!0};function bn(e,t,n){var s,a={},o=null,c=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(s in t)Ua.call(t,s)&&!Va.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Ba,type:e,key:o,ref:c,props:a,_owner:Wa.current}}Tt.Fragment=za;Tt.jsx=bn;Tt.jsxs=bn;vn.exports=Tt;var r=vn.exports,tr={},Dr=fn;tr.createRoot=Dr.createRoot,tr.hydrateRoot=Dr.hydrateRoot;const Ga="modulepreload",Ha=function(e){return"/"+e},Lr={},qa=function(t,n,s){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Ha(o),o in Lr)return;Lr[o]=!0;const c=o.endsWith(".css"),i=c?'[rel="stylesheet"]':"";if(!!s)for(let f=a.length-1;f>=0;f--){const m=a[f];if(m.href===o&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${i}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ga,c||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),c)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})};var Mr="popstate";function Ka(e={}){function t(s,a){let{pathname:o,search:c,hash:i}=s.location;return rr("",{pathname:o,search:c,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:nt(a)}return Ja(t,n,null,e)}function J(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ya(){return Math.random().toString(36).substring(2,10)}function Or(e,t){return{usr:e.state,key:e.key,idx:t}}function rr(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qe(t):t,state:n,key:t&&t.key||s||Ya()}}function nt({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qe(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Ja(e,t,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,i="POP",u=null,d=f();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function f(){return(c.state||{idx:null}).idx}function m(){i="POP";let x=f(),b=x==null?null:x-d;d=x,u&&u({action:i,location:h.location,delta:b})}function p(x,b){i="PUSH";let g=rr(h.location,x,b);n&&n(g,x),d=f()+1;let v=Or(g,d),C=h.createHref(g);try{c.pushState(v,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(C)}o&&u&&u({action:i,location:h.location,delta:1})}function y(x,b){i="REPLACE";let g=rr(h.location,x,b);n&&n(g,x),d=f();let v=Or(g,d),C=h.createHref(g);c.replaceState(v,"",C),o&&u&&u({action:i,location:h.location,delta:0})}function w(x){return Xa(x)}let h={get action(){return i},get location(){return e(a,c)},listen(x){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Mr,m),u=x,()=>{a.removeEventListener(Mr,m),u=null}},createHref(x){return t(a,x)},createURL:w,encodeLocation(x){let b=w(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:y,go(x){return c.go(x)}};return h}function Xa(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),J(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:nt(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function yn(e,t,n="/"){return Za(e,t,n,!1)}function Za(e,t,n,s){let a=typeof t=="string"?qe(t):t,o=ge(a.pathname||"/",n);if(o==null)return null;let c=jn(e);Qa(c);let i=null;for(let u=0;i==null&&u<c.length;++u){let d=uo(o);i=lo(c[u],d,s)}return i}function jn(e,t=[],n=[],s=""){let a=(o,c,i)=>{let u={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};u.relativePath.startsWith("/")&&(J(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length));let d=pe([s,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(J(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),jn(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:oo(d,o.index),routesMeta:f})};return e.forEach((o,c)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))a(o,c);else for(let u of wn(o.path))a(o,c,u)}),t}function wn(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=wn(s.join("/")),i=[];return i.push(...c.map(u=>u===""?o:[o,u].join("/"))),a&&i.push(...c),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function Qa(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:io(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var eo=/^:[\w-]+$/,to=3,ro=2,no=1,so=10,ao=-2,$r=e=>e==="*";function oo(e,t){let n=e.split("/"),s=n.length;return n.some($r)&&(s+=ao),t&&(s+=ro),n.filter(a=>!$r(a)).reduce((a,o)=>a+(eo.test(o)?to:o===""?no:so),s)}function io(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function lo(e,t,n=!1){let{routesMeta:s}=e,a={},o="/",c=[];for(let i=0;i<s.length;++i){let u=s[i],d=i===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",m=Et({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!m&&d&&n&&!s[s.length-1].route.index&&(m=Et({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(a,m.params),c.push({params:a,pathname:pe([o,m.pathname]),pathnameBase:po(pe([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=pe([o,m.pathnameBase]))}return c}function Et(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=co(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:s.reduce((d,{paramName:f,isOptional:m},p)=>{if(f==="*"){let w=i[p]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const y=i[p];return m&&!y?d[f]=void 0:d[f]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:c,pattern:e}}function co(e,t=!1,n=!0){oe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,i,u)=>(s.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function uo(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oe(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ge(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function fo(e,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?qe(e):e;return{pathname:n?n.startsWith("/")?n:mo(n,t):t,search:go(s),hash:xo(a)}}function mo(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function zt(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ho(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Nn(e){let t=ho(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function Cn(e,t,n,s=!1){let a;typeof e=="string"?a=qe(e):(a={...e},J(!a.pathname||!a.pathname.includes("?"),zt("?","pathname","search",a)),J(!a.pathname||!a.pathname.includes("#"),zt("#","pathname","hash",a)),J(!a.search||!a.search.includes("#"),zt("#","search","hash",a)));let o=e===""||a.pathname==="",c=o?"/":a.pathname,i;if(c==null)i=n;else{let m=t.length-1;if(!s&&c.startsWith("..")){let p=c.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}i=m>=0?t[m]:"/"}let u=fo(a,i),d=c&&c!=="/"&&c.endsWith("/"),f=(o||c===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var pe=e=>e.join("/").replace(/\/\/+/g,"/"),po=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),go=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xo=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vo(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Sn=["POST","PUT","PATCH","DELETE"];new Set(Sn);var bo=["GET",...Sn];new Set(bo);var Ke=l.createContext(null);Ke.displayName="DataRouter";var At=l.createContext(null);At.displayName="DataRouterState";l.createContext(!1);var En=l.createContext({isTransitioning:!1});En.displayName="ViewTransition";var yo=l.createContext(new Map);yo.displayName="Fetchers";var jo=l.createContext(null);jo.displayName="Await";var ue=l.createContext(null);ue.displayName="Navigation";var at=l.createContext(null);at.displayName="Location";var fe=l.createContext({outlet:null,matches:[],isDataRoute:!1});fe.displayName="Route";var fr=l.createContext(null);fr.displayName="RouteError";function wo(e,{relative:t}={}){J(ot(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=l.useContext(ue),{hash:a,pathname:o,search:c}=lt(e,{relative:t}),i=o;return n!=="/"&&(i=o==="/"?n:pe([n,o])),s.createHref({pathname:i,search:c,hash:a})}function ot(){return l.useContext(at)!=null}function xe(){return J(ot(),"useLocation() may be used only in the context of a <Router> component."),l.useContext(at).location}var Pn="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rn(e){l.useContext(ue).static||l.useLayoutEffect(e)}function it(){let{isDataRoute:e}=l.useContext(fe);return e?Mo():No()}function No(){J(ot(),"useNavigate() may be used only in the context of a <Router> component.");let e=l.useContext(Ke),{basename:t,navigator:n}=l.useContext(ue),{matches:s}=l.useContext(fe),{pathname:a}=xe(),o=JSON.stringify(Nn(s)),c=l.useRef(!1);return Rn(()=>{c.current=!0}),l.useCallback((u,d={})=>{if(oe(c.current,Pn),!c.current)return;if(typeof u=="number"){n.go(u);return}let f=Cn(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:pe([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,a,e])}l.createContext(null);function kn(){let{matches:e}=l.useContext(fe),t=e[e.length-1];return t?t.params:{}}function lt(e,{relative:t}={}){let{matches:n}=l.useContext(fe),{pathname:s}=xe(),a=JSON.stringify(Nn(n));return l.useMemo(()=>Cn(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function Co(e,t){return In(e,t)}function In(e,t,n,s){var b;J(ot(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=l.useContext(ue),{matches:o}=l.useContext(fe),c=o[o.length-1],i=c?c.params:{},u=c?c.pathname:"/",d=c?c.pathnameBase:"/",f=c&&c.route;{let g=f&&f.path||"";Tn(u,!f||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let m=xe(),p;if(t){let g=typeof t=="string"?qe(t):t;J(d==="/"||((b=g.pathname)==null?void 0:b.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${g.pathname}" was given in the \`location\` prop.`),p=g}else p=m;let y=p.pathname||"/",w=y;if(d!=="/"){let g=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=yn(e,{pathname:w});oe(f||h!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),oe(h==null||h[h.length-1].route.element!==void 0||h[h.length-1].route.Component!==void 0||h[h.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=ko(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},i,g.params),pathname:pe([d,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?d:pe([d,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,s);return t&&x?l.createElement(at.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function So(){let e=Lo(),t=vo(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=l.createElement(l.Fragment,null,l.createElement("p",null,"💿 Hey developer 👋"),l.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",l.createElement("code",{style:o},"ErrorBoundary")," or"," ",l.createElement("code",{style:o},"errorElement")," prop on your route.")),l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:a},n):null,c)}var Eo=l.createElement(So,null),Po=class extends l.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?l.createElement(fe.Provider,{value:this.props.routeContext},l.createElement(fr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ro({routeContext:e,match:t,children:n}){let s=l.useContext(Ke);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),l.createElement(fe.Provider,{value:e},n)}function ko(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);J(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,i=-1;if(n)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(i=u),d.route.id){let{loaderData:f,errors:m}=n,p=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){c=!0,i>=0?a=a.slice(0,i+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let m,p=!1,y=null,w=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||Eo,c&&(i<0&&f===0?(Tn("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):i===f&&(p=!0,w=d.route.hydrateFallbackElement||null)));let h=t.concat(a.slice(0,f+1)),x=()=>{let b;return m?b=y:p?b=w:d.route.Component?b=l.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,l.createElement(Ro,{match:d,routeContext:{outlet:u,matches:h,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?l.createElement(Po,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:x(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):x()},null)}function mr(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Io(e){let t=l.useContext(Ke);return J(t,mr(e)),t}function To(e){let t=l.useContext(At);return J(t,mr(e)),t}function Ao(e){let t=l.useContext(fe);return J(t,mr(e)),t}function hr(e){let t=Ao(e),n=t.matches[t.matches.length-1];return J(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Do(){return hr("useRouteId")}function Lo(){var s;let e=l.useContext(fr),t=To("useRouteError"),n=hr("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function Mo(){let{router:e}=Io("useNavigate"),t=hr("useNavigate"),n=l.useRef(!1);return Rn(()=>{n.current=!0}),l.useCallback(async(a,o={})=>{oe(n.current,Pn),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var _r={};function Tn(e,t,n){!t&&!_r[e]&&(_r[e]=!0,oe(!1,n))}l.memo(Oo);function Oo({routes:e,future:t,state:n}){return In(e,void 0,n,t)}function Be(e){J(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $o({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){J(!ot(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),i=l.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof n=="string"&&(n=qe(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:p="default"}=n,y=l.useMemo(()=>{let w=ge(u,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:p},navigationType:s}},[c,u,d,f,m,p,s]);return oe(y!=null,`<Router basename="${c}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:l.createElement(ue.Provider,{value:i},l.createElement(at.Provider,{children:t,value:y}))}function _o({children:e,location:t}){return Co(nr(e),t)}function nr(e,t=[]){let n=[];return l.Children.forEach(e,(s,a)=>{if(!l.isValidElement(s))return;let o=[...t,a];if(s.type===l.Fragment){n.push.apply(n,nr(s.props.children,o));return}J(s.type===Be,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),J(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=nr(s.props.children,o)),n.push(c)}),n}var vt="get",bt="application/x-www-form-urlencoded";function Dt(e){return e!=null&&typeof e.tagName=="string"}function Fo(e){return Dt(e)&&e.tagName.toLowerCase()==="button"}function Bo(e){return Dt(e)&&e.tagName.toLowerCase()==="form"}function zo(e){return Dt(e)&&e.tagName.toLowerCase()==="input"}function Uo(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Wo(e,t){return e.button===0&&(!t||t==="_self")&&!Uo(e)}function sr(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function Vo(e,t){let n=sr(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(o=>{n.append(a,o)})}),n}var ft=null;function Go(){if(ft===null)try{new FormData(document.createElement("form"),0),ft=!1}catch{ft=!0}return ft}var Ho=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ut(e){return e!=null&&!Ho.has(e)?(oe(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bt}"`),null):e}function qo(e,t){let n,s,a,o,c;if(Bo(e)){let i=e.getAttribute("action");s=i?ge(i,t):null,n=e.getAttribute("method")||vt,a=Ut(e.getAttribute("enctype"))||bt,o=new FormData(e)}else if(Fo(e)||zo(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||i.getAttribute("action");if(s=u?ge(u,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||vt,a=Ut(e.getAttribute("formenctype"))||Ut(i.getAttribute("enctype"))||bt,o=new FormData(i,e),!Go()){let{name:d,type:f,value:m}=e;if(f==="image"){let p=d?`${d}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else d&&o.append(d,m)}}else{if(Dt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vt,s=null,a=bt,c=e}return o&&a==="text/plain"&&(c=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ko(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&ge(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Yo(e,t){if(e.id in t)return t[e.id];try{let n=await qa(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jo(e){return e!=null&&typeof e.page=="string"}function Xo(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Zo(e,t,n){let s=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await Yo(o,n);return c.links?c.links():[]}return[]}));return ri(s.flat(1).filter(Xo).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Fr(e,t,n,s,a,o){let c=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,i=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return o==="assets"?t.filter((u,d)=>c(u,d)||i(u,d)):o==="data"?t.filter((u,d)=>{var m;let f=s.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(c(u,d)||i(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Qo(e,t,{includeHydrateFallback:n}={}){return ei(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function ei(e){return[...new Set(e)]}function ti(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function ri(e,t){let n=new Set,s=new Set(t);return e.reduce((a,o)=>{if(t&&!Jo(o)&&o.as==="script"&&o.href&&s.has(o.href))return a;let i=JSON.stringify(ti(o));return n.has(i)||(n.add(i),a.push({key:i,link:o})),a},[])}function An(){let e=l.useContext(Ke);return pr(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ni(){let e=l.useContext(At);return pr(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gr=l.createContext(void 0);gr.displayName="FrameworkContext";function Dn(){let e=l.useContext(gr);return pr(e,"You must render this element inside a <HydratedRouter> element"),e}function si(e,t){let n=l.useContext(gr),[s,a]=l.useState(!1),[o,c]=l.useState(!1),{onFocus:i,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=t,p=l.useRef(null);l.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let h=b=>{b.forEach(g=>{c(g.isIntersecting)})},x=new IntersectionObserver(h,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[e]),l.useEffect(()=>{if(s){let h=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(h)}}},[s]);let y=()=>{a(!0)},w=()=>{a(!1),c(!1)};return n?e!=="intent"?[o,p,{}]:[o,p,{onFocus:Qe(i,y),onBlur:Qe(u,w),onMouseEnter:Qe(d,y),onMouseLeave:Qe(f,w),onTouchStart:Qe(m,y)}]:[!1,p,{}]}function Qe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ai({page:e,...t}){let{router:n}=An(),s=l.useMemo(()=>yn(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?l.createElement(ii,{page:e,matches:s,...t}):null}function oi(e){let{manifest:t,routeModules:n}=Dn(),[s,a]=l.useState([]);return l.useEffect(()=>{let o=!1;return Zo(e,t,n).then(c=>{o||a(c)}),()=>{o=!0}},[e,t,n]),s}function ii({page:e,matches:t,...n}){let s=xe(),{manifest:a,routeModules:o}=Dn(),{basename:c}=An(),{loaderData:i,matches:u}=ni(),d=l.useMemo(()=>Fr(e,t,u,a,s,"data"),[e,t,u,a,s]),f=l.useMemo(()=>Fr(e,t,u,a,s,"assets"),[e,t,u,a,s]),m=l.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,h=!1;if(t.forEach(b=>{var v;let g=a.routes[b.route.id];!g||!g.hasLoader||(!d.some(C=>C.route.id===b.route.id)&&b.route.id in i&&((v=o[b.route.id])!=null&&v.shouldRevalidate)||g.hasClientLoader?h=!0:w.add(b.route.id))}),w.size===0)return[];let x=Ko(e,c,"data");return h&&w.size>0&&x.searchParams.set("_routes",t.filter(b=>w.has(b.route.id)).map(b=>b.route.id).join(",")),[x.pathname+x.search]},[c,i,s,a,d,t,e,o]),p=l.useMemo(()=>Qo(f,a),[f,a]),y=oi(f);return l.createElement(l.Fragment,null,m.map(w=>l.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>l.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),y.map(({key:w,link:h})=>l.createElement("link",{key:w,...h})))}function li(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Ln=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ln&&(window.__reactRouterVersion="7.7.1")}catch{}function ci({basename:e,children:t,window:n}){let s=l.useRef();s.current==null&&(s.current=Ka({window:n,v5Compat:!0}));let a=s.current,[o,c]=l.useState({action:a.action,location:a.location}),i=l.useCallback(u=>{l.startTransition(()=>c(u))},[c]);return l.useLayoutEffect(()=>a.listen(i),[a,i]),l.createElement($o,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var Mn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=l.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:c,state:i,target:u,to:d,preventScrollReset:f,viewTransition:m,...p},y){let{basename:w}=l.useContext(ue),h=typeof d=="string"&&Mn.test(d),x,b=!1;if(typeof d=="string"&&h&&(x=d,Ln))try{let S=new URL(window.location.href),N=d.startsWith("//")?new URL(S.protocol+d):new URL(d),R=ge(N.pathname,w);N.origin===S.origin&&R!=null?d=R+N.search+N.hash:b=!0}catch{oe(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=wo(d,{relative:a}),[v,C,E]=si(s,p),D=mi(d,{replace:c,state:i,target:u,preventScrollReset:f,relative:a,viewTransition:m});function k(S){t&&t(S),S.defaultPrevented||D(S)}let A=l.createElement("a",{...p,...E,href:x||g,onClick:b||o?t:k,ref:li(y,C),target:u,"data-discover":!h&&n==="render"?"true":void 0});return v&&!h?l.createElement(l.Fragment,null,A,l.createElement(ai,{page:g})):A});Te.displayName="Link";var di=l.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:c,viewTransition:i,children:u,...d},f){let m=lt(c,{relative:d.relative}),p=xe(),y=l.useContext(At),{navigator:w,basename:h}=l.useContext(ue),x=y!=null&&bi(m)&&i===!0,b=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,g=p.pathname,v=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(g=g.toLowerCase(),v=v?v.toLowerCase():null,b=b.toLowerCase()),v&&h&&(v=ge(v,h)||v);const C=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let E=g===b||!a&&g.startsWith(b)&&g.charAt(C)==="/",D=v!=null&&(v===b||!a&&v.startsWith(b)&&v.charAt(b.length)==="/"),k={isActive:E,isPending:D,isTransitioning:x},A=E?t:void 0,S;typeof s=="function"?S=s(k):S=[s,E?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(k):o;return l.createElement(Te,{...d,"aria-current":A,className:S,ref:f,style:N,to:c,viewTransition:i},typeof u=="function"?u(k):u)});di.displayName="NavLink";var ui=l.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:o,method:c=vt,action:i,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...p},y)=>{let w=xi(),h=vi(i,{relative:d}),x=c.toLowerCase()==="get"?"get":"post",b=typeof i=="string"&&Mn.test(i),g=v=>{if(u&&u(v),v.defaultPrevented)return;v.preventDefault();let C=v.nativeEvent.submitter,E=(C==null?void 0:C.getAttribute("formmethod"))||c;w(C||v.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:a,state:o,relative:d,preventScrollReset:f,viewTransition:m})};return l.createElement("form",{ref:y,method:x,action:h,onSubmit:s?u:g,...p,"data-discover":!b&&e==="render"?"true":void 0})});ui.displayName="Form";function fi(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function On(e){let t=l.useContext(Ke);return J(t,fi(e)),t}function mi(e,{target:t,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:c}={}){let i=it(),u=xe(),d=lt(e,{relative:o});return l.useCallback(f=>{if(Wo(f,t)){f.preventDefault();let m=n!==void 0?n:nt(u)===nt(d);i(e,{replace:m,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[u,i,d,n,s,t,e,a,o,c])}function hi(e){oe(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=l.useRef(sr(e)),n=l.useRef(!1),s=xe(),a=l.useMemo(()=>Vo(s.search,n.current?null:t.current),[s.search]),o=it(),c=l.useCallback((i,u)=>{const d=sr(typeof i=="function"?i(new URLSearchParams(a)):i);n.current=!0,o("?"+d,u)},[o,a]);return[a,c]}var pi=0,gi=()=>`__${String(++pi)}__`;function xi(){let{router:e}=On("useSubmit"),{basename:t}=l.useContext(ue),n=Do();return l.useCallback(async(s,a={})=>{let{action:o,method:c,encType:i,formData:u,body:d}=qo(s,t);if(a.navigate===!1){let f=a.fetcherKey||gi();await e.fetch(f,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||c,formEncType:a.encType||i,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||c,formEncType:a.encType||i,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function vi(e,{relative:t}={}){let{basename:n}=l.useContext(ue),s=l.useContext(fe);J(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...lt(e||".",{relative:t})},c=xe();if(e==null){o.search=c.search;let i=new URLSearchParams(o.search),u=i.getAll("index");if(u.some(f=>f==="")){i.delete("index"),u.filter(m=>m).forEach(m=>i.append("index",m));let f=i.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:pe([n,o.pathname])),nt(o)}function bi(e,{relative:t}={}){let n=l.useContext(En);J(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=On("useViewTransitionState"),a=lt(e,{relative:t});if(!n.isTransitioning)return!1;let o=ge(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=ge(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Et(a.pathname,c)!=null||Et(a.pathname,o)!=null}const yi={theme:"system",setTheme:()=>null},ji=l.createContext(yi);function ar({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...s}){const[a,o]=l.useState(()=>localStorage.getItem(n)||t);l.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),a==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(u);return}i.classList.add(a)},[a]);const c={theme:a,setTheme:i=>{localStorage.setItem(n,i),o(i)}};return r.jsx(ji.Provider,{...s,value:c,children:e})}function Br(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $n(...e){return t=>{let n=!1;const s=e.map(a=>{const o=Br(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():Br(e[a],null)}}}}function re(...e){return l.useCallback($n(...e),e)}function st(e){const t=wi(e),n=l.forwardRef((s,a)=>{const{children:o,...c}=s,i=l.Children.toArray(o),u=i.find(Ci);if(u){const d=u.props.children,f=i.map(m=>m===u?l.Children.count(d)>1?l.Children.only(null):l.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...c,ref:a,children:l.isValidElement(d)?l.cloneElement(d,void 0,f):null})}return r.jsx(t,{...c,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var _n=st("Slot");function wi(e){const t=l.forwardRef((n,s)=>{const{children:a,...o}=n;if(l.isValidElement(a)){const c=Ei(a),i=Si(o,a.props);return a.type!==l.Fragment&&(i.ref=s?$n(s,c):c),l.cloneElement(a,i)}return l.Children.count(a)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fn=Symbol("radix.slottable");function Ni(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Fn,t}function Ci(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Fn}function Si(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const u=o(...i);return a(...i),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function Ei(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Bn(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Bn(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function zn(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Bn(e))&&(s&&(s+=" "),s+=t);return s}const zr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ur=zn,xr=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Ur(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(d=>{const f=n==null?void 0:n[d],m=o==null?void 0:o[d];if(f===null)return null;const p=zr(f)||zr(m);return a[d][p]}),i=n&&Object.entries(n).reduce((d,f)=>{let[m,p]=f;return p===void 0||(d[m]=p),d},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:m,className:p,...y}=f;return Object.entries(y).every(w=>{let[h,x]=w;return Array.isArray(x)?x.includes({...o,...i}[h]):{...o,...i}[h]===x})?[...d,m,p]:d},[]);return Ur(e,c,u,n==null?void 0:n.class,n==null?void 0:n.className)},vr="-",Pi=e=>{const t=ki(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:c=>{const i=c.split(vr);return i[0]===""&&i.length!==1&&i.shift(),Un(i,t)||Ri(c)},getConflictingClassGroupIds:(c,i)=>{const u=n[c]||[];return i&&s[c]?[...u,...s[c]]:u}}},Un=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?Un(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(vr);return(c=t.validators.find(({validator:i})=>i(o)))==null?void 0:c.classGroupId},Wr=/^\[(.+)\]$/,Ri=e=>{if(Wr.test(e)){const t=Wr.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ki=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return Ti(Object.entries(e.classGroups),n).forEach(([o,c])=>{or(c,s,o,t)}),s},or=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:Vr(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(Ii(a)){or(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,c])=>{or(c,Vr(t,o),n,s)})})},Vr=(e,t)=>{let n=e;return t.split(vr).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},Ii=e=>e.isThemeGetter,Ti=(e,t)=>t?e.map(([n,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,i])=>[t+c,i])):o);return[n,a]}):e,Ai=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(o,c)=>{n.set(o,c),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let c=n.get(o);if(c!==void 0)return c;if((c=s.get(o))!==void 0)return a(o,c),c},set(o,c){n.has(o)?n.set(o,c):a(o,c)}}},Wn="!",Di=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],o=t.length,c=i=>{const u=[];let d=0,f=0,m;for(let x=0;x<i.length;x++){let b=i[x];if(d===0){if(b===a&&(s||i.slice(x,x+o)===t)){u.push(i.slice(f,x)),f=x+o;continue}if(b==="/"){m=x;continue}}b==="["?d++:b==="]"&&d--}const p=u.length===0?i:i.substring(f),y=p.startsWith(Wn),w=y?p.substring(1):p,h=m&&m>f?m-f:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:h}};return n?i=>n({className:i,parseClassName:c}):c},Li=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},Mi=e=>({cache:Ai(e.cacheSize),parseClassName:Di(e),...Pi(e)}),Oi=/\s+/,$i=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],c=e.trim().split(Oi);let i="";for(let u=c.length-1;u>=0;u-=1){const d=c[u],{modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:y}=n(d);let w=!!y,h=s(w?p.substring(0,y):p);if(!h){if(!w){i=d+(i.length>0?" "+i:i);continue}if(h=s(p),!h){i=d+(i.length>0?" "+i:i);continue}w=!1}const x=Li(f).join(":"),b=m?x+Wn:x,g=b+h;if(o.includes(g))continue;o.push(g);const v=a(h,w);for(let C=0;C<v.length;++C){const E=v[C];o.push(b+E)}i=d+(i.length>0?" "+i:i)}return i};function _i(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Vn(t))&&(s&&(s+=" "),s+=n);return s}const Vn=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=Vn(e[s]))&&(n&&(n+=" "),n+=t);return n};function Fi(e,...t){let n,s,a,o=c;function c(u){const d=t.reduce((f,m)=>m(f),e());return n=Mi(d),s=n.cache.get,a=n.cache.set,o=i,i(u)}function i(u){const d=s(u);if(d)return d;const f=$i(u,n);return a(u,f),f}return function(){return o(_i.apply(null,arguments))}}const K=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Gn=/^\[(?:([a-z-]+):)?(.+)\]$/i,Bi=/^\d+\/\d+$/,zi=new Set(["px","full","screen"]),Ui=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wi=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,he=e=>ze(e)||zi.has(e)||Bi.test(e),be=e=>Ye(e,"length",el),ze=e=>!!e&&!Number.isNaN(Number(e)),Wt=e=>Ye(e,"number",ze),et=e=>!!e&&Number.isInteger(Number(e)),qi=e=>e.endsWith("%")&&ze(e.slice(0,-1)),$=e=>Gn.test(e),ye=e=>Ui.test(e),Ki=new Set(["length","size","percentage"]),Yi=e=>Ye(e,Ki,Hn),Ji=e=>Ye(e,"position",Hn),Xi=new Set(["image","url"]),Zi=e=>Ye(e,Xi,rl),Qi=e=>Ye(e,"",tl),tt=()=>!0,Ye=(e,t,n)=>{const s=Gn.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},el=e=>Wi.test(e)&&!Vi.test(e),Hn=()=>!1,tl=e=>Gi.test(e),rl=e=>Hi.test(e),nl=()=>{const e=K("colors"),t=K("spacing"),n=K("blur"),s=K("brightness"),a=K("borderColor"),o=K("borderRadius"),c=K("borderSpacing"),i=K("borderWidth"),u=K("contrast"),d=K("grayscale"),f=K("hueRotate"),m=K("invert"),p=K("gap"),y=K("gradientColorStops"),w=K("gradientColorStopPositions"),h=K("inset"),x=K("margin"),b=K("opacity"),g=K("padding"),v=K("saturate"),C=K("scale"),E=K("sepia"),D=K("skew"),k=K("space"),A=K("translate"),S=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",$,t],I=()=>[$,t],q=()=>["",he,be],P=()=>["auto",ze,$],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],_=()=>["","0",$],me=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[ze,$];return{cacheSize:500,separator:":",theme:{colors:[tt],spacing:[he,be],blur:["none","",ye,$],brightness:X(),borderColor:[e],borderRadius:["none","","full",ye,$],borderSpacing:I(),borderWidth:q(),contrast:X(),grayscale:_(),hueRotate:X(),invert:_(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[qi,be],inset:R(),margin:R(),opacity:X(),padding:I(),saturate:X(),scale:X(),sepia:_(),skew:X(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",$]}],container:["container"],columns:[{columns:[ye]}],"break-after":[{"break-after":me()}],"break-before":[{"break-before":me()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),$]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",et,$]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",et,$]}],"grid-cols":[{"grid-cols":[tt]}],"col-start-end":[{col:["auto",{span:["full",et,$]},$]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[tt]}],"row-start-end":[{row:["auto",{span:[et,$]},$]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$,t]}],"min-w":[{"min-w":[$,t,"min","max","fit"]}],"max-w":[{"max-w":[$,t,"none","full","min","max","fit","prose",{screen:[ye]},ye]}],h:[{h:[$,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ye,be]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wt]}],"font-family":[{font:[tt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$]}],"line-clamp":[{"line-clamp":["none",ze,Wt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",he,$]}],"list-image":[{"list-image":["none",$]}],"list-style-type":[{list:["none","disc","decimal",$]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",he,be]}],"underline-offset":[{"underline-offset":["auto",he,$]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),Ji]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Yi]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Zi]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[he,$]}],"outline-w":[{outline:[he,be]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[he,be]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ye,Qi]}],"shadow-color":[{shadow:[tt]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ye,$]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",$]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",$]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[et,$]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[he,be,Wt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sl=Fi(nl);function W(...e){return sl(zn(e))}const br=xr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function T({className:e,variant:t,size:n,asChild:s=!1,...a}){const o=s?_n:"button";return r.jsx(o,{"data-slot":"button",className:W(br({variant:t,size:n,className:e})),...a})}const al=xr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Q({className:e,variant:t,asChild:n=!1,...s}){const a=n?_n:"span";return r.jsx(a,{"data-slot":"badge",className:W(al({variant:t}),e),...s})}function Z({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:W("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function ce({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:W("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Ne({className:e,...t}){return r.jsx("h4",{"data-slot":"card-title",className:W("leading-none",e),...t})}function te({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:W("px-6 [&:last-child]:pb-6",e),...t})}function ol({className:e,...t}){return r.jsx("div",{"data-slot":"card-footer",className:W("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})}const il="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Pt(e){const[t,n]=l.useState(!1),s=()=>{n(!0)},{src:a,alt:o,style:c,className:i,...u}=e;return t?r.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:c,children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx("img",{src:il,alt:"Error loading image",...u,"data-original-url":a})})}):r.jsx("img",{src:a,alt:o,className:i,style:c,...u,onError:s})}const ll="https://collepto.3451881.workers.dev/api",Ge=e=>{if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://collepto.3451881.workers.dev";return e.startsWith("/")?`${t}${e}`:`${t}/api/${e}`};class cl{constructor(t){Bt(this,"baseUrl");Bt(this,"sessionToken",null);this.baseUrl=t,this.sessionToken=localStorage.getItem("collepto_session")}async request(t,n={}){const s={...n,headers:{"Content-Type":"application/json",...n.headers}};this.sessionToken&&(s.headers={...s.headers,Authorization:`Bearer ${this.sessionToken}`});try{const a=await fetch(`${this.baseUrl}${t}`,s),o=await a.json();if(!a.ok)throw new Error(o.error||`HTTP ${a.status}`);return o}catch(a){return console.error("API request failed:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async login(t,n){const s=btoa(`${t}:${n}`),a=await this.request("/auth/login",{method:"POST",headers:{Authorization:`Basic ${s}`}});return a.success&&a.data&&(this.sessionToken=a.data.sessionId,localStorage.setItem("collepto_session",this.sessionToken)),a}async logout(){const t=await this.request("/auth/logout",{method:"POST"});return this.sessionToken=null,localStorage.removeItem("collepto_session"),t}async checkAuthStatus(){return this.request("/auth/status")}async getItems(){return this.request("/items")}async getItem(t){return this.request(`/items/${t}`)}async getItemBySlug(t){return this.request(`/items/slug/${t}`)}async searchItems(t){const n=new URLSearchParams;return t.q&&n.append("q",t.q),t.category&&n.append("category",t.category),t.yearFrom&&n.append("yearFrom",t.yearFrom.toString()),t.yearTo&&n.append("yearTo",t.yearTo.toString()),t.tags&&t.tags.length>0&&n.append("tags",t.tags.join(",")),this.request(`/items/search?${n.toString()}`)}async getBlogPosts(){return this.request("/blog")}async getBlogPost(t){return this.request(`/blog/${t}`)}async getBlogPostBySlug(t){return this.request(`/blog/slug/${t}`)}async getAdminItems(){return this.request("/admin/items")}async createItem(t){return this.request("/admin/items",{method:"POST",body:JSON.stringify(t)})}async updateItem(t,n){return this.request(`/admin/items/${t}`,{method:"PUT",body:JSON.stringify(n)})}async deleteItem(t){return this.request(`/admin/items/${t}`,{method:"DELETE"})}async createBlogPost(t){return this.request("/admin/blog",{method:"POST",body:JSON.stringify(t)})}async updateBlogPost(t,n){return this.request(`/admin/blog/${t}`,{method:"PUT",body:JSON.stringify(n)})}async deleteBlogPost(t){return this.request(`/admin/blog/${t}`,{method:"DELETE"})}async publishBlogPost(t,n){return this.request(`/admin/blog/${t}/publish`,{method:"POST",body:JSON.stringify({published:n})})}async uploadPhoto(t,n){const s=new FormData;s.append("photo",n);const a={method:"POST",body:s};this.sessionToken&&(a.headers={Authorization:`Bearer ${this.sessionToken}`});try{const o=await fetch(`${this.baseUrl}/admin/photos/item/${t}/upload`,a),c=await o.json();if(!o.ok)throw new Error(c.error||`HTTP ${o.status}`);return c}catch(o){return console.error("Photo upload failed:",o),{success:!1,error:o instanceof Error?o.message:"Upload failed"}}}async uploadPhotoR2(t,n){const s=new FormData;s.append("original",n.original),s.append("compressed",n.compressed),s.append("thumbnail",n.thumbnail),s.append("width",n.width.toString()),s.append("height",n.height.toString());const a={method:"POST",body:s};this.sessionToken&&(a.headers={Authorization:`Bearer ${this.sessionToken}`});try{const o=await fetch(`${this.baseUrl}/admin/photos/item/${t}/upload`,a),c=await o.json();if(!o.ok)throw new Error(c.error||`HTTP ${o.status}`);return c}catch(o){return console.error("R2 photo upload failed:",o),{success:!1,error:o instanceof Error?o.message:"Upload failed"}}}async uploadPhotoBoth(t,n,s){const a=new FormData;a.append("original",n),a.append("processed",s);const o={method:"POST",body:a};this.sessionToken&&(o.headers={Authorization:`Bearer ${this.sessionToken}`});try{const c=await fetch(`${this.baseUrl}/admin/photos/item/${t}/upload-both`,o),i=await c.json();if(!c.ok)throw new Error(i.error||`HTTP ${c.status}`);return i}catch(c){return console.error("Photo upload (both) failed:",c),{success:!1,error:c instanceof Error?c.message:"Upload failed"}}}async deletePhoto(t,n){return this.request(`/admin/items/${t}/photos`,{method:"DELETE",body:JSON.stringify({photoUrl:n})})}async reorderPhotos(t,n){return this.request(`/admin/items/${t}/photos/reorder`,{method:"POST",body:JSON.stringify({photoUrls:n})})}async exportData(){return this.request("/admin/export")}async downloadExport(){if(!this.sessionToken)throw new Error("Authentication required");const t=await fetch(`${this.baseUrl}/admin/export/download`,{headers:{Authorization:`Bearer ${this.sessionToken}`}});if(!t.ok)throw new Error("Export download failed");const n=await t.blob(),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`collepto_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}isAuthenticated(){return!!this.sessionToken}clearSession(){this.sessionToken=null,localStorage.removeItem("collepto_session")}}const F=new cl(ll);function dl({item:e,onTagClick:t,onCategoryClick:n,onItemClick:s}){const[a,o]=l.useState(0),[c,i]=l.useState(!1),u=d=>{if(!e.photos.length)return;const f=d.currentTarget.getBoundingClientRect(),m=d.clientX-f.left,p=f.width,y=Math.floor(m/p*e.photos.length);o(Math.max(0,Math.min(y,e.photos.length-1)))};return r.jsxs(Z,{className:"h-full flex flex-col card-refined",children:[r.jsx(ce,{className:"p-0",children:r.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-md cursor-pointer",onMouseMove:u,onMouseEnter:()=>i(!0),onMouseLeave:()=>{i(!1),o(0)},children:[r.jsx(Pt,{src:e.photos.length>0?Ge(e.photos[a]||e.photos[0]):"/placeholder-image.jpg",alt:e.title,className:"w-full h-full object-cover transition-all duration-300"}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsx(Q,{variant:"secondary",className:"bg-white/90 text-primary cursor-pointer badge-refined select-none",onClick:d=>{d.stopPropagation(),n==null||n(e.category)},children:e.category})}),e.photos.length>1&&c&&r.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1",children:e.photos.map((d,f)=>r.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-200 ${f===a?"bg-white scale-110":"bg-white/50 hover:bg-white/75"}`},f))})]})}),r.jsxs(te,{className:"flex-1 p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"line-clamp-2 leading-tight",children:e.title}),r.jsx("span",{className:"text-muted-foreground text-sm shrink-0",children:e.year})]}),r.jsx("p",{className:"text-muted-foreground text-sm line-clamp-3 leading-relaxed",children:e.description})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,4).map((d,f)=>r.jsx(Q,{variant:"outline",className:"text-xs cursor-pointer badge-refined select-none",onClick:()=>t==null?void 0:t(d),children:d},f)),e.tags.length>4&&r.jsxs(Q,{variant:"outline",className:"text-xs cursor-pointer badge-refined select-none",onClick:()=>{const d=e.tags.slice(4).join(", ");alert(`Остальные теги: ${d}`)},children:["+",e.tags.length-4]})]})})]}),r.jsx(ol,{className:"p-4 pt-0",children:r.jsxs(T,{variant:"outline",size:"sm",className:"w-full gap-2 btn-refined",onClick:d=>{d.preventDefault(),d.stopPropagation(),s==null||s()},children:[r.jsx(Ea,{className:"w-4 h-4"}),"Подробнее"]})})]})}function H({className:e,type:t,...n}){return r.jsx("input",{type:t,"data-slot":"input",className:W("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var ul=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Y=ul.reduce((e,t)=>{const n=st(`Primitive.${t}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,u=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function fl(e,t){e&&fn.flushSync(()=>e.dispatchEvent(t))}var ml="Label",qn=l.forwardRef((e,t)=>r.jsx(Y.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qn.displayName=ml;var hl=qn;function z({className:e,...t}){return r.jsx(hl,{"data-slot":"label",className:W("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function pl(e,t){const n=l.createContext(t),s=o=>{const{children:c,...i}=o,u=l.useMemo(()=>i,Object.values(i));return r.jsx(n.Provider,{value:u,children:c})};s.displayName=e+"Provider";function a(o){const c=l.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function Ee(e,t=[]){let n=[];function s(o,c){const i=l.createContext(c),u=n.length;n=[...n,c];const d=m=>{var b;const{scope:p,children:y,...w}=m,h=((b=p==null?void 0:p[e])==null?void 0:b[u])||i,x=l.useMemo(()=>w,Object.values(w));return r.jsx(h.Provider,{value:x,children:y})};d.displayName=o+"Provider";function f(m,p){var h;const y=((h=p==null?void 0:p[e])==null?void 0:h[u])||i,w=l.useContext(y);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=n.map(c=>l.createContext(c));return function(i){const u=(i==null?void 0:i[e])||o;return l.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return a.scopeName=e,[s,gl(a,...t)]}function gl(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=s.reduce((i,{useScope:u,scopeName:d})=>{const m=u(o)[`__scope${d}`];return{...i,...m}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}var Ae=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{},xl=mn[" useInsertionEffect ".trim().toString()]||Ae;function ct({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,o,c]=vl({defaultProp:t,onChange:n}),i=e!==void 0,u=i?e:a;{const f=l.useRef(e!==void 0);l.useEffect(()=>{const m=f.current;m!==i&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=i},[i,s])}const d=l.useCallback(f=>{var m;if(i){const p=bl(f)?f(e):f;p!==e&&((m=c.current)==null||m.call(c,p))}else o(f)},[i,e,o,c]);return[u,d]}function vl({defaultProp:e,onChange:t}){const[n,s]=l.useState(e),a=l.useRef(n),o=l.useRef(t);return xl(()=>{o.current=t},[t]),l.useEffect(()=>{var c;a.current!==n&&((c=o.current)==null||c.call(o,n),a.current=n)},[n,a]),[n,s,o]}function bl(e){return typeof e=="function"}function yl(e,t){return l.useReducer((n,s)=>t[n][s]??n,e)}var Je=e=>{const{present:t,children:n}=e,s=jl(t),a=typeof n=="function"?n({present:s.isPresent}):l.Children.only(n),o=re(s.ref,wl(a));return typeof n=="function"||s.isPresent?l.cloneElement(a,{ref:o}):null};Je.displayName="Presence";function jl(e){const[t,n]=l.useState(),s=l.useRef(null),a=l.useRef(e),o=l.useRef("none"),c=e?"mounted":"unmounted",[i,u]=yl(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const d=mt(s.current);o.current=i==="mounted"?d:"none"},[i]),Ae(()=>{const d=s.current,f=a.current;if(f!==e){const p=o.current,y=mt(d);e?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&p!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Ae(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,m=y=>{const h=mt(s.current).includes(y.animationName);if(y.target===t&&h&&(u("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=y=>{y.target===t&&(o.current=mt(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:l.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function mt(e){return(e==null?void 0:e.animationName)||"none"}function wl(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Nl=mn[" useId ".trim().toString()]||(()=>{}),Cl=0;function Ue(e){const[t,n]=l.useState(Nl());return Ae(()=>{e||n(s=>s??String(Cl++))},[e]),e||(t?`radix-${t}`:"")}var Lt="Collapsible",[Sl,zu]=Ee(Lt),[El,yr]=Sl(Lt),Kn=l.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:c,...i}=e,[u,d]=ct({prop:s,defaultProp:a??!1,onChange:c,caller:Lt});return r.jsx(El,{scope:n,disabled:o,contentId:Ue(),open:u,onOpenToggle:l.useCallback(()=>d(f=>!f),[d]),children:r.jsx(Y.div,{"data-state":wr(u),"data-disabled":o?"":void 0,...i,ref:t})})});Kn.displayName=Lt;var Yn="CollapsibleTrigger",Jn=l.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,a=yr(Yn,n);return r.jsx(Y.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":wr(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:ee(e.onClick,a.onOpenToggle)})});Jn.displayName=Yn;var jr="CollapsibleContent",Xn=l.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=yr(jr,e.__scopeCollapsible);return r.jsx(Je,{present:n||a.open,children:({present:o})=>r.jsx(Pl,{...s,ref:t,present:o})})});Xn.displayName=jr;var Pl=l.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:a,...o}=e,c=yr(jr,n),[i,u]=l.useState(s),d=l.useRef(null),f=re(t,d),m=l.useRef(0),p=m.current,y=l.useRef(0),w=y.current,h=c.open||i,x=l.useRef(h),b=l.useRef(void 0);return l.useEffect(()=>{const g=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(g)},[]),Ae(()=>{const g=d.current;if(g){b.current=b.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const v=g.getBoundingClientRect();m.current=v.height,y.current=v.width,x.current||(g.style.transitionDuration=b.current.transitionDuration,g.style.animationName=b.current.animationName),u(s)}},[c.open,s]),r.jsx(Y.div,{"data-state":wr(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!h,...o,ref:f,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:h&&a})});function wr(e){return e?"open":"closed"}var Rl=Kn;function Gr({...e}){return r.jsx(Rl,{"data-slot":"collapsible",...e})}function kl({...e}){return r.jsx(Jn,{"data-slot":"collapsible-trigger",...e})}function Il({...e}){return r.jsx(Xn,{"data-slot":"collapsible-content",...e})}function Tl({onSearch:e,availableTags:t,availableCategories:n,initialFilters:s,instantSearch:a=!1}){var v,C;const[o,c]=l.useState((s==null?void 0:s.title)||""),[i,u]=l.useState(((v=s==null?void 0:s.yearFrom)==null?void 0:v.toString())||""),[d,f]=l.useState(((C=s==null?void 0:s.yearTo)==null?void 0:C.toString())||""),[m,p]=l.useState((s==null?void 0:s.tags)||[]),[y,w]=l.useState(!1);l.useEffect(()=>{var E,D;s&&(c(s.title||""),u(((E=s.yearFrom)==null?void 0:E.toString())||""),f(((D=s.yearTo)==null?void 0:D.toString())||""),p(s.tags||[]),s.tags&&s.tags.length>0&&w(!0))},[s]),l.useEffect(()=>{a&&e({title:o,yearFrom:i?parseInt(i):null,yearTo:d?parseInt(d):null,tags:m,category:""})},[o,i,d,m,a,e]);const h=()=>{e({title:o,yearFrom:i?parseInt(i):null,yearTo:d?parseInt(d):null,tags:m,category:""})},x=E=>{p(D=>D.includes(E)?D.filter(k=>k!==E):[...D,E])},b=()=>{c(""),u(""),f(""),p([]),a||e({title:"",yearFrom:null,yearTo:null,tags:[],category:""})},g=o||i||d||m.length>0;return r.jsx(Z,{className:"w-full card-refined",children:r.jsxs(te,{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(H,{placeholder:a?"Поиск по названию и описанию...":"Search by title...",value:o,onChange:E=>c(E.target.value),className:"pl-10",onKeyPress:E=>!a&&E.key==="Enter"&&h()})]}),r.jsx(Gr,{open:y,onOpenChange:w,children:r.jsx(kl,{asChild:!0,children:r.jsxs(T,{variant:"outline",className:"gap-2",children:[r.jsx(Pa,{className:"w-4 h-4"}),"Filters",g&&r.jsx(Q,{variant:"secondary",className:"ml-1 px-1.5 py-0.5 text-xs",children:[o&&"title",i&&"year",m.length&&"tags"].filter(Boolean).length})]})})}),!a&&r.jsxs(T,{onClick:h,className:"gap-2",children:[r.jsx(wt,{className:"w-4 h-4"}),"Search"]}),g&&r.jsxs(T,{variant:"outline",onClick:b,className:"gap-2",children:[r.jsx(ke,{className:"w-4 h-4"}),"Clear"]})]}),r.jsx(Gr,{open:y,onOpenChange:w,children:r.jsxs(Il,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"year-from",children:"Year From"}),r.jsx(H,{id:"year-from",type:"number",placeholder:"1900",value:i,onChange:E=>u(E.target.value),min:"1800",max:"2030"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"year-to",children:"Year To"}),r.jsx(H,{id:"year-to",type:"number",placeholder:"2030",value:d,onChange:E=>f(E.target.value),min:"1800",max:"2030"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{children:"Filter by Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(E=>r.jsxs(T,{variant:m.includes(E)?"default":"outline",size:"sm",onClick:()=>x(E),className:"h-auto py-1 px-3 text-sm btn-refined",children:[E,m.includes(E)&&r.jsx(ke,{className:"w-3 h-3 ml-1"})]},E))})]}),m.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{children:"Selected Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(E=>r.jsxs(Q,{variant:"secondary",className:"gap-1",children:[E,r.jsx("button",{onClick:()=>x(E),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:r.jsx(ke,{className:"w-3 h-3"})})]},E))})]})]})})]})})}const Al={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"ts",ч:"ch",ш:"sh",щ:"sch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"Y",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Sch",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya"};function Dl(e){return e.split("").map(t=>Al[t]||t).join("")}function Ll(e){return Dl(e).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}function Zn(e,t){const n=Ll(e),s=t.substring(0,4);return!n||n.length<2?`item_${s}`:`${n}_${s}`}function Ml(e,t){return`/items/${Zn(e,t)}`}function Hr(e,t){return`/blog/${Zn(e,t)}`}function Ol(){const[e,t]=hi(),n=it(),[s,a]=l.useState([]),[o,c]=l.useState([]),[i,u]=l.useState(!0),[d,f]=l.useState(null),[m,p]=l.useState({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),y=()=>{const g=s.flatMap(v=>v.tags);return[...new Set(g)].sort()},w=()=>{const g=s.map(v=>v.category).filter(Boolean);return[...new Set(g)].sort()};l.useEffect(()=>{(async()=>{try{u(!0),f(null);const v=await F.getItems();v.success&&v.data?(a(v.data),c(v.data)):f(v.error||"Failed to load items")}catch(v){console.error("Error loading items:",v),f("Failed to load items")}finally{u(!1)}})()},[]),l.useEffect(()=>{const g=e.get("tag"),v=e.get("category");if(g||v){const C={title:"",yearFrom:null,yearTo:null,tags:g?[g]:[],category:v||""};p(C),h(C)}},[e,s]);const h=g=>{p(g);let v=s;if(g.title){const C=g.title.toLowerCase();v=v.filter(E=>E?(E.title||"").toLowerCase().includes(C)||(E.description||"").toLowerCase().includes(C):!1)}g.yearFrom&&(v=v.filter(C=>C.year>=g.yearFrom)),g.yearTo&&(v=v.filter(C=>C.year<=g.yearTo)),g.tags.length>0&&(v=v.filter(C=>g.tags.some(E=>C.tags.includes(E)))),g.category&&(v=v.filter(C=>C.category===g.category)),c(v)},x=g=>{t({tag:g})},b=g=>{t({category:g})};return i?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading collection..."})]})}):d?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",d]}),r.jsx(T,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("nav",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:r.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Моя коллекция"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs(T,{variant:"default",size:"sm",className:"gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2V5a2 2 0 012-2h14a2 2 0 012 2v2a2 2 0 00-2 2H5z"})}),"Коллекция"]}),r.jsx(Te,{to:"/blog",children:r.jsxs(T,{variant:"ghost",size:"sm",className:"gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Блог"]})})]})]}),r.jsx(Te,{to:"/admin",children:r.jsx(T,{variant:"outline",size:"icon",children:r.jsx(Ra,{className:"h-4 w-4"})})})]})})}),r.jsxs("div",{className:"container mx-auto max-w-7xl p-4",children:[r.jsxs("div",{className:"text-center space-y-2 mb-6",children:[r.jsx("h1",{children:"Добро пожаловать в мою коллекцию"}),r.jsx("p",{className:"text-muted-foreground",children:"Исследуйте уникальные винтажные предметы, собранные с любовью за годы коллекционирования"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Tl,{availableTags:y(),availableCategories:w(),onSearch:h,initialFilters:m,instantSearch:!0}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("p",{className:"text-muted-foreground",children:["Показано ",o.length," из ",s.length," предметов"]}),m.category&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Категория:"}),r.jsxs(Q,{variant:"secondary",className:"gap-1",children:[m.category,r.jsx(T,{variant:"ghost",size:"sm",className:"h-auto p-0 text-xs hover:text-destructive",onClick:()=>{const g={...m,category:""};h(g)},children:"×"})]})]}),(m.title||m.yearFrom||m.yearTo||m.tags.length>0||m.category)&&r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>h({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),className:"gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Очистить фильтры"]})]})})]}),o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"Нет предметов, соответствующих вашим фильтрам."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Попробуйте изменить критерии поиска или очистить фильтры."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(g=>r.jsx(dl,{item:g,onTagClick:x,onCategoryClick:b,onItemClick:()=>n(Ml(g.title,g.id))},g.id))})]})]})}function $l({item:e,onBack:t,onTagClick:n,onCategoryClick:s}){const[a,o]=l.useState(0),c=()=>{o(u=>(u+1)%e.photos.length)},i=()=>{o(u=>(u-1+e.photos.length)%e.photos.length)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(T,{variant:"outline",onClick:t,className:"gap-2",children:[r.jsx(de,{className:"w-4 h-4"}),"Назад к коллекции"]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-square overflow-hidden rounded-md",children:[r.jsx(Pt,{src:e.photos.length>0?Ge(e.photos[a]):"/placeholder-image.jpg",alt:e.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-4 left-4",children:r.jsx(Q,{variant:"secondary",className:"bg-white/90 text-primary cursor-pointer badge-refined select-none",onClick:()=>{s==null||s(e.category),t()},children:e.category})}),e.photos.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:i,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 transition-all duration-200 hover:scale-110",children:r.jsx(rt,{className:"w-5 h-5 text-gray-800"})}),r.jsx("button",{onClick:c,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 transition-all duration-200 hover:scale-110",children:r.jsx(Nt,{className:"w-5 h-5 text-gray-800"})}),r.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:e.photos.map((u,d)=>r.jsx("button",{onClick:()=>o(d),className:`w-3 h-3 rounded-full transition-all duration-200 ${d===a?"bg-white scale-110":"bg-white/60 hover:bg-white/80"}`},d))}),r.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-2 py-1 rounded text-sm",children:[a+1," / ",e.photos.length]})]})]}),e.photos.length>1&&r.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.map((u,d)=>r.jsx("button",{onClick:()=>o(d),className:`relative aspect-square overflow-hidden rounded-md transition-all duration-200 ${d===a?"ring-2 ring-primary scale-105":"hover:scale-105 opacity-70 hover:opacity-100"}`,children:r.jsx(Pt,{src:Ge(u),alt:`${e.title} - изображение ${d+1}`,className:"w-full h-full object-cover"})},d))}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Z,{className:"p-4 card-refined",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dr,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Год"}),r.jsx("p",{className:"font-medium",children:e.year})]})]})}),e.condition&&r.jsx(Z,{className:"p-4 card-refined",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ka,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Состояние"}),r.jsx("p",{className:"font-medium text-sm",children:e.condition})]})]})}),e.value&&r.jsx(Z,{className:"p-4 card-refined",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ia,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Стоимость"}),r.jsx("p",{className:"font-medium text-sm",children:e.value})]})]})}),e.acquisition&&r.jsx(Z,{className:"p-4 card-refined",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ta,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Приобретение"}),r.jsx("p",{className:"font-medium text-sm",children:e.acquisition})]})]})})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-3xl leading-tight",children:e.title}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"mb-2",children:"Краткое описание"}),r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]}),e.fullDescription&&r.jsxs("div",{children:[r.jsx("h3",{className:"mb-2",children:"Подробное описание"}),r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.fullDescription})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Теги"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((u,d)=>r.jsx(Q,{variant:"outline",className:"cursor-pointer badge-refined select-none",onClick:()=>{n==null||n(u),t()},children:u},d))})]})]})})]})]})}function _l(){const{slug:e}=kn(),t=it(),[n,s]=l.useState(null),[a,o]=l.useState(!0),[c,i]=l.useState(null);l.useEffect(()=>{(async()=>{if(!e){i("Invalid item URL"),o(!1);return}try{o(!0),i(null);const p=await F.getItemBySlug(e);p.success&&p.data?s(p.data):i(p.error||"Item not found")}catch(p){console.error("Error loading item:",p),i("Failed to load item")}finally{o(!1)}})()},[e]),l.useEffect(()=>{if(n){document.title=`${n.title} - Collepto`;const m=document.querySelector('meta[name="description"]');m&&m.setAttribute("content",n.description||`${n.title} from ${n.year}`)}return()=>{document.title="Collepto";const m=document.querySelector('meta[name="description"]');m&&m.setAttribute("content","Personal collection management system")}},[n]);const u=()=>{t("/")},d=m=>{t(`/?tag=${encodeURIComponent(m)}`)},f=m=>{t(`/?category=${encodeURIComponent(m)}`)};return a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading item..."})]})}):c||!n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",c||"Item not found"]}),r.jsxs(T,{onClick:u,children:[r.jsx(de,{className:"mr-2 h-4 w-4"}),"Back to Collection"]})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(T,{variant:"outline",onClick:u,className:"mb-4",children:[r.jsx(de,{className:"mr-2 h-4 w-4"}),"Back to Collection"]})}),r.jsx($l,{item:n,onBack:u,onTagClick:d,onCategoryClick:f})]})})}const Vt=5;function Fl({posts:e}){const[t,n]=l.useState(1),s=Math.ceil(e.length/Vt),a=(t-1)*Vt,o=e.slice(a,a+Vt),c=i=>new Date(i).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return e.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground text-lg",children:"No blog posts available"})}):r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"space-y-6",children:o.map(i=>r.jsxs(Z,{className:"transition-all duration-200 hover:shadow-lg",children:[r.jsx(ce,{className:"pb-4",children:r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:i.category}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[r.jsx(dr,{className:"w-4 h-4"}),c(i.publishDate)]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[r.jsx(hn,{className:"w-4 h-4"}),i.readTime," мин"]})]}),r.jsx("h3",{className:"text-xl font-semibold hover:text-primary transition-colors",children:r.jsx(Te,{to:Hr(i.title,i.id),className:"hover:underline",children:i.title})})]})})}),r.jsxs(te,{className:"space-y-4",children:[r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.excerpt}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:i.relatedItems.length>0&&`${i.relatedItems.length} связанных предмета`}),r.jsx(Te,{to:Hr(i.title,i.id),children:r.jsxs(T,{variant:"outline",size:"sm",className:"gap-2",children:["Читать полностью",r.jsx(Aa,{className:"w-4 h-4"})]})})]})]})]},i.id))}),s>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(i=>Math.max(1,i-1)),disabled:t===1,className:"gap-2",children:[r.jsx(rt,{className:"w-4 h-4"}),"Предыдущая"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:s},(i,u)=>u+1).map(i=>r.jsx(T,{variant:t===i?"default":"outline",size:"sm",onClick:()=>n(i),className:"w-8 h-8 p-0",children:i},i))}),r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(i=>Math.min(s,i+1)),disabled:t===s,className:"gap-2",children:["Следующая",r.jsx(Nt,{className:"w-4 h-4"})]})]})]})}function Bl(){const[e,t]=l.useState([]),[n,s]=l.useState([]),[a,o]=l.useState(""),[c,i]=l.useState(!0),[u,d]=l.useState(null);return l.useEffect(()=>{(async()=>{try{i(!0),d(null);const m=await F.getBlogPosts();m.success&&m.data?(t(m.data),s(m.data)):d(m.error||"Failed to load blog posts")}catch(m){console.error("Error loading blog posts:",m),d("Failed to load blog posts")}finally{i(!1)}})()},[]),l.useEffect(()=>{if(!a.trim()){s(e);return}const f=a.toLowerCase(),m=e.filter(p=>{const y=p.title.toLowerCase().includes(f),w=p.excerpt.toLowerCase().includes(f),h=p.category.toLowerCase().includes(f),x=p.content&&p.content.toLowerCase().includes(f);return y||w||h||x});s(m)},[a,e]),c?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading blog posts..."})]})}):u?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",u]}),r.jsx(T,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"Блог"}),r.jsxs("p",{className:"text-muted-foreground",children:["Показано ",n.length," из ",e.length," постов"]})]}),r.jsx(Te,{to:"/",children:r.jsxs(T,{variant:"outline",children:[r.jsx(de,{className:"mr-2 h-4 w-4"}),"К коллекции"]})})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(H,{placeholder:"Поиск по заголовку, содержанию, категории...",value:a,onChange:f=>o(f.target.value),className:"pl-10"})]})}),r.jsx(Fl,{posts:n})]})})}function zl({post:e,onBack:t}){if(!e)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"Пост не найден"}),r.jsxs(T,{variant:"outline",onClick:t,className:"mt-4",children:[r.jsx(de,{className:"w-4 h-4 mr-2"}),"Назад к блогу"]})]});const n=s=>new Date(s).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs(T,{variant:"ghost",onClick:t,className:"gap-2",children:[r.jsx(de,{className:"w-4 h-4"}),"Назад к блогу"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Q,{variant:"secondary",children:e.category}),r.jsx("h1",{className:"text-4xl font-bold leading-tight",children:e.title}),r.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"w-4 h-4"}),r.jsx("span",{children:n(e.publishDate)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hn,{className:"w-4 h-4"}),r.jsxs("span",{children:[e.readTime," мин. чтения"]})]})]})]}),r.jsx(Z,{children:r.jsx(te,{className:"prose prose-gray max-w-none pt-6",children:r.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})})}),e.relatedItems.length>0&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("p",{className:"text-muted-foreground",children:["В этом посте упоминается ",e.relatedItems.length," ",e.relatedItems.length===1?"предмет":"предметов"," из коллекции"]})}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t",children:[r.jsxs(T,{variant:"outline",onClick:t,className:"gap-2",children:[r.jsx(rt,{className:"w-4 h-4"}),"К списку постов"]}),r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Понравился пост? Поделитесь им!"})}),r.jsx("div",{className:"w-32"})," "]})]})}function Ul(){const{slug:e}=kn(),t=it(),[n,s]=l.useState(null),[a,o]=l.useState(!0),[c,i]=l.useState(null);l.useEffect(()=>{(async()=>{if(!e){i("Invalid blog post URL"),o(!1);return}try{o(!0),i(null);const f=await F.getBlogPostBySlug(e);f.success&&f.data?s(f.data):i(f.error||"Blog post not found")}catch(f){console.error("Error loading blog post:",f),i("Failed to load blog post")}finally{o(!1)}})()},[e]),l.useEffect(()=>{if(n){document.title=`${n.title} - Collepto Blog`;const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content",n.excerpt)}return()=>{document.title="Collepto";const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content","Personal collection management system")}},[n]);const u=()=>{t("/blog")};return a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading blog post..."})]})}):c||!n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",c||"Blog post not found"]}),r.jsxs(T,{onClick:u,children:[r.jsx(de,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(T,{variant:"outline",onClick:u,className:"mb-4",children:[r.jsx(de,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),r.jsx(zl,{post:n,onBack:u})]})})}const Wl=xr("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ce({className:e,variant:t,...n}){return r.jsx("div",{"data-slot":"alert",role:"alert",className:W(Wl({variant:t}),e),...n})}function Se({className:e,...t}){return r.jsx("div",{"data-slot":"alert-description",className:W("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Vl({onAuthSuccess:e}){const[t,n]=l.useState(""),[s,a]=l.useState(""),[o,c]=l.useState(!1),[i,u]=l.useState(null),[d,f]=l.useState(!0);l.useEffect(()=>{(async()=>{var y;try{const w=await F.checkAuthStatus();if(w.success&&((y=w.data)!=null&&y.authenticated)){e();return}}catch(w){console.error("Auth check failed:",w)}finally{f(!1)}})()},[e]);const m=async p=>{p.preventDefault(),c(!0),u(null);try{const y=await F.login(t,s);y.success?e():u(y.error||"Ошибка авторизации")}catch{u("Не удалось подключиться к серверу")}finally{c(!1)}};return d?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Проверка авторизации..."})]})}):r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:r.jsxs(Z,{className:"w-full max-w-md",children:[r.jsx(ce,{children:r.jsx(Ne,{className:"text-center",children:"Админка Collepto"})}),r.jsx(te,{children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"username",children:"Логин"}),r.jsx(H,{id:"username",type:"text",value:t,onChange:p=>n(p.target.value),required:!0,disabled:o})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"password",children:"Пароль"}),r.jsx(H,{id:"password",type:"password",value:s,onChange:p=>a(p.target.value),required:!0,disabled:o})]}),i&&r.jsx(Ce,{variant:"destructive",children:r.jsx(Se,{children:i})}),r.jsxs(T,{type:"submit",className:"w-full",disabled:o,children:[o&&r.jsx(Ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Войти"]})]})})]})})}function Gl(e){const t=e+"CollectionProvider",[n,s]=Ee(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=h=>{const{scope:x,children:b}=h,g=je.useRef(null),v=je.useRef(new Map).current;return r.jsx(a,{scope:x,itemMap:v,collectionRef:g,children:b})};c.displayName=t;const i=e+"CollectionSlot",u=st(i),d=je.forwardRef((h,x)=>{const{scope:b,children:g}=h,v=o(i,b),C=re(x,v.collectionRef);return r.jsx(u,{ref:C,children:g})});d.displayName=i;const f=e+"CollectionItemSlot",m="data-radix-collection-item",p=st(f),y=je.forwardRef((h,x)=>{const{scope:b,children:g,...v}=h,C=je.useRef(null),E=re(x,C),D=o(f,b);return je.useEffect(()=>(D.itemMap.set(C,{ref:C,...v}),()=>void D.itemMap.delete(C))),r.jsx(p,{[m]:"",ref:E,children:g})});y.displayName=f;function w(h){const x=o(e+"CollectionConsumer",h);return je.useCallback(()=>{const g=x.collectionRef.current;if(!g)return[];const v=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((D,k)=>v.indexOf(D.ref.current)-v.indexOf(k.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:c,Slot:d,ItemSlot:y},w,s]}function He(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}var Hl=l.createContext(void 0);function Qn(e){const t=l.useContext(Hl);return e||t||"ltr"}var Gt="rovingFocusGroup.onEntryFocus",ql={bubbles:!1,cancelable:!0},dt="RovingFocusGroup",[ir,es,Kl]=Gl(dt),[Yl,ts]=Ee(dt,[Kl]),[Jl,Xl]=Yl(dt),rs=l.forwardRef((e,t)=>r.jsx(ir.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(ir.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Zl,{...e,ref:t})})}));rs.displayName=dt;var Zl=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=e,p=l.useRef(null),y=re(t,p),w=Qn(o),[h,x]=ct({prop:c,defaultProp:i??null,onChange:u,caller:dt}),[b,g]=l.useState(!1),v=He(d),C=es(n),E=l.useRef(!1),[D,k]=l.useState(0);return l.useEffect(()=>{const A=p.current;if(A)return A.addEventListener(Gt,v),()=>A.removeEventListener(Gt,v)},[v]),r.jsx(Jl,{scope:n,orientation:s,dir:w,loop:a,currentTabStopId:h,onItemFocus:l.useCallback(A=>x(A),[x]),onItemShiftTab:l.useCallback(()=>g(!0),[]),onFocusableItemAdd:l.useCallback(()=>k(A=>A+1),[]),onFocusableItemRemove:l.useCallback(()=>k(A=>A-1),[]),children:r.jsx(Y.div,{tabIndex:b||D===0?-1:0,"data-orientation":s,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:ee(e.onMouseDown,()=>{E.current=!0}),onFocus:ee(e.onFocus,A=>{const S=!E.current;if(A.target===A.currentTarget&&S&&!b){const N=new CustomEvent(Gt,ql);if(A.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=C().filter(M=>M.focusable),I=R.find(M=>M.active),q=R.find(M=>M.id===h),O=[I,q,...R].filter(Boolean).map(M=>M.ref.current);as(O,f)}}E.current=!1}),onBlur:ee(e.onBlur,()=>g(!1))})})}),ns="RovingFocusGroupItem",ss=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:c,...i}=e,u=Ue(),d=o||u,f=Xl(ns,n),m=f.currentTabStopId===d,p=es(n),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:h}=f;return l.useEffect(()=>{if(s)return y(),()=>w()},[s,y,w]),r.jsx(ir.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(Y.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...i,ref:t,onMouseDown:ee(e.onMouseDown,x=>{s?f.onItemFocus(d):x.preventDefault()}),onFocus:ee(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:ee(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=tc(x,f.orientation,f.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let v=p().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")v.reverse();else if(b==="prev"||b==="next"){b==="prev"&&v.reverse();const C=v.indexOf(x.currentTarget);v=f.loop?rc(v,C+1):v.slice(C+1)}setTimeout(()=>as(v))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:h!=null}):c})})});ss.displayName=ns;var Ql={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ec(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function tc(e,t,n){const s=ec(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Ql[s]}function as(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function rc(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var nc=rs,sc=ss,Mt="Tabs",[ac,Uu]=Ee(Mt,[ts]),os=ts(),[oc,Nr]=ac(Mt),is=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:c="horizontal",dir:i,activationMode:u="automatic",...d}=e,f=Qn(i),[m,p]=ct({prop:s,onChange:a,defaultProp:o??"",caller:Mt});return r.jsx(oc,{scope:n,baseId:Ue(),value:m,onValueChange:p,orientation:c,dir:f,activationMode:u,children:r.jsx(Y.div,{dir:f,"data-orientation":c,...d,ref:t})})});is.displayName=Mt;var ls="TabsList",cs=l.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=Nr(ls,n),c=os(n);return r.jsx(nc,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Y.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});cs.displayName=ls;var ds="TabsTrigger",us=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,c=Nr(ds,n),i=os(n),u=hs(c.baseId,s),d=ps(c.baseId,s),f=s===c.value;return r.jsx(sc,{asChild:!0,...i,focusable:!a,active:f,children:r.jsx(Y.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...o,ref:t,onMouseDown:ee(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?c.onValueChange(s):m.preventDefault()}),onKeyDown:ee(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(s)}),onFocus:ee(e.onFocus,()=>{const m=c.activationMode!=="manual";!f&&!a&&m&&c.onValueChange(s)})})})});us.displayName=ds;var fs="TabsContent",ms=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...c}=e,i=Nr(fs,n),u=hs(i.baseId,s),d=ps(i.baseId,s),f=s===i.value,m=l.useRef(f);return l.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(Je,{present:a||f,children:({present:p})=>r.jsx(Y.div,{"data-state":f?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:d,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&o})})});ms.displayName=fs;function hs(e,t){return`${e}-trigger-${t}`}function ps(e,t){return`${e}-content-${t}`}var ic=is,lc=cs,cc=us,dc=ms;function uc({className:e,...t}){return r.jsx(ic,{"data-slot":"tabs",className:W("flex flex-col gap-2",e),...t})}function fc({className:e,...t}){return r.jsx(lc,{"data-slot":"tabs-list",className:W("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function qr({className:e,...t}){return r.jsx(cc,{"data-slot":"tabs-trigger",className:W("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Kr({className:e,...t}){return r.jsx(dc,{"data-slot":"tabs-content",className:W("flex-1 outline-none",e),...t})}function mc(e,t=globalThis==null?void 0:globalThis.document){const n=He(e);l.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var hc="DismissableLayer",lr="dismissableLayer.update",pc="dismissableLayer.pointerDownOutside",gc="dismissableLayer.focusOutside",Yr,gs=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xs=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:i,...u}=e,d=l.useContext(gs),[f,m]=l.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=l.useState({}),w=re(t,k=>m(k)),h=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=h.indexOf(x),g=f?h.indexOf(f):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,C=g>=b,E=bc(k=>{const A=k.target,S=[...d.branches].some(N=>N.contains(A));!C||S||(a==null||a(k),c==null||c(k),k.defaultPrevented||i==null||i())},p),D=yc(k=>{const A=k.target;[...d.branches].some(N=>N.contains(A))||(o==null||o(k),c==null||c(k),k.defaultPrevented||i==null||i())},p);return mc(k=>{g===d.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&i&&(k.preventDefault(),i()))},p),l.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Yr=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Jr(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Yr)}},[f,p,n,d]),l.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Jr())},[f,d]),l.useEffect(()=>{const k=()=>y({});return document.addEventListener(lr,k),()=>document.removeEventListener(lr,k)},[]),r.jsx(Y.div,{...u,ref:w,style:{pointerEvents:v?C?"auto":"none":void 0,...e.style},onFocusCapture:ee(e.onFocusCapture,D.onFocusCapture),onBlurCapture:ee(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ee(e.onPointerDownCapture,E.onPointerDownCapture)})});xs.displayName=hc;var xc="DismissableLayerBranch",vc=l.forwardRef((e,t)=>{const n=l.useContext(gs),s=l.useRef(null),a=re(t,s);return l.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),r.jsx(Y.div,{...e,ref:a})});vc.displayName=xc;function bc(e,t=globalThis==null?void 0:globalThis.document){const n=He(e),s=l.useRef(!1),a=l.useRef(()=>{});return l.useEffect(()=>{const o=i=>{if(i.target&&!s.current){let u=function(){vs(pc,n,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);s.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function yc(e,t=globalThis==null?void 0:globalThis.document){const n=He(e),s=l.useRef(!1);return l.useEffect(()=>{const a=o=>{o.target&&!s.current&&vs(gc,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Jr(){const e=new CustomEvent(lr);document.dispatchEvent(e)}function vs(e,t,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?fl(a,o):a.dispatchEvent(o)}var Ht="focusScope.autoFocusOnMount",qt="focusScope.autoFocusOnUnmount",Xr={bubbles:!1,cancelable:!0},jc="FocusScope",bs=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=e,[i,u]=l.useState(null),d=He(a),f=He(o),m=l.useRef(null),p=re(t,h=>u(h)),y=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(s){let h=function(v){if(y.paused||!i)return;const C=v.target;i.contains(C)?m.current=C:we(m.current,{select:!0})},x=function(v){if(y.paused||!i)return;const C=v.relatedTarget;C!==null&&(i.contains(C)||we(m.current,{select:!0}))},b=function(v){if(document.activeElement===document.body)for(const E of v)E.removedNodes.length>0&&we(i)};document.addEventListener("focusin",h),document.addEventListener("focusout",x);const g=new MutationObserver(b);return i&&g.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",x),g.disconnect()}}},[s,i,y.paused]),l.useEffect(()=>{if(i){Qr.add(y);const h=document.activeElement;if(!i.contains(h)){const b=new CustomEvent(Ht,Xr);i.addEventListener(Ht,d),i.dispatchEvent(b),b.defaultPrevented||(wc(Pc(ys(i)),{select:!0}),document.activeElement===h&&we(i))}return()=>{i.removeEventListener(Ht,d),setTimeout(()=>{const b=new CustomEvent(qt,Xr);i.addEventListener(qt,f),i.dispatchEvent(b),b.defaultPrevented||we(h??document.body,{select:!0}),i.removeEventListener(qt,f),Qr.remove(y)},0)}}},[i,d,f,y]);const w=l.useCallback(h=>{if(!n&&!s||y.paused)return;const x=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,b=document.activeElement;if(x&&b){const g=h.currentTarget,[v,C]=Nc(g);v&&C?!h.shiftKey&&b===C?(h.preventDefault(),n&&we(v,{select:!0})):h.shiftKey&&b===v&&(h.preventDefault(),n&&we(C,{select:!0})):b===g&&h.preventDefault()}},[n,s,y.paused]);return r.jsx(Y.div,{tabIndex:-1,...c,ref:p,onKeyDown:w})});bs.displayName=jc;function wc(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(we(s,{select:t}),document.activeElement!==n)return}function Nc(e){const t=ys(e),n=Zr(t,e),s=Zr(t.reverse(),e);return[n,s]}function ys(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Zr(e,t){for(const n of e)if(!Cc(n,{upTo:t}))return n}function Cc(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Sc(e){return e instanceof HTMLInputElement&&"select"in e}function we(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Sc(e)&&t&&e.select()}}var Qr=Ec();function Ec(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=en(e,t),e.unshift(t)},remove(t){var n;e=en(e,t),(n=e[0])==null||n.resume()}}}function en(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Pc(e){return e.filter(t=>t.tagName!=="A")}var Rc="Portal",js=l.forwardRef((e,t)=>{var i;const{container:n,...s}=e,[a,o]=l.useState(!1);Ae(()=>o(!0),[]);const c=n||a&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return c?Sa.createPortal(r.jsx(Y.div,{...s,ref:t}),c):null});js.displayName=Rc;var Kt=0;function kc(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tn()),document.body.insertAdjacentElement("beforeend",e[1]??tn()),Kt++,()=>{Kt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Kt--}},[])}function tn(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var le=function(){return le=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},le.apply(this,arguments)};function ws(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function Ic(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var yt="right-scroll-bar-position",jt="width-before-scroll-bar",Tc="with-scroll-bars-hidden",Ac="--removed-body-scroll-bar-size";function Yt(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dc(e,t){var n=l.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var Lc=typeof window<"u"?l.useLayoutEffect:l.useEffect,rn=new WeakMap;function Mc(e,t){var n=Dc(t||null,function(s){return e.forEach(function(a){return Yt(a,s)})});return Lc(function(){var s=rn.get(n);if(s){var a=new Set(s),o=new Set(e),c=n.current;a.forEach(function(i){o.has(i)||Yt(i,null)}),o.forEach(function(i){a.has(i)||Yt(i,c)})}rn.set(n,e)},[e]),n}function Oc(e){return e}function $c(e,t){t===void 0&&(t=Oc);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var c=t(o,s);return n.push(c),function(){n=n.filter(function(i){return i!==c})}},assignSyncMedium:function(o){for(s=!0;n.length;){var c=n;n=[],c.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){s=!0;var c=[];if(n.length){var i=n;n=[],i.forEach(o),c=n}var u=function(){var f=c;c=[],f.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){c.push(f),d()},filter:function(f){return c=c.filter(f),n}}}};return a}function _c(e){e===void 0&&(e={});var t=$c(null);return t.options=le({async:!0,ssr:!1},e),t}var Ns=function(e){var t=e.sideCar,n=ws(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return l.createElement(s,le({},n))};Ns.isSideCarExport=!0;function Fc(e,t){return e.useMedium(t),Ns}var Cs=_c(),Jt=function(){},Ot=l.forwardRef(function(e,t){var n=l.useRef(null),s=l.useState({onScrollCapture:Jt,onWheelCapture:Jt,onTouchMoveCapture:Jt}),a=s[0],o=s[1],c=e.forwardProps,i=e.children,u=e.className,d=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,y=e.noRelative,w=e.noIsolation,h=e.inert,x=e.allowPinchZoom,b=e.as,g=b===void 0?"div":b,v=e.gapMode,C=ws(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,D=Mc([n,t]),k=le(le({},C),a);return l.createElement(l.Fragment,null,f&&l.createElement(E,{sideCar:Cs,removeScrollBar:d,shards:m,noRelative:y,noIsolation:w,inert:h,setCallbacks:o,allowPinchZoom:!!x,lockRef:n,gapMode:v}),c?l.cloneElement(l.Children.only(i),le(le({},k),{ref:D})):l.createElement(g,le({},k,{className:u,ref:D}),i))});Ot.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ot.classNames={fullWidth:jt,zeroRight:yt};var nn,Bc=function(){if(nn)return nn;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zc(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Bc();return t&&e.setAttribute("nonce",t),e}function Uc(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wc(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Vc=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zc())&&(Uc(t,n),Wc(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gc=function(){var e=Vc();return function(t,n){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ss=function(){var e=Gc(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},Hc={left:0,top:0,right:0,gap:0},Xt=function(e){return parseInt(e||"",10)||0},qc=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Xt(n),Xt(s),Xt(a)]},Kc=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Hc;var t=qc(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Yc=Ss(),We="data-scroll-locked",Jc=function(e,t,n,s){var a=e.left,o=e.top,c=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Tc,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(i,"px ").concat(s,`;
  }
  body[`).concat(We,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yt,` {
    right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(jt,` {
    margin-right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(yt," .").concat(yt,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(jt," .").concat(jt,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(We,`] {
    `).concat(Ac,": ").concat(i,`px;
  }
`)},sn=function(){var e=parseInt(document.body.getAttribute(We)||"0",10);return isFinite(e)?e:0},Xc=function(){l.useEffect(function(){return document.body.setAttribute(We,(sn()+1).toString()),function(){var e=sn()-1;e<=0?document.body.removeAttribute(We):document.body.setAttribute(We,e.toString())}},[])},Zc=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;Xc();var o=l.useMemo(function(){return Kc(a)},[a]);return l.createElement(Yc,{styles:Jc(o,!t,a,n?"":"!important")})},cr=!1;if(typeof window<"u")try{var ht=Object.defineProperty({},"passive",{get:function(){return cr=!0,!0}});window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{cr=!1}var $e=cr?{passive:!1}:!1,Qc=function(e){return e.tagName==="TEXTAREA"},Es=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Qc(e)&&n[t]==="visible")},ed=function(e){return Es(e,"overflowY")},td=function(e){return Es(e,"overflowX")},an=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=Ps(e,s);if(a){var o=Rs(e,s),c=o[1],i=o[2];if(c>i)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},rd=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},nd=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Ps=function(e,t){return e==="v"?ed(t):td(t)},Rs=function(e,t){return e==="v"?rd(t):nd(t)},sd=function(e,t){return e==="h"&&t==="rtl"?-1:1},ad=function(e,t,n,s,a){var o=sd(e,window.getComputedStyle(t).direction),c=o*s,i=n.target,u=t.contains(i),d=!1,f=c>0,m=0,p=0;do{if(!i)break;var y=Rs(e,i),w=y[0],h=y[1],x=y[2],b=h-x-o*w;(w||b)&&Ps(e,i)&&(m+=b,p+=w);var g=i.parentNode;i=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!u&&i!==document.body||u&&(t.contains(i)||t===i));return(f&&(a&&Math.abs(m)<1||!a&&c>m)||!f&&(a&&Math.abs(p)<1||!a&&-c>p))&&(d=!0),d},pt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},on=function(e){return[e.deltaX,e.deltaY]},ln=function(e){return e&&"current"in e?e.current:e},od=function(e,t){return e[0]===t[0]&&e[1]===t[1]},id=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ld=0,_e=[];function cd(e){var t=l.useRef([]),n=l.useRef([0,0]),s=l.useRef(),a=l.useState(ld++)[0],o=l.useState(Ss)[0],c=l.useRef(e);l.useEffect(function(){c.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var h=Ic([e.lockRef.current],(e.shards||[]).map(ln),!0).filter(Boolean);return h.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),h.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=l.useCallback(function(h,x){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!c.current.allowPinchZoom;var b=pt(h),g=n.current,v="deltaX"in h?h.deltaX:g[0]-b[0],C="deltaY"in h?h.deltaY:g[1]-b[1],E,D=h.target,k=Math.abs(v)>Math.abs(C)?"h":"v";if("touches"in h&&k==="h"&&D.type==="range")return!1;var A=an(k,D);if(!A)return!0;if(A?E=k:(E=k==="v"?"h":"v",A=an(k,D)),!A)return!1;if(!s.current&&"changedTouches"in h&&(v||C)&&(s.current=E),!E)return!0;var S=s.current||E;return ad(S,x,h,S==="h"?v:C,!0)},[]),u=l.useCallback(function(h){var x=h;if(!(!_e.length||_e[_e.length-1]!==o)){var b="deltaY"in x?on(x):pt(x),g=t.current.filter(function(E){return E.name===x.type&&(E.target===x.target||x.target===E.shadowParent)&&od(E.delta,b)})[0];if(g&&g.should){x.cancelable&&x.preventDefault();return}if(!g){var v=(c.current.shards||[]).map(ln).filter(Boolean).filter(function(E){return E.contains(x.target)}),C=v.length>0?i(x,v[0]):!c.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),d=l.useCallback(function(h,x,b,g){var v={name:h,delta:x,target:b,should:g,shadowParent:dd(b)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(C){return C!==v})},1)},[]),f=l.useCallback(function(h){n.current=pt(h),s.current=void 0},[]),m=l.useCallback(function(h){d(h.type,on(h),h.target,i(h,e.lockRef.current))},[]),p=l.useCallback(function(h){d(h.type,pt(h),h.target,i(h,e.lockRef.current))},[]);l.useEffect(function(){return _e.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",u,$e),document.addEventListener("touchmove",u,$e),document.addEventListener("touchstart",f,$e),function(){_e=_e.filter(function(h){return h!==o}),document.removeEventListener("wheel",u,$e),document.removeEventListener("touchmove",u,$e),document.removeEventListener("touchstart",f,$e)}},[]);var y=e.removeScrollBar,w=e.inert;return l.createElement(l.Fragment,null,w?l.createElement(o,{styles:id(a)}):null,y?l.createElement(Zc,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dd(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ud=Fc(Cs,cd);var ks=l.forwardRef(function(e,t){return l.createElement(Ot,le({},e,{ref:t,sideCar:ud}))});ks.classNames=Ot.classNames;const fd=ks;var md=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fe=new WeakMap,gt=new WeakMap,xt={},Zt=0,Is=function(e){return e&&(e.host||Is(e.parentNode))},hd=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Is(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pd=function(e,t,n,s){var a=hd(t,Array.isArray(e)?e:[e]);xt[n]||(xt[n]=new WeakMap);var o=xt[n],c=[],i=new Set,u=new Set(a),d=function(m){!m||i.has(m)||(i.add(m),d(m.parentNode))};a.forEach(d);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(p){if(i.has(p))f(p);else try{var y=p.getAttribute(s),w=y!==null&&y!=="false",h=(Fe.get(p)||0)+1,x=(o.get(p)||0)+1;Fe.set(p,h),o.set(p,x),c.push(p),h===1&&w&&gt.set(p,!0),x===1&&p.setAttribute(n,"true"),w||p.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return f(t),i.clear(),Zt++,function(){c.forEach(function(m){var p=Fe.get(m)-1,y=o.get(m)-1;Fe.set(m,p),o.set(m,y),p||(gt.has(m)||m.removeAttribute(s),gt.delete(m)),y||m.removeAttribute(n)}),Zt--,Zt||(Fe=new WeakMap,Fe=new WeakMap,gt=new WeakMap,xt={})}},gd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=t||md(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),pd(s,a,n,"aria-hidden")):function(){return null}},$t="Dialog",[Ts,As]=Ee($t),[xd,ie]=Ts($t),Ds=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,i=l.useRef(null),u=l.useRef(null),[d,f]=ct({prop:s,defaultProp:a??!1,onChange:o,caller:$t});return r.jsx(xd,{scope:t,triggerRef:i,contentRef:u,contentId:Ue(),titleId:Ue(),descriptionId:Ue(),open:d,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(m=>!m),[f]),modal:c,children:n})};Ds.displayName=$t;var Ls="DialogTrigger",Ms=l.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ie(Ls,n),o=re(t,a.triggerRef);return r.jsx(Y.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Er(a.open),...s,ref:o,onClick:ee(e.onClick,a.onOpenToggle)})});Ms.displayName=Ls;var Cr="DialogPortal",[vd,Os]=Ts(Cr,{forceMount:void 0}),$s=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=ie(Cr,t);return r.jsx(vd,{scope:t,forceMount:n,children:l.Children.map(s,c=>r.jsx(Je,{present:n||o.open,children:r.jsx(js,{asChild:!0,container:a,children:c})}))})};$s.displayName=Cr;var Rt="DialogOverlay",_s=l.forwardRef((e,t)=>{const n=Os(Rt,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=ie(Rt,e.__scopeDialog);return o.modal?r.jsx(Je,{present:s||o.open,children:r.jsx(yd,{...a,ref:t})}):null});_s.displayName=Rt;var bd=st("DialogOverlay.RemoveScroll"),yd=l.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ie(Rt,n);return r.jsx(fd,{as:bd,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Y.div,{"data-state":Er(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),De="DialogContent",Fs=l.forwardRef((e,t)=>{const n=Os(De,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=ie(De,e.__scopeDialog);return r.jsx(Je,{present:s||o.open,children:o.modal?r.jsx(jd,{...a,ref:t}):r.jsx(wd,{...a,ref:t})})});Fs.displayName=De;var jd=l.forwardRef((e,t)=>{const n=ie(De,e.__scopeDialog),s=l.useRef(null),a=re(t,n.contentRef,s);return l.useEffect(()=>{const o=s.current;if(o)return gd(o)},[]),r.jsx(Bs,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ee(e.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ee(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&o.preventDefault()}),onFocusOutside:ee(e.onFocusOutside,o=>o.preventDefault())})}),wd=l.forwardRef((e,t)=>{const n=ie(De,e.__scopeDialog),s=l.useRef(!1),a=l.useRef(!1);return r.jsx(Bs,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Bs=l.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=e,i=ie(De,n),u=l.useRef(null),d=re(t,u);return kc(),r.jsxs(r.Fragment,{children:[r.jsx(bs,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(xs,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Er(i.open),...c,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(Cd,{titleId:i.titleId}),r.jsx(Ed,{contentRef:u,descriptionId:i.descriptionId})]})]})}),Sr="DialogTitle",zs=l.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ie(Sr,n);return r.jsx(Y.h2,{id:a.titleId,...s,ref:t})});zs.displayName=Sr;var Us="DialogDescription",Ws=l.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ie(Us,n);return r.jsx(Y.p,{id:a.descriptionId,...s,ref:t})});Ws.displayName=Us;var Vs="DialogClose",Gs=l.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ie(Vs,n);return r.jsx(Y.button,{type:"button",...s,ref:t,onClick:ee(e.onClick,()=>a.onOpenChange(!1))})});Gs.displayName=Vs;function Er(e){return e?"open":"closed"}var Hs="DialogTitleWarning",[Nd,qs]=pl(Hs,{contentName:De,titleName:Sr,docsSlug:"dialog"}),Cd=({titleId:e})=>{const t=qs(Hs),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Sd="DialogDescriptionWarning",Ed=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qs(Sd).contentName}}.`;return l.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Pd=Ds,Rd=Ms,kd=$s,Id=_s,Td=Fs,Ad=zs,Dd=Ws,Ks=Gs,Ys="AlertDialog",[Ld,Wu]=Ee(Ys,[As]),ve=As(),Js=e=>{const{__scopeAlertDialog:t,...n}=e,s=ve(t);return r.jsx(Pd,{...s,...n,modal:!0})};Js.displayName=Ys;var Md="AlertDialogTrigger",Od=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ve(n);return r.jsx(Rd,{...a,...s,ref:t})});Od.displayName=Md;var $d="AlertDialogPortal",Xs=e=>{const{__scopeAlertDialog:t,...n}=e,s=ve(t);return r.jsx(kd,{...s,...n})};Xs.displayName=$d;var _d="AlertDialogOverlay",Zs=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ve(n);return r.jsx(Id,{...a,...s,ref:t})});Zs.displayName=_d;var Ve="AlertDialogContent",[Fd,Bd]=Ld(Ve),zd=Ni("AlertDialogContent"),Qs=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,o=ve(n),c=l.useRef(null),i=re(t,c),u=l.useRef(null);return r.jsx(Nd,{contentName:Ve,titleName:ea,docsSlug:"alert-dialog",children:r.jsx(Fd,{scope:n,cancelRef:u,children:r.jsxs(Td,{role:"alertdialog",...o,...a,ref:i,onOpenAutoFocus:ee(a.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=u.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(zd,{children:s}),r.jsx(Wd,{contentRef:c})]})})})});Qs.displayName=Ve;var ea="AlertDialogTitle",ta=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ve(n);return r.jsx(Ad,{...a,...s,ref:t})});ta.displayName=ea;var ra="AlertDialogDescription",na=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ve(n);return r.jsx(Dd,{...a,...s,ref:t})});na.displayName=ra;var Ud="AlertDialogAction",sa=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ve(n);return r.jsx(Ks,{...a,...s,ref:t})});sa.displayName=Ud;var aa="AlertDialogCancel",oa=l.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=Bd(aa,n),o=ve(n),c=re(t,a);return r.jsx(Ks,{...o,...s,ref:c})});oa.displayName=aa;var Wd=({contentRef:e})=>{const t=`\`${Ve}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ve}\` by passing a \`${ra}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ve}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Vd=Js,Gd=Xs,Hd=Zs,qd=Qs,Kd=sa,Yd=oa,Jd=ta,Xd=na;function Zd({...e}){return r.jsx(Vd,{"data-slot":"alert-dialog",...e})}function Qd({...e}){return r.jsx(Gd,{"data-slot":"alert-dialog-portal",...e})}function eu({className:e,...t}){return r.jsx(Hd,{"data-slot":"alert-dialog-overlay",className:W("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tu({className:e,...t}){return r.jsxs(Qd,{children:[r.jsx(eu,{}),r.jsx(qd,{"data-slot":"alert-dialog-content",className:W("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function ru({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-header",className:W("flex flex-col gap-2 text-center sm:text-left",e),...t})}function nu({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-footer",className:W("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function su({className:e,...t}){return r.jsx(Jd,{"data-slot":"alert-dialog-title",className:W("text-lg font-semibold",e),...t})}function au({className:e,...t}){return r.jsx(Xd,{"data-slot":"alert-dialog-description",className:W("text-muted-foreground text-sm",e),...t})}function ou({className:e,...t}){return r.jsx(Kd,{className:W(br(),e),...t})}function iu({className:e,...t}){return r.jsx(Yd,{className:W(br({variant:"outline"}),e),...t})}function kt({className:e,...t}){return r.jsx("textarea",{"data-slot":"textarea",className:W("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var lu="Separator",cn="horizontal",cu=["horizontal","vertical"],ia=l.forwardRef((e,t)=>{const{decorative:n,orientation:s=cn,...a}=e,o=du(s)?s:cn,i=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(Y.div,{"data-orientation":o,...i,...a,ref:t})});ia.displayName=lu;function du(e){return cu.includes(e)}var uu=ia;function fu({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return r.jsx(uu,{"data-slot":"separator-root",decorative:n,orientation:t,className:W("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}var Pr="Progress",Rr=100,[mu,Vu]=Ee(Pr),[hu,pu]=mu(Pr),la=l.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=gu,...c}=e;(a||a===0)&&!dn(a)&&console.error(xu(`${a}`,"Progress"));const i=dn(a)?a:Rr;s!==null&&!un(s,i)&&console.error(vu(`${s}`,"Progress"));const u=un(s,i)?s:null,d=It(u)?o(u,i):void 0;return r.jsx(hu,{scope:n,value:u,max:i,children:r.jsx(Y.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":It(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":ua(u,i),"data-value":u??void 0,"data-max":i,...c,ref:t})})});la.displayName=Pr;var ca="ProgressIndicator",da=l.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=pu(ca,n);return r.jsx(Y.div,{"data-state":ua(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});da.displayName=ca;function gu(e,t){return`${Math.round(e/t*100)}%`}function ua(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function It(e){return typeof e=="number"}function dn(e){return It(e)&&!isNaN(e)&&e>0}function un(e,t){return It(e)&&!isNaN(e)&&e<=t&&e>=0}function xu(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Rr}\`.`}function vu(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Rr} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bu=la,yu=da;function ju({className:e,value:t,...n}){return r.jsx(bu,{"data-slot":"progress",className:W("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:r.jsx(yu,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function wu({itemId:e,existingPhotos:t=[],onPhotosUpdated:n,maxPhotos:s=10}){const[a,o]=l.useState(!1),[c,i]=l.useState([]),[u,d]=l.useState(null),[f,m]=l.useState(null),[p,y]=l.useState(null),w=t.length+c.filter(P=>P.status==="success").length<s,h=s-t.length-c.filter(P=>P.status==="success").length,x=P=>{if(!P.type.startsWith("image/"))return"Файл должен быть изображением";const O=25*1024*1024;return P.size>O?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(P.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},b=async P=>new Promise((O,M)=>{const V=new Image;V.onload=()=>{try{const B=V.width,_=V.height,me=(X,Pe=.8)=>new Promise((Le,Me)=>{let{width:se,height:ne}=V;(se>X||ne>X)&&(se>ne?(ne=ne*X/se,se=X):(se=se*X/ne,ne=X));const Oe=document.createElement("canvas"),ut=Oe.getContext("2d");if(!ut){Me(new Error("Canvas context not available"));return}Oe.width=se,Oe.height=ne,ut.drawImage(V,0,0,se,ne),Oe.toBlob(Re=>{if(!Re){Me(new Error("Failed to process image"));return}const Ft=new File([Re],P.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});Le(Ft)},"image/jpeg",Pe)});Promise.all([Promise.resolve(P),me(1920,.85),me(400,.8)]).then(([X,Pe,Le])=>{console.log(`Image variants created:
              Original: ${X.size} bytes (${B}x${_}px)
              Compressed: ${Pe.size} bytes (max 1920px)
              Thumbnail: ${Le.size} bytes (max 400px)`),O({original:X,compressed:Pe,thumbnail:Le,width:B,height:_})}).catch(M)}catch(B){console.error("Image processing error:",B),M(B)}},V.onerror=()=>{M(new Error("Failed to load image for processing"))},V.src=URL.createObjectURL(P)}),g=async P=>{i(O=>[...O,{file:P,progress:0,status:"uploading"}]);try{i(B=>B.map(_=>_.file===P?{..._,progress:10}:_));const O=await b(P);i(B=>B.map(_=>_.file===P?{..._,progress:30}:_));const M=setInterval(()=>{i(B=>B.map(_=>_.file===P&&_.status==="uploading"?{..._,progress:Math.min(_.progress+15,90)}:_))},300),V=await F.uploadPhotoR2(e,O);if(clearInterval(M),V.success&&V.data)i(B=>B.map(_=>_.file===P?{..._,progress:100,status:"success",url:V.data.url,id:V.data.id}:_)),n==null||n();else throw new Error(V.error||"Ошибка загрузки")}catch(O){const M=O instanceof Error?O.message:"Ошибка загрузки";i(V=>V.map(B=>B.file===P?{...B,progress:0,status:"error",error:M}:B))}},v=l.useCallback(P=>{d(null);const O=Array.from(P);if(O.length>h){d(`Можно загрузить только ${h} фото. Максимум ${s} фото на предмет.`);return}const M=[],V=[];if(O.forEach(B=>{const _=x(B);_?V.push(`${B.name}: ${_}`):M.push(B)}),V.length>0){d(V.join(`
`));return}M.forEach(B=>{g(B)})},[e,h,s]),C=async(P,O)=>{if(!p){y(P),d(null);try{const M=await F.deletePhoto(e,O);M.success?n==null||n():d(M.error||"Ошибка удаления фото")}catch{d("Ошибка удаления фото")}finally{y(null)}}},E=(P,O)=>{m(O),P.dataTransfer.effectAllowed="move"},D=(P,O)=>{P.preventDefault(),!(f===null||f===O)&&(P.dataTransfer.dropEffect="move")},k=async(P,O)=>{if(P.preventDefault(),f===null||f===O){m(null);return}try{const M=[...t],V=M[f];M.splice(f,1),M.splice(O,0,V);const B=M.map(me=>me.url),_=await F.reorderPhotos(e,B);_.success?n==null||n():d(_.error||"Ошибка изменения порядка фото")}catch{d("Ошибка изменения порядка фото")}finally{m(null)}},A=l.useCallback(P=>{P.preventDefault(),o(!0)},[]),S=l.useCallback(P=>{P.preventDefault(),o(!1)},[]),N=l.useCallback(P=>{P.preventDefault(),o(!1),w&&v(P.dataTransfer.files)},[w,v]),R=l.useCallback(P=>{P.target.files&&w&&v(P.target.files)},[w,v]),I=P=>{i(O=>O.filter(M=>M.file!==P))},q=P=>{i(O=>O.filter(M=>M.file!==P)),g(P)};return r.jsxs("div",{className:"space-y-4",children:[w&&r.jsx(Z,{className:`border-2 border-dashed transition-colors ${a?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:A,onDragLeave:S,onDrop:N,children:r.jsx(te,{className:"p-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(pn,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Загрузите фотографии"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Можно загрузить ещё ",h," из ",s," фото"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:R,className:"hidden",id:`photo-upload-${e}`}),r.jsx("label",{htmlFor:`photo-upload-${e}`,children:r.jsx(T,{variant:"outline",className:"gap-2",asChild:!0,children:r.jsxs("span",{children:[r.jsx(ur,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Поддерживаемые форматы: JPEG, PNG, GIF, WebP, BMP, TIFF",r.jsx("br",{}),"Максимальный размер: 25MB"]})]})]})})}),u&&r.jsxs(Ce,{variant:"destructive",children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsx(Se,{className:"whitespace-pre-line",children:u})]}),c.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium",children:"Загрузка файлов"}),c.map((P,O)=>r.jsx(Z,{children:r.jsx(te,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsxs("div",{className:"w-10 h-10 rounded bg-muted flex items-center justify-center",children:[P.status==="uploading"&&r.jsx(Ct,{className:"w-4 h-4 animate-spin"}),P.status==="success"&&r.jsx(Da,{className:"w-4 h-4 text-green-600"}),P.status==="error"&&r.jsx(Ie,{className:"w-4 h-4 text-red-600"})]}),r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium truncate",children:P.file.name}),r.jsx(Q,{variant:P.status==="success"?"default":P.status==="error"?"destructive":"secondary",children:P.status==="uploading"?"Загрузка...":P.status==="success"?"Готово":"Ошибка"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[(P.file.size/1024/1024).toFixed(1)," MB"]}),P.status==="uploading"&&r.jsx(ju,{value:P.progress,className:"h-1"}),P.status==="error"&&P.error&&r.jsx("p",{className:"text-xs text-red-600",children:P.error})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="error"&&r.jsx(T,{variant:"outline",size:"sm",onClick:()=>q(P.file),children:"Повторить"}),r.jsx(T,{variant:"ghost",size:"sm",onClick:()=>I(P.file),children:r.jsx(ke,{className:"w-4 h-4"})})]})]})})},O))]}),t.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium",children:["Загруженные фото (",t.length,")"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Q,{variant:"secondary",children:[t.length,"/",s]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Перетаскивайте для изменения порядка"})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((P,O)=>r.jsxs("div",{className:`relative group cursor-move transition-all ${f===O?"opacity-50 scale-95":""}`,draggable:!0,onDragStart:M=>E(M,O),onDragOver:M=>D(M,O),onDrop:M=>k(M,O),children:[r.jsx("div",{className:"absolute top-2 left-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("div",{className:"bg-black/70 text-white p-1 rounded",children:r.jsx(La,{className:"w-3 h-3"})})}),r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsx(Q,{variant:"secondary",className:"text-xs",children:O+1})}),r.jsx("div",{className:"aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border-primary/50 transition-colors",children:r.jsx(Pt,{src:Ge(P.url),alt:P.filename,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center gap-2",children:[r.jsx(T,{variant:"secondary",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white text-black",onClick:()=>window.open(Ge(P.url),"_blank"),children:r.jsx(St,{className:"w-4 h-4"})}),r.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(P.id,P.url),disabled:p===P.id,children:p===P.id?r.jsx(Ct,{className:"w-4 h-4 animate-spin"}):r.jsx(Qt,{className:"w-4 h-4"})})]})]},P.id))})]}),!w&&r.jsxs(Ce,{children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsxs(Se,{children:["Достигнут лимит в ",s," фотографий для этого предмета."]})]})]})}function Nu({photos:e,onPhotosChange:t,maxPhotos:n=10}){const[s,a]=l.useState(!1),[o,c]=l.useState(null),i=e.length<n,u=n-e.length,d=g=>{if(!g.type.startsWith("image/"))return"Файл должен быть изображением";const v=25*1024*1024;return g.size>v?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(g.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},f=async g=>new Promise((v,C)=>{const E=new Image;E.onload=()=>{try{let{width:k,height:A}=E;(k>1920||A>1920)&&(k>A?(A=A*1920/k,k=1920):(k=k*1920/A,A=1920));const S=document.createElement("canvas"),N=S.getContext("2d");if(!N)throw new Error("Canvas context not available");S.width=k,S.height=A,N.drawImage(E,0,0,k,A),S.toBlob(R=>{if(!R){C(new Error("Failed to process image"));return}const I=new File([R],g.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});console.log(`Image processed: ${g.size} → ${I.size} bytes (${Math.round(k)}x${Math.round(A)}px)`),v(I)},"image/jpeg",.8)}catch(D){console.error("Image processing error:",D),v(g)}},E.onerror=()=>{console.error("Failed to load image for processing"),v(g)},E.src=URL.createObjectURL(g)}),m=l.useCallback(async g=>{c(null);const v=Array.from(g);if(v.length>u){c(`Можно загрузить только ${u} фото. Максимум ${n} фото на предмет.`);return}const C=[],E=[];if(v.forEach(D=>{const k=d(D);k?E.push(`${D.name}: ${k}`):C.push(D)}),E.length>0){c(E.join(`
`));return}try{const D=await Promise.all(C.map(async k=>{const A=await f(k);return{original:k,processed:A}}));t([...e,...D])}catch(D){console.error("Error processing images:",D),c("Ошибка обработки изображений. Попробуйте еще раз.")}},[e,t,u,n]),p=l.useCallback(g=>{g.preventDefault(),a(!0)},[]),y=l.useCallback(g=>{g.preventDefault(),a(!1)},[]),w=l.useCallback(g=>{g.preventDefault(),a(!1),i&&m(g.dataTransfer.files)},[i,m]),h=l.useCallback(g=>{g.target.files&&i&&m(g.target.files)},[i,m]),x=g=>{const v=e.filter((C,E)=>E!==g);t(v)},b=g=>URL.createObjectURL(g.processed);return r.jsxs("div",{className:"space-y-4",children:[i&&r.jsx(Z,{className:`border-2 border-dashed transition-colors ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:p,onDragLeave:y,onDrop:w,children:r.jsx(te,{className:"p-6",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"mx-auto w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(pn,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm",children:"Добавьте фотографии"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Можно добавить ещё ",u," из ",n," фото"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:h,className:"hidden",id:"photo-preview-upload"}),r.jsx("label",{htmlFor:"photo-preview-upload",children:r.jsx(T,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:r.jsxs("span",{children:[r.jsx(ur,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"JPEG, PNG, GIF, WebP, BMP, TIFF · Макс. 25MB"})]})]})})}),o&&r.jsxs(Ce,{variant:"destructive",children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsx(Se,{className:"whitespace-pre-line",children:o})]}),e.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium text-sm",children:["Выбранные фото (",e.length,")"]}),r.jsxs(Q,{variant:"secondary",className:"text-xs",children:[e.length,"/",n]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:e.map((g,v)=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-muted",children:r.jsx("img",{src:b(g),alt:`Предпросмотр ${v+1}`,className:"w-full h-full object-cover",onLoad:C=>{URL.revokeObjectURL(C.target.src)}})}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center",children:r.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>x(v),children:r.jsx(ke,{className:"w-4 h-4"})})}),r.jsx("div",{className:"absolute bottom-1 left-1 right-1 bg-black/60 text-white text-xs px-2 py-1 rounded truncate",children:g.original.name})]},v))})]}),!i&&r.jsxs(Ce,{children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsxs(Se,{children:["Достигнут лимит в ",n," фотографий для этого предмета."]})]})]})}function Cu({itemId:e,onSave:t,onCancel:n}){var A;const[s,a]=l.useState({title:"",description:"",fullDescription:"",year:new Date().getFullYear(),yearFrom:void 0,yearTo:void 0,country:"",organization:"",size:"",edition:"",series:"",tags:[],category:"",condition:"",acquisition:"",value:"",photos:[]}),[o,c]=l.useState(""),[i,u]=l.useState(!1),[d,f]=l.useState(!1),[m,p]=l.useState(null),[y,w]=l.useState({}),[h,x]=l.useState([]);l.useEffect(()=>{e&&b()},[e]);const b=async()=>{if(e){u(!0),p(null);try{const S=await F.getItem(e);S.success&&S.data?a(S.data):p(S.error||"Не удалось загрузить предмет")}catch{p("Ошибка загрузки предмета")}finally{u(!1)}}},g=()=>{var N,R;const S={};return(N=s.title)!=null&&N.trim()||(S.title="Название обязательно"),(R=s.category)!=null&&R.trim()||(S.category="Категория обязательна"),(!s.year||s.year<1800||s.year>2030)&&(S.year="Год должен быть между 1800 и 2030"),s.yearFrom&&s.yearTo&&s.yearFrom>s.yearTo&&(S.yearRange='Год "от" не может быть больше года "до"'),w(S),Object.keys(S).length===0},v=async()=>{var S;if(g()){f(!0),p(null);try{let N;if(e){if(N=await F.updateItem(e,s),N.success){const R=await F.getItem(e);R.success&&R.data&&t(R.data)}}else if(N=await F.createItem(s),N.success&&((S=N.data)!=null&&S.id)){const R=N.data.id;if(h.length>0)try{for(const q of h)await F.uploadPhotoBoth(R,q.original,q.processed);x([])}catch(q){console.error("Photo upload error:",q),p("Предмет создан, но не все фото загружены. Вы можете добавить их позже.")}const I=await F.getItem(R);I.success&&I.data&&t(I.data)}N.success||p(N.error||"Ошибка сохранения")}catch{p("Ошибка сохранения предмета")}finally{f(!1)}}},C=(S,N)=>{a(R=>({...R,[S]:N})),y[S]&&w(R=>{const I={...R};return delete I[S],I})},E=()=>{var S;o.trim()&&!((S=s.tags)!=null&&S.includes(o.trim()))&&(C("tags",[...s.tags||[],o.trim()]),c(""))},D=S=>{var N;C("tags",((N=s.tags)==null?void 0:N.filter(R=>R!==S))||[])},k=S=>{S.key==="Enter"&&(S.preventDefault(),E())};return i?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"text-lg font-medium",children:"Загрузка предмета..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(T,{variant:"outline",onClick:n,className:"gap-2 btn-refined",children:[r.jsx(de,{className:"w-4 h-4"}),"Назад"]}),r.jsx("h1",{className:"text-2xl font-semibold",children:e?"Редактировать предмет":"Новый предмет"})]}),r.jsxs(T,{onClick:v,disabled:d,className:"gap-2",children:[r.jsx(gn,{className:"w-4 h-4"}),d?"Сохранение...":e?"Сохранить":"Создать предмет"]})]}),m&&r.jsxs(Ce,{variant:"destructive",children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsx(Se,{children:m})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Основная информация"})}),r.jsxs(te,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"title",children:"Название *"}),r.jsx(H,{id:"title",value:s.title||"",onChange:S=>C("title",S.target.value),placeholder:"Введите название предмета"}),y.title&&r.jsx("p",{className:"text-sm text-red-600",children:y.title})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"category",children:"Категория *"}),r.jsx(H,{id:"category",value:s.category||"",onChange:S=>C("category",S.target.value),placeholder:"Например: Винтажные камеры"}),y.category&&r.jsx("p",{className:"text-sm text-red-600",children:y.category})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"description",children:"Краткое описание"}),r.jsx(kt,{id:"description",value:s.description||"",onChange:S=>C("description",S.target.value),placeholder:"Краткое описание предмета",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"fullDescription",children:"Подробное описание"}),r.jsx(kt,{id:"fullDescription",value:s.fullDescription||"",onChange:S=>C("fullDescription",S.target.value),placeholder:"Подробное описание с историей и деталями",rows:5})]})]})]}),r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Детали"})}),r.jsxs(te,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"year",children:"Год *"}),r.jsx(H,{id:"year",type:"number",min:"1800",max:"2024",value:s.year||"",onChange:S=>C("year",parseInt(S.target.value)||"")}),y.year&&r.jsx("p",{className:"text-sm text-red-600",children:y.year})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"country",children:"Страна"}),r.jsx(H,{id:"country",value:s.country||"",onChange:S=>C("country",S.target.value),placeholder:"Страна производства"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"yearFrom",children:"Год от"}),r.jsx(H,{id:"yearFrom",type:"number",min:"1800",max:"2024",value:s.yearFrom||"",onChange:S=>C("yearFrom",parseInt(S.target.value)||void 0),placeholder:"Начало диапазона"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"yearTo",children:"Год до"}),r.jsx(H,{id:"yearTo",type:"number",min:"1800",max:"2024",value:s.yearTo||"",onChange:S=>C("yearTo",parseInt(S.target.value)||void 0),placeholder:"Конец диапазона"})]})]}),y.yearRange&&r.jsx("p",{className:"text-sm text-red-600",children:y.yearRange}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"organization",children:"Организация/Издатель"}),r.jsx(H,{id:"organization",value:s.organization||"",onChange:S=>C("organization",S.target.value),placeholder:"Производитель или издатель"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"size",children:"Размер"}),r.jsx(H,{id:"size",value:s.size||"",onChange:S=>C("size",S.target.value),placeholder:"Размеры предмета"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"edition",children:"Тираж"}),r.jsx(H,{id:"edition",value:s.edition||"",onChange:S=>C("edition",S.target.value),placeholder:"Тираж или серийность"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"series",children:"Серия"}),r.jsx(H,{id:"series",value:s.series||"",onChange:S=>C("series",S.target.value),placeholder:"Серия или коллекция"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"condition",children:"Состояние"}),r.jsx(H,{id:"condition",value:s.condition||"",onChange:S=>C("condition",S.target.value),placeholder:"Состояние предмета"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"acquisition",children:"Как приобретен"}),r.jsx(H,{id:"acquisition",value:s.acquisition||"",onChange:S=>C("acquisition",S.target.value),placeholder:"История приобретения"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"value",children:"Стоимость"}),r.jsx(H,{id:"value",value:s.value||"",onChange:S=>C("value",S.target.value),placeholder:"Примерная стоимость"})]})]})]})]}),r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Теги"})}),r.jsxs(te,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(H,{value:o,onChange:S=>c(S.target.value),onKeyPress:k,placeholder:"Добавить тег",className:"flex-1"}),r.jsx(T,{onClick:E,disabled:!o.trim(),children:r.jsx(er,{className:"w-4 h-4"})})]}),s.tags&&s.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((S,N)=>r.jsxs(Q,{variant:"secondary",className:"gap-1 badge-refined",children:[S,r.jsx("button",{onClick:()=>D(S),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:r.jsx(ke,{className:"w-3 h-3"})})]},N))})]})]}),r.jsx(fu,{}),r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Фотографии предмета"})}),r.jsx(te,{children:e?r.jsx(wu,{itemId:e,existingPhotos:((A=s.photos)==null?void 0:A.map((S,N)=>({id:`photo-${N}`,url:S,filename:`photo-${N+1}.jpg`})))||[],onPhotosUpdated:()=>{b()}}):r.jsx(Nu,{photos:h,onPhotosChange:x,maxPhotos:10})})]})]})}function Su(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Eu(e){const[t,n]=l.useState(void 0);return Ae(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let c,i;if("borderBoxSize"in o){const u=o.borderBoxSize,d=Array.isArray(u)?u[0]:u;c=d.inlineSize,i=d.blockSize}else c=e.offsetWidth,i=e.offsetHeight;n({width:c,height:i})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var _t="Switch",[Pu,Gu]=Ee(_t),[Ru,ku]=Pu(_t),fa=l.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:o,required:c,disabled:i,value:u="on",onCheckedChange:d,form:f,...m}=e,[p,y]=l.useState(null),w=re(t,v=>y(v)),h=l.useRef(!1),x=p?f||!!p.closest("form"):!0,[b,g]=ct({prop:a,defaultProp:o??!1,onChange:d,caller:_t});return r.jsxs(Ru,{scope:n,checked:b,disabled:i,children:[r.jsx(Y.button,{type:"button",role:"switch","aria-checked":b,"aria-required":c,"data-state":ga(b),"data-disabled":i?"":void 0,disabled:i,value:u,...m,ref:w,onClick:ee(e.onClick,v=>{g(C=>!C),x&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})}),x&&r.jsx(pa,{control:p,bubbles:!h.current,name:s,value:u,checked:b,required:c,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});fa.displayName=_t;var ma="SwitchThumb",ha=l.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=ku(ma,n);return r.jsx(Y.span,{"data-state":ga(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});ha.displayName=ma;var Iu="SwitchBubbleInput",pa=l.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},o)=>{const c=l.useRef(null),i=re(c,o),u=Su(n),d=Eu(t);return l.useEffect(()=>{const f=c.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&y){const w=new Event("click",{bubbles:s});y.call(f,n),f.dispatchEvent(w)}},[u,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pa.displayName=Iu;function ga(e){return e?"checked":"unchecked"}var Tu=fa,Au=ha;function Du({className:e,...t}){return r.jsx(Tu,{"data-slot":"switch",className:W("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(Au,{"data-slot":"switch-thumb",className:W("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Lu({postId:e,onSave:t,onCancel:n}){const[s,a]=l.useState({title:"",excerpt:"",content:"",publishDate:new Date().toISOString().split("T")[0],readTime:1,relatedItems:[],category:"",published:!1}),[o,c]=l.useState([]),[i,u]=l.useState(""),[d,f]=l.useState(!1),[m,p]=l.useState(!1),[y,w]=l.useState(null),[h,x]=l.useState({});l.useEffect(()=>{e&&b(),g()},[e]);const b=async()=>{if(e){f(!0),w(null);try{const N=await F.getBlogPost(e);N.success&&N.data?a(N.data):w(N.error||"Не удалось загрузить пост")}catch{w("Ошибка загрузки поста")}finally{f(!1)}}},g=async()=>{try{const N=await F.getItems();N.success&&N.data&&c(N.data)}catch(N){console.error("Failed to load items:",N)}},v=(N,R)=>{a(I=>({...I,[N]:R})),h[N]&&x(I=>({...I,[N]:""}))},C=()=>{var R,I,q,P;const N={};return(R=s.title)!=null&&R.trim()||(N.title="Заголовок обязателен"),(I=s.excerpt)!=null&&I.trim()||(N.excerpt="Краткое описание обязательно"),(q=s.content)!=null&&q.trim()||(N.content="Содержание обязательно"),(P=s.category)!=null&&P.trim()||(N.category="Категория обязательна"),s.publishDate||(N.publishDate="Дата публикации обязательна"),(!s.readTime||s.readTime<1)&&(N.readTime="Время чтения должно быть больше 0"),x(N),Object.keys(N).length===0},E=async()=>{var N;if(C()){p(!0),w(null);try{let R;if(e){if(R=await F.updateBlogPost(e,s),R.success){const I=await F.getBlogPost(e);I.success&&I.data&&t(I.data)}}else if(R=await F.createBlogPost(s),R.success&&((N=R.data)!=null&&N.id)){const I=R.data.id,q=await F.getBlogPost(I);q.success&&q.data&&t(q.data)}R.success||w(R.error||"Ошибка сохранения")}catch{w("Ошибка сохранения поста")}finally{p(!1)}}},D=N=>{var R;(R=s.relatedItems)!=null&&R.includes(N)||v("relatedItems",[...s.relatedItems||[],N]),u("")},k=N=>{var R;v("relatedItems",((R=s.relatedItems)==null?void 0:R.filter(I=>I!==N))||[])},A=()=>o.filter(N=>{var R;return(R=s.relatedItems)==null?void 0:R.includes(N.id)}),S=()=>{if(!i.trim())return[];const N=i.toLowerCase();return o.filter(R=>{var I;return R?!((I=s.relatedItems)!=null&&I.includes(R.id))&&((R.title||"").toLowerCase().includes(N)||(R.description||"").toLowerCase().includes(N)||(R.category||"").toLowerCase().includes(N)):!1}).slice(0,5)};return l.useEffect(()=>{if(s.content){const N=s.content.trim().split(/\s+/).length,R=Math.max(1,Math.ceil(N/200));v("readTime",R)}},[s.content]),d?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"text-lg font-medium",children:"Загрузка поста..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(T,{variant:"outline",onClick:n,className:"gap-2 btn-refined",children:[r.jsx(de,{className:"w-4 h-4"}),"Назад"]}),r.jsx("h1",{className:"text-2xl font-semibold",children:e?"Редактировать пост":"Новый пост"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[s.published&&r.jsxs(T,{variant:"outline",className:"gap-2",onClick:()=>window.open(`/blog/${s.slug||s.id}`,"_blank"),children:[r.jsx(St,{className:"w-4 h-4"}),"Просмотр"]}),r.jsxs(T,{onClick:E,disabled:m,className:"gap-2",children:[r.jsx(gn,{className:"w-4 h-4"}),m?"Сохранение...":e?"Сохранить":"Создать пост"]})]})]}),y&&r.jsxs(Ce,{variant:"destructive",children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsx(Se,{children:y})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Основная информация"})}),r.jsxs(te,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"title",children:"Заголовок *"}),r.jsx(H,{id:"title",value:s.title||"",onChange:N=>v("title",N.target.value),placeholder:"Введите заголовок поста"}),h.title&&r.jsx("p",{className:"text-sm text-red-600",children:h.title})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"excerpt",children:"Краткое описание *"}),r.jsx(kt,{id:"excerpt",value:s.excerpt||"",onChange:N=>v("excerpt",N.target.value),placeholder:"Краткое описание поста для превью",rows:3}),h.excerpt&&r.jsx("p",{className:"text-sm text-red-600",children:h.excerpt})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"category",children:"Категория *"}),r.jsx(H,{id:"category",value:s.category||"",onChange:N=>v("category",N.target.value),placeholder:"Например: Новости коллекции"}),h.category&&r.jsx("p",{className:"text-sm text-red-600",children:h.category})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"publishDate",children:"Дата публикации *"}),r.jsx(H,{id:"publishDate",type:"date",value:s.publishDate||"",onChange:N=>v("publishDate",N.target.value)}),h.publishDate&&r.jsx("p",{className:"text-sm text-red-600",children:h.publishDate})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"readTime",children:"Время чтения (мин) *"}),r.jsx(H,{id:"readTime",type:"number",min:"1",value:s.readTime||"",onChange:N=>v("readTime",parseInt(N.target.value)||1)}),h.readTime&&r.jsx("p",{className:"text-sm text-red-600",children:h.readTime})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Du,{id:"published",checked:s.published||!1,onCheckedChange:N=>v("published",N)}),r.jsx(z,{htmlFor:"published",children:"Опубликовать пост"})]})]})]}),r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Связанные предметы"})}),r.jsxs(te,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"itemSearch",children:"Поиск предметов"}),r.jsx(H,{id:"itemSearch",value:i,onChange:N=>u(N.target.value),placeholder:"Поиск по названию или описанию..."}),i.trim()&&r.jsxs("div",{className:"max-h-32 overflow-y-auto border rounded-md",children:[S().map(N=>r.jsxs("div",{className:"p-2 hover:bg-muted cursor-pointer border-b last:border-b-0",onClick:()=>D(N.id),children:[r.jsx("div",{className:"font-medium text-sm",children:N.title}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[N.category," • ",N.year]})]},N.id)),S().length===0&&r.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"Предметы не найдены"})]})]}),A().length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(z,{children:["Выбранные предметы (",A().length,")"]}),r.jsx("div",{className:"space-y-2",children:A().map(N=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-sm truncate",children:N.title}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[N.category," • ",N.year]})]}),r.jsx(T,{variant:"ghost",size:"sm",onClick:()=>k(N.id),children:r.jsx(ke,{className:"w-4 h-4"})})]},N.id))})]})]})]})]}),r.jsxs(Z,{className:"card-refined",children:[r.jsx(ce,{children:r.jsx(Ne,{children:"Содержание поста"})}),r.jsx(te,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(z,{htmlFor:"content",children:"Текст поста *"}),r.jsx(kt,{id:"content",value:s.content||"",onChange:N=>v("content",N.target.value),placeholder:"Введите содержание поста...",rows:15,className:"font-mono text-sm"}),h.content&&r.jsx("p",{className:"text-sm text-red-600",children:h.content}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Поддерживается Markdown разметка. Время чтения рассчитывается автоматически."})]})})]})]})}function Mu(){var kr,Ir;const[e,t]=l.useState([]),[n,s]=l.useState([]),[a,o]=l.useState(!0),[c,i]=l.useState(null),[u,d]=l.useState("dashboard"),[f,m]=l.useState(),[p,y]=l.useState(),[w,h]=l.useState(!1),[x,b]=l.useState(null),[g,v]=l.useState(""),[C,E]=l.useState(""),[D,k]=l.useState("created"),[A,S]=l.useState("desc"),[N,R]=l.useState(1),[I]=l.useState(10),[q,P]=l.useState(1),[O]=l.useState(5);l.useEffect(()=>{M()},[]);const M=async()=>{o(!0),i(null);try{const[j,L]=await Promise.all([F.getAdminItems(),F.getBlogPosts()]);j.success&&j.data?t(j.data):(console.error("Items loading error:",j.error),i(`Ошибка загрузки предметов: ${j.error}`)),L.success&&L.data?s(L.data):console.error("Blog posts loading error:",L.error)}catch(j){console.error("Data loading error:",j),i("Ошибка загрузки данных: "+(j instanceof Error?j.message:"Неизвестная ошибка"))}finally{o(!1)}},V=async()=>{try{await F.logout(),window.location.reload()}catch(j){console.error("Logout failed:",j),F.clearSession(),window.location.reload()}},B=async()=>{try{await F.downloadExport()}catch(j){alert("Ошибка экспорта: "+(j instanceof Error?j.message:"Неизвестная ошибка"))}},_=()=>{m(void 0),d("item-editor")},me=async()=>{if(x)try{const j=await F.deleteItem(x.id);j.success?(t(L=>L.filter(U=>U.id!==x.id)),h(!1),b(null)):alert("Ошибка удаления: "+(j.error||"Неизвестная ошибка"))}catch(j){alert("Ошибка удаления: "+(j instanceof Error?j.message:"Неизвестная ошибка"))}},X=j=>{t(L=>{const U=L.findIndex(G=>G.id===j.id);if(U>=0){const G=[...L];return G[U]=j,G}else return[j,...L]}),d("dashboard")},Pe=()=>{d("dashboard"),m(void 0),y(void 0)},Le=j=>{s(L=>{const U=L.findIndex(G=>G.id===j.id);if(U>=0){const G=[...L];return G[U]=j,G}else return[j,...L]}),d("dashboard")},Me=()=>{if(!e||e.length===0)return[];let j=[...e];if(g.trim()){const L=g.toLowerCase();j=j.filter(U=>{if(!U)return!1;try{const G=(U.title||"").toLowerCase().includes(L),ae=(U.description||"").toLowerCase().includes(L),Xe=(U.category||"").toLowerCase().includes(L),Ze=(U.tags||[]).some(Tr=>Tr?String(Tr).toLowerCase().includes(L):!1);return G||ae||Xe||Ze}catch(G){return console.error("Error filtering item:",U,G),!1}})}return C&&(j=j.filter(L=>L.category===C)),j.sort((L,U)=>{if(!L||!U)return 0;try{let G,ae;switch(D){case"title":G=String(L.title||"").toLowerCase(),ae=String(U.title||"").toLowerCase();break;case"year":G=Number(L.year)||0,ae=Number(U.year)||0;break;case"created":G=new Date(L.createdAt||"").getTime()||0,ae=new Date(U.createdAt||"").getTime()||0;break;case"updated":G=new Date(L.updatedAt||"").getTime()||0,ae=new Date(U.updatedAt||"").getTime()||0;break;default:return 0}return A==="asc"?G>ae?1:-1:G<ae?1:-1}catch(G){return console.error("Error sorting items:",L,U,G),0}}),j},se=()=>{try{const j=Me();if(!j||j.length===0)return[];const L=(N-1)*I;return j.slice(L,L+I)}catch(j){return console.error("Error in getPaginatedItems:",j),[]}},ne=()=>{try{const j=Me();return Math.ceil(((j==null?void 0:j.length)||0)/I)}catch(j){return console.error("Error in getTotalPages:",j),1}},Oe=()=>Array.from(new Set(e.map(j=>j.category).filter(Boolean))).sort(),ut=()=>{const j=(q-1)*O;return n.slice(j,j+O)},Re=()=>Math.ceil(n.length/O),Ft=j=>{window.open(`/items/${j.slug||j.id}`,"_blank")},xa=j=>{m(j.id),d("item-editor")},va=j=>{b(j),h(!0)},ba=j=>{window.open(`/blog/${j.slug||j.id}`,"_blank")},ya=()=>{y(void 0),d("blog-editor")},ja=j=>{y(j.id),d("blog-editor")},wa=async j=>{if(confirm(`Удалить пост "${j.title}"?`))try{const L=await F.deleteBlogPost(j.id);L.success?s(U=>U.filter(G=>G.id!==j.id)):alert("Ошибка удаления: "+(L.error||"Неизвестная ошибка"))}catch(L){alert("Ошибка удаления: "+(L instanceof Error?L.message:"Неизвестная ошибка"))}};return u==="item-editor"?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsx("div",{className:"container mx-auto max-w-7xl p-4",children:r.jsx(Cu,{itemId:f,onSave:X,onCancel:Pe})})}):u==="blog-editor"?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsx("div",{className:"container mx-auto max-w-7xl p-4",children:r.jsx(Lu,{postId:p,onSave:Le,onCancel:Pe})})}):a?r.jsx("div",{className:"min-h-screen bg-background p-4",children:r.jsx("div",{className:"container mx-auto max-w-7xl",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{children:"Админка"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Загрузка данных..."})]})})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:r.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Админка Collepto"}),r.jsx(Q,{variant:"secondary",children:"Администратор"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(T,{onClick:B,variant:"outline",size:"sm",className:"gap-2 btn-refined",children:[r.jsx(Ma,{className:"w-4 h-4"}),"Экспорт"]}),r.jsxs(T,{onClick:V,variant:"outline",size:"sm",className:"gap-2 btn-refined",children:[r.jsx(xn,{className:"w-4 h-4"}),"Выйти"]})]})]})})}),r.jsxs("div",{className:"container mx-auto max-w-7xl p-4",children:[c&&r.jsx(Ce,{variant:"destructive",className:"mb-6",children:r.jsx(Se,{children:c})}),r.jsxs(uc,{defaultValue:"collection",className:"w-full",children:[r.jsxs(fc,{className:"grid w-full grid-cols-2 mb-6",children:[r.jsx(qr,{value:"collection",children:"Коллекция"}),r.jsx(qr,{value:"blog",children:"Блог"})]}),r.jsxs(Kr,{value:"collection",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Управление коллекцией"}),r.jsxs(T,{onClick:_,className:"gap-2",children:[r.jsx(er,{className:"w-4 h-4"}),"Добавить предмет"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[r.jsxs("div",{className:"relative flex-1 min-w-0",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(H,{placeholder:"Поиск по названию, описанию, категории, тегам...",value:g,onChange:j=>{v(j.target.value),R(1)},className:"pl-10"})]}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs("select",{value:C,onChange:j=>{E(j.target.value),R(1)},className:"px-3 py-2 border border-input bg-background rounded-md text-sm",children:[r.jsx("option",{value:"",children:"Все категории"}),Oe().map(j=>r.jsx("option",{value:j,children:j},j))]}),r.jsxs("select",{value:D,onChange:j=>k(j.target.value),className:"px-3 py-2 border border-input bg-background rounded-md text-sm",children:[r.jsx("option",{value:"created",children:"По дате добавления"}),r.jsx("option",{value:"updated",children:"По дате изменения"}),r.jsx("option",{value:"title",children:"По названию"}),r.jsx("option",{value:"year",children:"По году"})]}),r.jsx(T,{variant:"outline",size:"sm",onClick:()=>S(A==="asc"?"desc":"asc"),className:"gap-1",children:A==="asc"?r.jsx(Oa,{className:"w-4 h-4"}):r.jsx($a,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Показано ",((kr=se())==null?void 0:kr.length)||0," из ",((Ir=Me())==null?void 0:Ir.length)||0," предметов"]})]}),r.jsx("div",{className:"grid gap-4",children:(se()||[]).map(j=>{var L,U;return r.jsx(Z,{className:"card-refined",children:r.jsx(te,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-muted",children:j.photos&&j.photos.length>0&&j.photos[0]?r.jsx("img",{src:Ge(j.photos[0]),alt:j.title||"Предмет",className:"w-full h-full object-cover",onError:G=>{const ae=G.target;ae.style.display="none";const Xe=ae.parentElement;if(Xe&&!Xe.querySelector(".fallback-icon")){const Ze=document.createElement("div");Ze.className="w-full h-full flex items-center justify-center fallback-icon",Ze.innerHTML='<svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>',Xe.appendChild(Ze)}}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(ur,{className:"w-6 h-6 text-muted-foreground"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.jsx("h3",{className:"font-medium truncate",children:j.title}),r.jsx(Q,{variant:"outline",className:"badge-refined text-xs",children:j.category}),r.jsx(Q,{variant:"secondary",className:"badge-refined text-xs",children:j.year})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:j.description}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:[((L=j.photos)==null?void 0:L.length)||0," фото"]}),r.jsxs("span",{children:[((U=j.tags)==null?void 0:U.length)||0," тегов"]}),r.jsxs("span",{children:["Обновлен: ",j.updatedAt?new Date(j.updatedAt).toLocaleDateString("ru-RU"):"Неизвестно"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 btn-refined",onClick:()=>Ft(j),children:[r.jsx(St,{className:"w-3 h-3"}),"Просмотр"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 btn-refined",onClick:()=>xa(j),children:[r.jsx(Ar,{className:"w-3 h-3"}),"Изменить"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>va(j),children:[r.jsx(Qt,{className:"w-3 h-3"}),"Удалить"]})]})]})})},j.id)})}),ne()>1&&r.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>R(Math.max(1,N-1)),disabled:N===1,className:"gap-1",children:[r.jsx(rt,{className:"w-4 h-4"}),"Назад"]}),r.jsx("div",{className:"flex gap-1",children:Array.from({length:ne()},(j,L)=>L+1).map(j=>r.jsx(T,{variant:j===N?"default":"outline",size:"sm",onClick:()=>R(j),className:"min-w-[32px]",children:j},j))}),r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>R(Math.min(ne(),N+1)),disabled:N===ne(),className:"gap-1",children:["Вперед",r.jsx(Nt,{className:"w-4 h-4"})]})]})]}),r.jsxs(Kr,{value:"blog",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Управление блогом"}),r.jsxs(T,{onClick:ya,className:"gap-2",children:[r.jsx(er,{className:"w-4 h-4"}),"Новый пост"]})]}),r.jsx("div",{className:"grid gap-4",children:ut().map(j=>{var L;return r.jsx(Z,{className:"card-refined",children:r.jsx(te,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.jsx("h3",{className:"font-medium truncate",children:j.title}),r.jsx(Q,{variant:j.published?"default":"secondary",className:"badge-refined text-xs",children:j.published?"Опубликован":"Черновик"}),r.jsx(Q,{variant:"outline",className:"badge-refined text-xs",children:j.category})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:j.excerpt}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsx("span",{children:new Date(j.publishDate).toLocaleDateString("ru-RU")}),r.jsxs("span",{children:[j.readTime," мин чтения"]}),r.jsxs("span",{children:[((L=j.relatedItems)==null?void 0:L.length)||0," связанных предметов"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 btn-refined",onClick:()=>ba(j),children:[r.jsx(St,{className:"w-3 h-3"}),"Просмотр"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 btn-refined",onClick:()=>ja(j),children:[r.jsx(Ar,{className:"w-3 h-3"}),"Изменить"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>wa(j),children:[r.jsx(Qt,{className:"w-3 h-3"}),"Удалить"]})]})]})})},j.id)})}),Re()>1&&r.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>P(Math.max(1,q-1)),disabled:q===1,className:"gap-1",children:[r.jsx(rt,{className:"w-4 h-4"}),"Назад"]}),r.jsx("div",{className:"flex gap-1",children:Array.from({length:Re()},(j,L)=>L+1).map(j=>r.jsx(T,{variant:j===q?"default":"outline",size:"sm",onClick:()=>P(j),className:"min-w-[32px]",children:j},j))}),r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>P(Math.min(Re(),q+1)),disabled:q===Re(),className:"gap-1",children:["Вперед",r.jsx(Nt,{className:"w-4 h-4"})]})]})]})]}),r.jsx("div",{className:"mt-12 pt-6 border-t",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold",children:e.length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Предметы"})]}),r.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold",children:n.length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Посты блога"})]}),r.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold",children:new Set(e.map(j=>j.category)).size}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Категории"})]}),r.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold",children:e.reduce((j,L)=>{var U;return j+(((U=L.photos)==null?void 0:U.length)||0)},0)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Фотографии"})]})]})})]}),r.jsx(Zd,{open:w,onOpenChange:h,children:r.jsxs(tu,{children:[r.jsxs(ru,{children:[r.jsx(su,{children:"Удалить предмет?"}),r.jsxs(au,{children:['Вы уверены, что хотите удалить предмет "',x==null?void 0:x.title,'"? Это действие нельзя отменить. Все связанные фотографии также будут удалены.']})]}),r.jsxs(nu,{children:[r.jsx(iu,{onClick:()=>h(!1),children:"Отмена"}),r.jsx(ou,{onClick:me,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Удалить"})]})]})})]})}function Ou(){const[e,t]=l.useState("admin-auth"),[n,s]=l.useState(!1),[a,o]=l.useState(!0);l.useEffect(()=>{(async()=>{var f;if(F.isAuthenticated())try{const m=await F.checkAuthStatus();m.success&&((f=m.data)!=null&&f.authenticated)?(s(!0),t("admin")):(F.clearSession(),s(!1),t("admin-auth"))}catch(m){console.error("Auth check failed:",m),F.clearSession(),s(!1),t("admin-auth")}else s(!1),t("admin-auth");o(!1)})()},[]);const c=()=>{s(!0),t("admin")},i=async()=>{try{await F.logout()}catch(d){console.error("Logout error:",d)}finally{s(!1),t("admin-auth")}},u=()=>{window.location.href="/"};return a?r.jsx(ar,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Checking authentication..."})]})})}):r.jsx(ar,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center",children:[r.jsx("div",{className:"mr-4 flex",children:r.jsx("button",{className:"flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors",onClick:u,children:r.jsx("span",{children:"Collepto Admin"})})}),r.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[r.jsxs(T,{variant:"ghost",size:"sm",onClick:u,className:"gap-2",children:[r.jsx(_a,{className:"w-4 h-4"}),"Main Site"]}),n&&r.jsxs(T,{variant:"ghost",size:"sm",onClick:i,className:"gap-2",children:[r.jsx(xn,{className:"w-4 h-4"}),"Logout"]})]})]})}),r.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e==="admin-auth"&&r.jsx(Vl,{onAuthSuccess:c}),e==="admin"&&n&&r.jsx(Mu,{})]})]})})}function $u(){return xe().pathname.startsWith("/admin")?r.jsx(Ou,{}):r.jsx(ar,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsxs(_o,{children:[r.jsx(Be,{path:"/",element:r.jsx(Ol,{})}),r.jsx(Be,{path:"/items/:slug",element:r.jsx(_l,{})}),r.jsx(Be,{path:"/blog",element:r.jsx(Bl,{})}),r.jsx(Be,{path:"/blog/:slug",element:r.jsx(Ul,{})}),r.jsx(Be,{path:"*",element:r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Page not found"}),r.jsx("a",{href:"/",className:"text-primary hover:underline",children:"Go home"})]})})})]})})}tr.createRoot(document.getElementById("root")).render(r.jsx(je.StrictMode,{children:r.jsx(ci,{children:r.jsx($u,{})})}));
