var Gs=Object.defineProperty;var Ws=(e,r,n)=>r in e?Gs(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var Ke=(e,r,n)=>(Ws(e,typeof r!="symbol"?r+"":r,n),n);import{r as c,a as nr,R as ar,b as Vs,c as ne}from"./vendor-194d1c16.js";import{E as qs,X as W,C as ut,a as or,A as Me,b as ft,c as Ks,D as Hs,M as Ys,d as ir,e as Xs,S as It,F as Zs,f as Js,L as nt,U as lr,I as mt,g as he,h as Qs,i as en,P as at,j as tn,k as cr,l as rn,m as sn,n as nn,o as kt,p as Rt,T as Tt,H as an}from"./ui-a0c2d6dc.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var dr={exports:{}},$e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=c,ln=Symbol.for("react.element"),cn=Symbol.for("react.fragment"),dn=Object.prototype.hasOwnProperty,un=on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fn={key:!0,ref:!0,__self:!0,__source:!0};function ur(e,r,n){var s,a={},o=null,l=null;n!==void 0&&(o=""+n),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(l=r.ref);for(s in r)dn.call(r,s)&&!fn.hasOwnProperty(s)&&(a[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)a[s]===void 0&&(a[s]=r[s]);return{$$typeof:ln,type:e,key:o,ref:l,props:a,_owner:un.current}}$e.Fragment=cn;$e.jsx=ur;$e.jsxs=ur;dr.exports=$e;var t=dr.exports,ot={},Pt=nr;ot.createRoot=Pt.createRoot,ot.hydrateRoot=Pt.hydrateRoot;function Dt(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function fr(...e){return r=>{let n=!1;const s=e.map(a=>{const o=Dt(a,r);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():Dt(e[a],null)}}}}function q(...e){return c.useCallback(fr(...e),e)}function Ae(e){const r=mn(e),n=c.forwardRef((s,a)=>{const{children:o,...l}=s,i=c.Children.toArray(o),f=i.find(gn);if(f){const u=f.props.children,d=i.map(m=>m===f?c.Children.count(u)>1?c.Children.only(null):c.isValidElement(u)?u.props.children:null:m);return t.jsx(r,{...l,ref:a,children:c.isValidElement(u)?c.cloneElement(u,void 0,d):null})}return t.jsx(r,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var mr=Ae("Slot");function mn(e){const r=c.forwardRef((n,s)=>{const{children:a,...o}=n;if(c.isValidElement(a)){const l=xn(a),i=pn(o,a.props);return a.type!==c.Fragment&&(i.ref=s?fr(s,l):l),c.cloneElement(a,i)}return c.Children.count(a)>1?c.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var hr=Symbol("radix.slottable");function hn(e){const r=({children:n})=>t.jsx(t.Fragment,{children:n});return r.displayName=`${e}.Slottable`,r.__radixId=hr,r}function gn(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hr}function pn(e,r){const n={...r};for(const s in r){const a=e[s],o=r[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const f=o(...i);return a(...i),f}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function xn(e){var s,a;let r=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function gr(e){var r,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(r=0;r<a;r++)e[r]&&(n=gr(e[r]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function pr(){for(var e,r,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(r=gr(e))&&(s&&(s+=" "),s+=r);return s}const Ot=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_t=pr,ht=(e,r)=>n=>{var s;if((r==null?void 0:r.variants)==null)return _t(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=r,l=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],m=o==null?void 0:o[u];if(d===null)return null;const g=Ot(d)||Ot(m);return a[u][g]}),i=n&&Object.entries(n).reduce((u,d)=>{let[m,g]=d;return g===void 0||(u[m]=g),u},{}),f=r==null||(s=r.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:m,className:g,...y}=d;return Object.entries(y).every(C=>{let[h,p]=C;return Array.isArray(p)?p.includes({...o,...i}[h]):{...o,...i}[h]===p})?[...u,m,g]:u},[]);return _t(e,l,f,n==null?void 0:n.class,n==null?void 0:n.className)},gt="-",vn=e=>{const r=yn(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const i=l.split(gt);return i[0]===""&&i.length!==1&&i.shift(),xr(i,r)||bn(l)},getConflictingClassGroupIds:(l,i)=>{const f=n[l]||[];return i&&s[l]?[...f,...s[l]]:f}}},xr=(e,r)=>{var l;if(e.length===0)return r.classGroupId;const n=e[0],s=r.nextPart.get(n),a=s?xr(e.slice(1),s):void 0;if(a)return a;if(r.validators.length===0)return;const o=e.join(gt);return(l=r.validators.find(({validator:i})=>i(o)))==null?void 0:l.classGroupId},Mt=/^\[(.+)\]$/,bn=e=>{if(Mt.test(e)){const r=Mt.exec(e)[1],n=r==null?void 0:r.substring(0,r.indexOf(":"));if(n)return"arbitrary.."+n}},yn=e=>{const{theme:r,prefix:n}=e,s={nextPart:new Map,validators:[]};return Nn(Object.entries(e.classGroups),n).forEach(([o,l])=>{it(l,s,o,r)}),s},it=(e,r,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?r:Lt(r,a);o.classGroupId=n;return}if(typeof a=="function"){if(jn(a)){it(a(s),r,n,s);return}r.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,l])=>{it(l,Lt(r,o),n,s)})})},Lt=(e,r)=>{let n=e;return r.split(gt).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},jn=e=>e.isThemeGetter,Nn=(e,r)=>r?e.map(([n,s])=>{const a=s.map(o=>typeof o=="string"?r+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,i])=>[r+l,i])):o);return[n,a]}):e,wn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,n=new Map,s=new Map;const a=(o,l)=>{n.set(o,l),r++,r>e&&(r=0,s=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return a(o,l),l},set(o,l){n.has(o)?n.set(o,l):a(o,l)}}},vr="!",Cn=e=>{const{separator:r,experimentalParseClassName:n}=e,s=r.length===1,a=r[0],o=r.length,l=i=>{const f=[];let u=0,d=0,m;for(let p=0;p<i.length;p++){let b=i[p];if(u===0){if(b===a&&(s||i.slice(p,p+o)===r)){f.push(i.slice(d,p)),d=p+o;continue}if(b==="/"){m=p;continue}}b==="["?u++:b==="]"&&u--}const g=f.length===0?i:i.substring(d),y=g.startsWith(vr),C=y?g.substring(1):g,h=m&&m>d?m-d:void 0;return{modifiers:f,hasImportantModifier:y,baseClassName:C,maybePostfixModifierPosition:h}};return n?i=>n({className:i,parseClassName:l}):l},Sn=e=>{if(e.length<=1)return e;const r=[];let n=[];return e.forEach(s=>{s[0]==="["?(r.push(...n.sort(),s),n=[]):n.push(s)}),r.push(...n.sort()),r},En=e=>({cache:wn(e.cacheSize),parseClassName:Cn(e),...vn(e)}),An=/\s+/,In=(e,r)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=r,o=[],l=e.trim().split(An);let i="";for(let f=l.length-1;f>=0;f-=1){const u=l[f],{modifiers:d,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:y}=n(u);let C=!!y,h=s(C?g.substring(0,y):g);if(!h){if(!C){i=u+(i.length>0?" "+i:i);continue}if(h=s(g),!h){i=u+(i.length>0?" "+i:i);continue}C=!1}const p=Sn(d).join(":"),b=m?p+vr:p,N=b+h;if(o.includes(N))continue;o.push(N);const S=a(h,C);for(let w=0;w<S.length;++w){const R=S[w];o.push(b+R)}i=u+(i.length>0?" "+i:i)}return i};function kn(){let e=0,r,n,s="";for(;e<arguments.length;)(r=arguments[e++])&&(n=br(r))&&(s&&(s+=" "),s+=n);return s}const br=e=>{if(typeof e=="string")return e;let r,n="";for(let s=0;s<e.length;s++)e[s]&&(r=br(e[s]))&&(n&&(n+=" "),n+=r);return n};function Rn(e,...r){let n,s,a,o=l;function l(f){const u=r.reduce((d,m)=>m(d),e());return n=En(u),s=n.cache.get,a=n.cache.set,o=i,i(f)}function i(f){const u=s(f);if(u)return u;const d=In(f,n);return a(f,d),d}return function(){return o(kn.apply(null,arguments))}}const O=e=>{const r=n=>n[e]||[];return r.isThemeGetter=!0,r},yr=/^\[(?:([a-z-]+):)?(.+)\]$/i,Tn=/^\d+\/\d+$/,Pn=new Set(["px","full","screen"]),Dn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,On=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_n=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Mn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ln=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Z=e=>ge(e)||Pn.has(e)||Tn.test(e),re=e=>je(e,"length",Vn),ge=e=>!!e&&!Number.isNaN(Number(e)),He=e=>je(e,"number",ge),Ce=e=>!!e&&Number.isInteger(Number(e)),Fn=e=>e.endsWith("%")&&ge(e.slice(0,-1)),P=e=>yr.test(e),se=e=>Dn.test(e),$n=new Set(["length","size","percentage"]),zn=e=>je(e,$n,jr),Bn=e=>je(e,"position",jr),Un=new Set(["image","url"]),Gn=e=>je(e,Un,Kn),Wn=e=>je(e,"",qn),Se=()=>!0,je=(e,r,n)=>{const s=yr.exec(e);return s?s[1]?typeof r=="string"?s[1]===r:r.has(s[1]):n(s[2]):!1},Vn=e=>On.test(e)&&!_n.test(e),jr=()=>!1,qn=e=>Mn.test(e),Kn=e=>Ln.test(e),Hn=()=>{const e=O("colors"),r=O("spacing"),n=O("blur"),s=O("brightness"),a=O("borderColor"),o=O("borderRadius"),l=O("borderSpacing"),i=O("borderWidth"),f=O("contrast"),u=O("grayscale"),d=O("hueRotate"),m=O("invert"),g=O("gap"),y=O("gradientColorStops"),C=O("gradientColorStopPositions"),h=O("inset"),p=O("margin"),b=O("opacity"),N=O("padding"),S=O("saturate"),w=O("scale"),R=O("sepia"),x=O("skew"),v=O("space"),E=O("translate"),j=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",P,r],k=()=>[P,r],B=()=>["",Z,re],te=()=>["auto",ge,P],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Et=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],qe=()=>["start","end","center","between","around","evenly","stretch"],we=()=>["","0",P],At=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[ge,P];return{cacheSize:500,separator:":",theme:{colors:[Se],spacing:[Z,re],blur:["none","",se,P],brightness:X(),borderColor:[e],borderRadius:["none","","full",se,P],borderSpacing:k(),borderWidth:B(),contrast:X(),grayscale:we(),hueRotate:X(),invert:we(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Fn,re],inset:A(),margin:A(),opacity:X(),padding:k(),saturate:X(),scale:X(),sepia:we(),skew:X(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",P]}],container:["container"],columns:[{columns:[se]}],"break-after":[{"break-after":At()}],"break-before":[{"break-before":At()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),P]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ce,P]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",P]}],grow:[{grow:we()}],shrink:[{shrink:we()}],order:[{order:["first","last","none",Ce,P]}],"grid-cols":[{"grid-cols":[Se]}],"col-start-end":[{col:["auto",{span:["full",Ce,P]},P]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[Se]}],"row-start-end":[{row:["auto",{span:[Ce,P]},P]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",P]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",P]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...qe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...qe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...qe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[v]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[v]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",P,r]}],"min-w":[{"min-w":[P,r,"min","max","fit"]}],"max-w":[{"max-w":[P,r,"none","full","min","max","fit","prose",{screen:[se]},se]}],h:[{h:[P,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[P,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[P,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[P,r,"auto","min","max","fit"]}],"font-size":[{text:["base",se,re]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",He]}],"font-family":[{font:[Se]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",P]}],"line-clamp":[{"line-clamp":["none",ge,He]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Z,P]}],"list-image":[{"list-image":["none",P]}],"list-style-type":[{list:["none","disc","decimal",P]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Z,re]}],"underline-offset":[{"underline-offset":["auto",Z,P]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",P]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",P]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),Bn]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zn]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Gn]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:K()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Z,P]}],"outline-w":[{outline:[Z,re]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Z,re]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",se,Wn]}],"shadow-color":[{shadow:[Se]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Et(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Et()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",se,P]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",P]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",P]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",P]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Ce,P]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",P]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",P]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",P]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Z,re,He]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Yn=Rn(Hn);function D(...e){return Yn(pr(e))}const pt=ht("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function T({className:e,variant:r,size:n,asChild:s=!1,...a}){const o=s?mr:"button";return t.jsx(o,{"data-slot":"button",className:D(pt({variant:r,size:n,className:e})),...a})}const Xn=ht("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _({className:e,variant:r,asChild:n=!1,...s}){const a=n?mr:"span";return t.jsx(a,{"data-slot":"badge",className:D(Xn({variant:r}),e),...s})}const Zn={theme:"system",setTheme:()=>null},Jn=c.createContext(Zn);function Ee({children:e,defaultTheme:r="system",storageKey:n="vite-ui-theme",...s}){const[a,o]=c.useState(()=>localStorage.getItem(n)||r);c.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),a==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(f);return}i.classList.add(a)},[a]);const l={theme:a,setTheme:i=>{localStorage.setItem(n,i),o(i)}};return t.jsx(Jn.Provider,{...s,value:l,children:e})}function M({className:e,...r}){return t.jsx("div",{"data-slot":"card",className:D("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...r})}function V({className:e,...r}){return t.jsx("div",{"data-slot":"card-header",className:D("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function J({className:e,...r}){return t.jsx("h4",{"data-slot":"card-title",className:D("leading-none",e),...r})}function z({className:e,...r}){return t.jsx("div",{"data-slot":"card-content",className:D("px-6 [&:last-child]:pb-6",e),...r})}function Qn({className:e,...r}){return t.jsx("div",{"data-slot":"card-footer",className:D("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...r})}const ea="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Q(e){const[r,n]=c.useState(!1),s=()=>{n(!0)},{src:a,alt:o,style:l,className:i,...f}=e;return r?t.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:l,children:t.jsx("div",{className:"flex items-center justify-center w-full h-full",children:t.jsx("img",{src:ea,alt:"Error loading image",...f,"data-original-url":a})})}):t.jsx("img",{src:a,alt:o,className:i,style:l,...f,onError:s})}function ta({id:e,category:r,photos:n=[],title:s,description:a,year:o,tags:l=[],onMoreDetails:i,onTagClick:f,onCategoryClick:u}){const[d,m]=c.useState(0),[g,y]=c.useState(!1),C=h=>{if(!n.length)return;const p=h.currentTarget.getBoundingClientRect(),b=h.clientX-p.left,N=p.width,S=Math.floor(b/N*n.length);m(Math.max(0,Math.min(S,n.length-1)))};return t.jsxs(M,{className:"h-full flex flex-col transition-all duration-200 hover:shadow-lg",children:[t.jsx(V,{className:"p-0",children:t.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-lg cursor-pointer",onMouseMove:C,onMouseEnter:()=>y(!0),onMouseLeave:()=>{y(!1),m(0)},children:[t.jsx(Q,{src:n.length>0?n[d]||n[0]:"/placeholder-image.jpg",alt:s,className:"w-full h-full object-cover transition-all duration-300"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(_,{variant:"secondary",className:"bg-white/90 text-primary cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:h=>{h.stopPropagation(),u==null||u(r)},children:r})}),n.length>1&&g&&t.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1",children:n.map((h,p)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-200 ${p===d?"bg-white scale-110":"bg-white/50 hover:bg-white/75"}`},p))})]})}),t.jsxs(z,{className:"flex-1 p-4 space-y-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h3",{className:"line-clamp-2 leading-tight",children:s}),t.jsx("span",{className:"text-muted-foreground text-sm shrink-0",children:o})]}),t.jsx("p",{className:"text-muted-foreground text-sm line-clamp-3 leading-relaxed",children:a})]}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.slice(0,4).map((h,p)=>t.jsx(_,{variant:"outline",className:"text-xs cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>f==null?void 0:f(h),children:h},p)),l.length>4&&t.jsxs(_,{variant:"outline",className:"text-xs cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>{const h=l.slice(4).join(", ");alert(`Остальные теги: ${h}`)},children:["+",l.length-4]})]})})]}),t.jsx(Qn,{className:"p-4 pt-0",children:t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>i==null?void 0:i(e),className:"w-full gap-2",children:[t.jsx(qs,{className:"w-4 h-4"}),"Подробнее"]})})]})}function G(e,r,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return r==null?void 0:r(a)}}function ra(e,r){const n=c.createContext(r),s=o=>{const{children:l,...i}=o,f=c.useMemo(()=>i,Object.values(i));return t.jsx(n.Provider,{value:f,children:l})};s.displayName=e+"Provider";function a(o){const l=c.useContext(n);if(l)return l;if(r!==void 0)return r;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function ce(e,r=[]){let n=[];function s(o,l){const i=c.createContext(l),f=n.length;n=[...n,l];const u=m=>{var b;const{scope:g,children:y,...C}=m,h=((b=g==null?void 0:g[e])==null?void 0:b[f])||i,p=c.useMemo(()=>C,Object.values(C));return t.jsx(h.Provider,{value:p,children:y})};u.displayName=o+"Provider";function d(m,g){var h;const y=((h=g==null?void 0:g[e])==null?void 0:h[f])||i,C=c.useContext(y);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[u,d]}const a=()=>{const o=n.map(l=>c.createContext(l));return function(i){const f=(i==null?void 0:i[e])||o;return c.useMemo(()=>({[`__scope${e}`]:{...i,[e]:f}}),[i,f])}};return a.scopeName=e,[s,sa(a,...r)]}function sa(...e){const r=e[0];if(e.length===1)return r;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((i,{useScope:f,scopeName:u})=>{const m=f(o)[`__scope${u}`];return{...i,...m}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return n.scopeName=r.scopeName,n}var be=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},na=ar[" useId ".trim().toString()]||(()=>{}),aa=0;function pe(e){const[r,n]=c.useState(na());return be(()=>{e||n(s=>s??String(aa++))},[e]),e||(r?`radix-${r}`:"")}var oa=ar[" useInsertionEffect ".trim().toString()]||be;function ze({prop:e,defaultProp:r,onChange:n=()=>{},caller:s}){const[a,o,l]=ia({defaultProp:r,onChange:n}),i=e!==void 0,f=i?e:a;{const d=c.useRef(e!==void 0);c.useEffect(()=>{const m=d.current;m!==i&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,s])}const u=c.useCallback(d=>{var m;if(i){const g=la(d)?d(e):d;g!==e&&((m=l.current)==null||m.call(l,g))}else o(d)},[i,e,o,l]);return[f,u]}function ia({defaultProp:e,onChange:r}){const[n,s]=c.useState(e),a=c.useRef(n),o=c.useRef(r);return oa(()=>{o.current=r},[r]),c.useEffect(()=>{var l;a.current!==n&&((l=o.current)==null||l.call(o,n),a.current=n)},[n,a]),[n,s,o]}function la(e){return typeof e=="function"}var ca=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$=ca.reduce((e,r)=>{const n=Ae(`Primitive.${r}`),s=c.forwardRef((a,o)=>{const{asChild:l,...i}=a,f=l?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(f,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{});function da(e,r){e&&nr.flushSync(()=>e.dispatchEvent(r))}function ye(e){const r=c.useRef(e);return c.useEffect(()=>{r.current=e}),c.useMemo(()=>(...n)=>{var s;return(s=r.current)==null?void 0:s.call(r,...n)},[])}function ua(e,r=globalThis==null?void 0:globalThis.document){const n=ye(e);c.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return r.addEventListener("keydown",s,{capture:!0}),()=>r.removeEventListener("keydown",s,{capture:!0})},[n,r])}var fa="DismissableLayer",lt="dismissableLayer.update",ma="dismissableLayer.pointerDownOutside",ha="dismissableLayer.focusOutside",Ft,Nr=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wr=c.forwardRef((e,r)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:i,...f}=e,u=c.useContext(Nr),[d,m]=c.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=c.useState({}),C=q(r,v=>m(v)),h=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=h.indexOf(p),N=d?h.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,w=N>=b,R=xa(v=>{const E=v.target,j=[...u.branches].some(I=>I.contains(E));!w||j||(a==null||a(v),l==null||l(v),v.defaultPrevented||i==null||i())},g),x=va(v=>{const E=v.target;[...u.branches].some(I=>I.contains(E))||(o==null||o(v),l==null||l(v),v.defaultPrevented||i==null||i())},g);return ua(v=>{N===u.layers.size-1&&(s==null||s(v),!v.defaultPrevented&&i&&(v.preventDefault(),i()))},g),c.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ft=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),$t(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Ft)}},[d,g,n,u]),c.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),$t())},[d,u]),c.useEffect(()=>{const v=()=>y({});return document.addEventListener(lt,v),()=>document.removeEventListener(lt,v)},[]),t.jsx($.div,{...f,ref:C,style:{pointerEvents:S?w?"auto":"none":void 0,...e.style},onFocusCapture:G(e.onFocusCapture,x.onFocusCapture),onBlurCapture:G(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:G(e.onPointerDownCapture,R.onPointerDownCapture)})});wr.displayName=fa;var ga="DismissableLayerBranch",pa=c.forwardRef((e,r)=>{const n=c.useContext(Nr),s=c.useRef(null),a=q(r,s);return c.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),t.jsx($.div,{...e,ref:a})});pa.displayName=ga;function xa(e,r=globalThis==null?void 0:globalThis.document){const n=ye(e),s=c.useRef(!1),a=c.useRef(()=>{});return c.useEffect(()=>{const o=i=>{if(i.target&&!s.current){let f=function(){Cr(ma,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=f,r.addEventListener("click",a.current,{once:!0})):f()}else r.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{r.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",o),r.removeEventListener("click",a.current)}},[r,n]),{onPointerDownCapture:()=>s.current=!0}}function va(e,r=globalThis==null?void 0:globalThis.document){const n=ye(e),s=c.useRef(!1);return c.useEffect(()=>{const a=o=>{o.target&&!s.current&&Cr(ha,n,{originalEvent:o},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function $t(){const e=new CustomEvent(lt);document.dispatchEvent(e)}function Cr(e,r,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});r&&a.addEventListener(e,r,{once:!0}),s?da(a,o):a.dispatchEvent(o)}var Ye="focusScope.autoFocusOnMount",Xe="focusScope.autoFocusOnUnmount",zt={bubbles:!1,cancelable:!0},ba="FocusScope",Sr=c.forwardRef((e,r)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[i,f]=c.useState(null),u=ye(a),d=ye(o),m=c.useRef(null),g=q(r,h=>f(h)),y=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(s){let h=function(S){if(y.paused||!i)return;const w=S.target;i.contains(w)?m.current=w:ae(m.current,{select:!0})},p=function(S){if(y.paused||!i)return;const w=S.relatedTarget;w!==null&&(i.contains(w)||ae(m.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&ae(i)};document.addEventListener("focusin",h),document.addEventListener("focusout",p);const N=new MutationObserver(b);return i&&N.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",p),N.disconnect()}}},[s,i,y.paused]),c.useEffect(()=>{if(i){Ut.add(y);const h=document.activeElement;if(!i.contains(h)){const b=new CustomEvent(Ye,zt);i.addEventListener(Ye,u),i.dispatchEvent(b),b.defaultPrevented||(ya(Sa(Er(i)),{select:!0}),document.activeElement===h&&ae(i))}return()=>{i.removeEventListener(Ye,u),setTimeout(()=>{const b=new CustomEvent(Xe,zt);i.addEventListener(Xe,d),i.dispatchEvent(b),b.defaultPrevented||ae(h??document.body,{select:!0}),i.removeEventListener(Xe,d),Ut.remove(y)},0)}}},[i,u,d,y]);const C=c.useCallback(h=>{if(!n&&!s||y.paused)return;const p=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,b=document.activeElement;if(p&&b){const N=h.currentTarget,[S,w]=ja(N);S&&w?!h.shiftKey&&b===w?(h.preventDefault(),n&&ae(S,{select:!0})):h.shiftKey&&b===S&&(h.preventDefault(),n&&ae(w,{select:!0})):b===N&&h.preventDefault()}},[n,s,y.paused]);return t.jsx($.div,{tabIndex:-1,...l,ref:g,onKeyDown:C})});Sr.displayName=ba;function ya(e,{select:r=!1}={}){const n=document.activeElement;for(const s of e)if(ae(s,{select:r}),document.activeElement!==n)return}function ja(e){const r=Er(e),n=Bt(r,e),s=Bt(r.reverse(),e);return[n,s]}function Er(e){const r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)r.push(n.currentNode);return r}function Bt(e,r){for(const n of e)if(!Na(n,{upTo:r}))return n}function Na(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wa(e){return e instanceof HTMLInputElement&&"select"in e}function ae(e,{select:r=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&wa(e)&&r&&e.select()}}var Ut=Ca();function Ca(){let e=[];return{add(r){const n=e[0];r!==n&&(n==null||n.pause()),e=Gt(e,r),e.unshift(r)},remove(r){var n;e=Gt(e,r),(n=e[0])==null||n.resume()}}}function Gt(e,r){const n=[...e],s=n.indexOf(r);return s!==-1&&n.splice(s,1),n}function Sa(e){return e.filter(r=>r.tagName!=="A")}var Ea="Portal",Ar=c.forwardRef((e,r)=>{var i;const{container:n,...s}=e,[a,o]=c.useState(!1);be(()=>o(!0),[]);const l=n||a&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return l?Vs.createPortal(t.jsx($.div,{...s,ref:r}),l):null});Ar.displayName=Ea;function Aa(e,r){return c.useReducer((n,s)=>r[n][s]??n,e)}var Ne=e=>{const{present:r,children:n}=e,s=Ia(r),a=typeof n=="function"?n({present:s.isPresent}):c.Children.only(n),o=q(s.ref,ka(a));return typeof n=="function"||s.isPresent?c.cloneElement(a,{ref:o}):null};Ne.displayName="Presence";function Ia(e){const[r,n]=c.useState(),s=c.useRef(null),a=c.useRef(e),o=c.useRef("none"),l=e?"mounted":"unmounted",[i,f]=Aa(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const u=ke(s.current);o.current=i==="mounted"?u:"none"},[i]),be(()=>{const u=s.current,d=a.current;if(d!==e){const g=o.current,y=ke(u);e?f("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?f("UNMOUNT"):f(d&&g!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),be(()=>{if(r){let u;const d=r.ownerDocument.defaultView??window,m=y=>{const h=ke(s.current).includes(y.animationName);if(y.target===r&&h&&(f("ANIMATION_END"),!a.current)){const p=r.style.animationFillMode;r.style.animationFillMode="forwards",u=d.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=p)})}},g=y=>{y.target===r&&(o.current=ke(s.current))};return r.addEventListener("animationstart",g),r.addEventListener("animationcancel",m),r.addEventListener("animationend",m),()=>{d.clearTimeout(u),r.removeEventListener("animationstart",g),r.removeEventListener("animationcancel",m),r.removeEventListener("animationend",m)}}else f("ANIMATION_END")},[r,f]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:c.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function ke(e){return(e==null?void 0:e.animationName)||"none"}function ka(e){var s,a;let r=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ze=0;function Ra(){c.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Wt()),document.body.insertAdjacentElement("beforeend",e[1]??Wt()),Ze++,()=>{Ze===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ze--}},[])}function Wt(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Y=function(){return Y=Object.assign||function(r){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Y.apply(this,arguments)};function Ir(e,r){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function Ta(e,r,n){if(n||arguments.length===2)for(var s=0,a=r.length,o;s<a;s++)(o||!(s in r))&&(o||(o=Array.prototype.slice.call(r,0,s)),o[s]=r[s]);return e.concat(o||Array.prototype.slice.call(r))}var Oe="right-scroll-bar-position",_e="width-before-scroll-bar",Pa="with-scroll-bars-hidden",Da="--removed-body-scroll-bar-size";function Je(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function Oa(e,r){var n=c.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=r,n.facade}var _a=typeof window<"u"?c.useLayoutEffect:c.useEffect,Vt=new WeakMap;function Ma(e,r){var n=Oa(r||null,function(s){return e.forEach(function(a){return Je(a,s)})});return _a(function(){var s=Vt.get(n);if(s){var a=new Set(s),o=new Set(e),l=n.current;a.forEach(function(i){o.has(i)||Je(i,null)}),o.forEach(function(i){a.has(i)||Je(i,l)})}Vt.set(n,e)},[e]),n}function La(e){return e}function Fa(e,r){r===void 0&&(r=La);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=r(o,s);return n.push(l),function(){n=n.filter(function(i){return i!==l})}},assignSyncMedium:function(o){for(s=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){s=!0;var l=[];if(n.length){var i=n;n=[],i.forEach(o),l=n}var f=function(){var d=l;l=[],d.forEach(o)},u=function(){return Promise.resolve().then(f)};u(),n={push:function(d){l.push(d),u()},filter:function(d){return l=l.filter(d),n}}}};return a}function $a(e){e===void 0&&(e={});var r=Fa(null);return r.options=Y({async:!0,ssr:!1},e),r}var kr=function(e){var r=e.sideCar,n=Ir(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=r.read();if(!s)throw new Error("Sidecar medium not found");return c.createElement(s,Y({},n))};kr.isSideCarExport=!0;function za(e,r){return e.useMedium(r),kr}var Rr=$a(),Qe=function(){},Be=c.forwardRef(function(e,r){var n=c.useRef(null),s=c.useState({onScrollCapture:Qe,onWheelCapture:Qe,onTouchMoveCapture:Qe}),a=s[0],o=s[1],l=e.forwardProps,i=e.children,f=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,g=e.sideCar,y=e.noRelative,C=e.noIsolation,h=e.inert,p=e.allowPinchZoom,b=e.as,N=b===void 0?"div":b,S=e.gapMode,w=Ir(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=g,x=Ma([n,r]),v=Y(Y({},w),a);return c.createElement(c.Fragment,null,d&&c.createElement(R,{sideCar:Rr,removeScrollBar:u,shards:m,noRelative:y,noIsolation:C,inert:h,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:S}),l?c.cloneElement(c.Children.only(i),Y(Y({},v),{ref:x})):c.createElement(N,Y({},v,{className:f,ref:x}),i))});Be.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Be.classNames={fullWidth:_e,zeroRight:Oe};var qt,Ba=function(){if(qt)return qt;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ua(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=Ba();return r&&e.setAttribute("nonce",r),e}function Ga(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function Wa(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var Va=function(){var e=0,r=null;return{add:function(n){e==0&&(r=Ua())&&(Ga(r,n),Wa(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},qa=function(){var e=Va();return function(r,n){c.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&n])}},Tr=function(){var e=qa(),r=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return r},Ka={left:0,top:0,right:0,gap:0},et=function(e){return parseInt(e||"",10)||0},Ha=function(e){var r=window.getComputedStyle(document.body),n=r[e==="padding"?"paddingLeft":"marginLeft"],s=r[e==="padding"?"paddingTop":"marginTop"],a=r[e==="padding"?"paddingRight":"marginRight"];return[et(n),et(s),et(a)]},Ya=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ka;var r=Ha(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,s-n+r[2]-r[0])}},Xa=Tr(),xe="data-scroll-locked",Za=function(e,r,n,s){var a=e.left,o=e.top,l=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Pa,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(i,"px ").concat(s,`;
  }
  body[`).concat(xe,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oe,` {
    right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(_e,` {
    margin-right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(Oe," .").concat(Oe,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(_e," .").concat(_e,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(xe,`] {
    `).concat(Da,": ").concat(i,`px;
  }
`)},Kt=function(){var e=parseInt(document.body.getAttribute(xe)||"0",10);return isFinite(e)?e:0},Ja=function(){c.useEffect(function(){return document.body.setAttribute(xe,(Kt()+1).toString()),function(){var e=Kt()-1;e<=0?document.body.removeAttribute(xe):document.body.setAttribute(xe,e.toString())}},[])},Qa=function(e){var r=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;Ja();var o=c.useMemo(function(){return Ya(a)},[a]);return c.createElement(Xa,{styles:Za(o,!r,a,n?"":"!important")})},ct=!1;if(typeof window<"u")try{var Re=Object.defineProperty({},"passive",{get:function(){return ct=!0,!0}});window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch{ct=!1}var ue=ct?{passive:!1}:!1,eo=function(e){return e.tagName==="TEXTAREA"},Pr=function(e,r){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[r]!=="hidden"&&!(n.overflowY===n.overflowX&&!eo(e)&&n[r]==="visible")},to=function(e){return Pr(e,"overflowY")},ro=function(e){return Pr(e,"overflowX")},Ht=function(e,r){var n=r.ownerDocument,s=r;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=Dr(e,s);if(a){var o=Or(e,s),l=o[1],i=o[2];if(l>i)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},so=function(e){var r=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[r,n,s]},no=function(e){var r=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[r,n,s]},Dr=function(e,r){return e==="v"?to(r):ro(r)},Or=function(e,r){return e==="v"?so(r):no(r)},ao=function(e,r){return e==="h"&&r==="rtl"?-1:1},oo=function(e,r,n,s,a){var o=ao(e,window.getComputedStyle(r).direction),l=o*s,i=n.target,f=r.contains(i),u=!1,d=l>0,m=0,g=0;do{if(!i)break;var y=Or(e,i),C=y[0],h=y[1],p=y[2],b=h-p-o*C;(C||b)&&Dr(e,i)&&(m+=b,g+=C);var N=i.parentNode;i=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!f&&i!==document.body||f&&(r.contains(i)||r===i));return(d&&(a&&Math.abs(m)<1||!a&&l>m)||!d&&(a&&Math.abs(g)<1||!a&&-l>g))&&(u=!0),u},Te=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Yt=function(e){return[e.deltaX,e.deltaY]},Xt=function(e){return e&&"current"in e?e.current:e},io=function(e,r){return e[0]===r[0]&&e[1]===r[1]},lo=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},co=0,fe=[];function uo(e){var r=c.useRef([]),n=c.useRef([0,0]),s=c.useRef(),a=c.useState(co++)[0],o=c.useState(Tr)[0],l=c.useRef(e);c.useEffect(function(){l.current=e},[e]),c.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var h=Ta([e.lockRef.current],(e.shards||[]).map(Xt),!0).filter(Boolean);return h.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),h.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=c.useCallback(function(h,p){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!l.current.allowPinchZoom;var b=Te(h),N=n.current,S="deltaX"in h?h.deltaX:N[0]-b[0],w="deltaY"in h?h.deltaY:N[1]-b[1],R,x=h.target,v=Math.abs(S)>Math.abs(w)?"h":"v";if("touches"in h&&v==="h"&&x.type==="range")return!1;var E=Ht(v,x);if(!E)return!0;if(E?R=v:(R=v==="v"?"h":"v",E=Ht(v,x)),!E)return!1;if(!s.current&&"changedTouches"in h&&(S||w)&&(s.current=R),!R)return!0;var j=s.current||R;return oo(j,p,h,j==="h"?S:w,!0)},[]),f=c.useCallback(function(h){var p=h;if(!(!fe.length||fe[fe.length-1]!==o)){var b="deltaY"in p?Yt(p):Te(p),N=r.current.filter(function(R){return R.name===p.type&&(R.target===p.target||p.target===R.shadowParent)&&io(R.delta,b)})[0];if(N&&N.should){p.cancelable&&p.preventDefault();return}if(!N){var S=(l.current.shards||[]).map(Xt).filter(Boolean).filter(function(R){return R.contains(p.target)}),w=S.length>0?i(p,S[0]):!l.current.noIsolation;w&&p.cancelable&&p.preventDefault()}}},[]),u=c.useCallback(function(h,p,b,N){var S={name:h,delta:p,target:b,should:N,shadowParent:fo(b)};r.current.push(S),setTimeout(function(){r.current=r.current.filter(function(w){return w!==S})},1)},[]),d=c.useCallback(function(h){n.current=Te(h),s.current=void 0},[]),m=c.useCallback(function(h){u(h.type,Yt(h),h.target,i(h,e.lockRef.current))},[]),g=c.useCallback(function(h){u(h.type,Te(h),h.target,i(h,e.lockRef.current))},[]);c.useEffect(function(){return fe.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",f,ue),document.addEventListener("touchmove",f,ue),document.addEventListener("touchstart",d,ue),function(){fe=fe.filter(function(h){return h!==o}),document.removeEventListener("wheel",f,ue),document.removeEventListener("touchmove",f,ue),document.removeEventListener("touchstart",d,ue)}},[]);var y=e.removeScrollBar,C=e.inert;return c.createElement(c.Fragment,null,C?c.createElement(o,{styles:lo(a)}):null,y?c.createElement(Qa,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function fo(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const mo=za(Rr,uo);var _r=c.forwardRef(function(e,r){return c.createElement(Be,Y({},e,{ref:r,sideCar:mo}))});_r.classNames=Be.classNames;const ho=_r;var go=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},me=new WeakMap,Pe=new WeakMap,De={},tt=0,Mr=function(e){return e&&(e.host||Mr(e.parentNode))},po=function(e,r){return r.map(function(n){if(e.contains(n))return n;var s=Mr(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},xo=function(e,r,n,s){var a=po(r,Array.isArray(e)?e:[e]);De[n]||(De[n]=new WeakMap);var o=De[n],l=[],i=new Set,f=new Set(a),u=function(m){!m||i.has(m)||(i.add(m),u(m.parentNode))};a.forEach(u);var d=function(m){!m||f.has(m)||Array.prototype.forEach.call(m.children,function(g){if(i.has(g))d(g);else try{var y=g.getAttribute(s),C=y!==null&&y!=="false",h=(me.get(g)||0)+1,p=(o.get(g)||0)+1;me.set(g,h),o.set(g,p),l.push(g),h===1&&C&&Pe.set(g,!0),p===1&&g.setAttribute(n,"true"),C||g.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",g,b)}})};return d(r),i.clear(),tt++,function(){l.forEach(function(m){var g=me.get(m)-1,y=o.get(m)-1;me.set(m,g),o.set(m,y),g||(Pe.has(m)||m.removeAttribute(s),Pe.delete(m)),y||m.removeAttribute(n)}),tt--,tt||(me=new WeakMap,me=new WeakMap,Pe=new WeakMap,De={})}},vo=function(e,r,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=r||go(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),xo(s,a,n,"aria-hidden")):function(){return null}},Ue="Dialog",[Lr,Fr]=ce(Ue),[bo,H]=Lr(Ue),$r=e=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,i=c.useRef(null),f=c.useRef(null),[u,d]=ze({prop:s,defaultProp:a??!1,onChange:o,caller:Ue});return t.jsx(bo,{scope:r,triggerRef:i,contentRef:f,contentId:pe(),titleId:pe(),descriptionId:pe(),open:u,onOpenChange:d,onOpenToggle:c.useCallback(()=>d(m=>!m),[d]),modal:l,children:n})};$r.displayName=Ue;var zr="DialogTrigger",Br=c.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=H(zr,n),o=q(r,a.triggerRef);return t.jsx($.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":bt(a.open),...s,ref:o,onClick:G(e.onClick,a.onOpenToggle)})});Br.displayName=zr;var xt="DialogPortal",[yo,Ur]=Lr(xt,{forceMount:void 0}),Gr=e=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=e,o=H(xt,r);return t.jsx(yo,{scope:r,forceMount:n,children:c.Children.map(s,l=>t.jsx(Ne,{present:n||o.open,children:t.jsx(Ar,{asChild:!0,container:a,children:l})}))})};Gr.displayName=xt;var Le="DialogOverlay",Wr=c.forwardRef((e,r)=>{const n=Ur(Le,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=H(Le,e.__scopeDialog);return o.modal?t.jsx(Ne,{present:s||o.open,children:t.jsx(No,{...a,ref:r})}):null});Wr.displayName=Le;var jo=Ae("DialogOverlay.RemoveScroll"),No=c.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=H(Le,n);return t.jsx(ho,{as:jo,allowPinchZoom:!0,shards:[a.contentRef],children:t.jsx($.div,{"data-state":bt(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),oe="DialogContent",Vr=c.forwardRef((e,r)=>{const n=Ur(oe,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=H(oe,e.__scopeDialog);return t.jsx(Ne,{present:s||o.open,children:o.modal?t.jsx(wo,{...a,ref:r}):t.jsx(Co,{...a,ref:r})})});Vr.displayName=oe;var wo=c.forwardRef((e,r)=>{const n=H(oe,e.__scopeDialog),s=c.useRef(null),a=q(r,n.contentRef,s);return c.useEffect(()=>{const o=s.current;if(o)return vo(o)},[]),t.jsx(qr,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:G(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:G(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&o.preventDefault()}),onFocusOutside:G(e.onFocusOutside,o=>o.preventDefault())})}),Co=c.forwardRef((e,r)=>{const n=H(oe,e.__scopeDialog),s=c.useRef(!1),a=c.useRef(!1);return t.jsx(qr,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,i;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(s.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,u;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),qr=c.forwardRef((e,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=e,i=H(oe,n),f=c.useRef(null),u=q(r,f);return Ra(),t.jsxs(t.Fragment,{children:[t.jsx(Sr,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:t.jsx(wr,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":bt(i.open),...l,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Eo,{titleId:i.titleId}),t.jsx(Io,{contentRef:f,descriptionId:i.descriptionId})]})]})}),vt="DialogTitle",Kr=c.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=H(vt,n);return t.jsx($.h2,{id:a.titleId,...s,ref:r})});Kr.displayName=vt;var Hr="DialogDescription",Yr=c.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=H(Hr,n);return t.jsx($.p,{id:a.descriptionId,...s,ref:r})});Yr.displayName=Hr;var Xr="DialogClose",Zr=c.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=H(Xr,n);return t.jsx($.button,{type:"button",...s,ref:r,onClick:G(e.onClick,()=>a.onOpenChange(!1))})});Zr.displayName=Xr;function bt(e){return e?"open":"closed"}var Jr="DialogTitleWarning",[So,Qr]=ra(Jr,{contentName:oe,titleName:vt,docsSlug:"dialog"}),Eo=({titleId:e})=>{const r=Qr(Jr),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Ao="DialogDescriptionWarning",Io=({contentRef:e,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Qr(Ao).contentName}}.`;return c.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,e,r]),null},es=$r,ko=Br,ts=Gr,rs=Wr,ss=Vr,Ro=Kr,To=Yr,Ge=Zr;function Po({...e}){return t.jsx(es,{"data-slot":"dialog",...e})}function Do({...e}){return t.jsx(ts,{"data-slot":"dialog-portal",...e})}function Oo({...e}){return t.jsx(Ge,{"data-slot":"dialog-close",...e})}function _o({className:e,...r}){return t.jsx(rs,{"data-slot":"dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function Mo({className:e,children:r,...n}){return t.jsxs(Do,{"data-slot":"dialog-portal",children:[t.jsx(_o,{}),t.jsxs(ss,{"data-slot":"dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[r,t.jsxs(Ge,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(W,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Lo({photos:e,itemTitle:r}){const[n,s]=c.useState(null);if(!e||e.length===0)return null;const a=u=>{s(u)},o=()=>{s(null)},l=()=>{n!==null&&s((n+1)%e.length)},i=()=>{n!==null&&s(n===0?e.length-1:n-1)},f=u=>{n!==null&&(u.key==="ArrowLeft"?i():u.key==="ArrowRight"?l():u.key==="Escape"&&o())};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Фотографии (",e.length,")"]}),e.length===1?t.jsxs("div",{className:"relative w-full aspect-[4/3] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(0),children:[t.jsx(Q,{src:e[0],alt:`${r} - фото 1`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:t.jsx("div",{className:"bg-black/50 text-white px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Увеличить"})})]}):e.length===2?t.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map((u,d)=>t.jsxs("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(d),children:[t.jsx(Q,{src:u,alt:`${r} - фото ${d+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},d))}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.slice(0,6).map((u,d)=>t.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(d),children:[t.jsx(Q,{src:u,alt:`${r} - фото ${d+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),d===5&&e.length>6&&t.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:t.jsxs("span",{className:"text-white text-lg font-semibold",children:["+",e.length-6]})}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},d))})]}),t.jsx(Po,{open:n!==null,onOpenChange:u=>!u&&o(),children:t.jsx(Mo,{className:"max-w-[95vw] max-h-[95vh] p-0 border-0 bg-black/90",onKeyDown:f,children:t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[t.jsx(Oo,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20",children:t.jsx(W,{className:"w-4 h-4"})})}),e.length>1&&n!==null&&t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20",onClick:i,children:t.jsx(ut,{className:"w-6 h-6"})}),t.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20",onClick:l,children:t.jsx(or,{className:"w-6 h-6"})})]}),n!==null&&t.jsxs("div",{className:"relative max-w-full max-h-full",children:[t.jsx(Q,{src:e[n],alt:`${r} - фото ${n+1}`,className:"max-w-full max-h-[90vh] object-contain"}),t.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded text-sm",children:[n+1," из ",e.length]})]})]})})})]})}function Fo({item:e,onBack:r,onTagClick:n,onCategoryClick:s,allItems:a,onItemClick:o}){const l=a.filter(i=>i.id!==e.id&&i.category===e.category).slice(0,3);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(T,{variant:"outline",onClick:r,className:"gap-2",children:[t.jsx(Me,{className:"w-4 h-4"}),"Назад к коллекции"]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(Lo,{photos:e.photos,itemTitle:e.title}),t.jsx("div",{className:"flex justify-start",children:t.jsx(_,{variant:"secondary",className:"cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>{s(e.category),r()},children:e.category})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ft,{className:"w-5 h-5 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Год"}),t.jsx("p",{className:"font-medium",children:e.year})]})]})}),e.condition&&t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ks,{className:"w-5 h-5 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Состояние"}),t.jsx("p",{className:"font-medium text-sm",children:e.condition})]})]})}),e.value&&t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Hs,{className:"w-5 h-5 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Стоимость"}),t.jsx("p",{className:"font-medium text-sm",children:e.value})]})]})}),e.acquisition&&t.jsx(M,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ys,{className:"w-5 h-5 text-primary"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Приобретение"}),t.jsx("p",{className:"font-medium text-sm",children:e.acquisition})]})]})})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h1",{className:"text-3xl leading-tight",children:e.title}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"mb-2",children:"Краткое описание"}),t.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]}),e.fullDescription&&t.jsxs("div",{children:[t.jsx("h3",{className:"mb-2",children:"Подробное описание"}),t.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.fullDescription})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-medium",children:"Теги"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((i,f)=>t.jsx(_,{variant:"outline",className:"cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>{n(i),r()},children:i},f))})]})]})})]}),l.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{children:"Похожие предметы"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(i=>t.jsxs(M,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105",onClick:()=>o(i.id),children:[t.jsx(V,{className:"p-0",children:t.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-lg",children:[t.jsx(Q,{src:i.photos[0],alt:i.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(_,{variant:"secondary",className:"bg-white/90 text-primary cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:f=>{f.stopPropagation(),s(i.category),r()},children:i.category})})]})}),t.jsxs(z,{className:"p-4 space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:"line-clamp-2 leading-tight",children:i.title}),t.jsx("span",{className:"text-muted-foreground text-sm shrink-0",children:i.year})]}),t.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 leading-relaxed",children:i.description})]})]},i.id))})]})]})}const rt=5;function $o({items:e,blogPosts:r,onItemClick:n,onPostClick:s}){const[a,o]=c.useState(1),l=Math.ceil(r.length/rt),i=(a-1)*rt,f=r.slice(i,i+rt),u=m=>new Date(m).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),d=m=>e.filter(g=>m.includes(g.id));return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{children:"Блог коллекционера"}),t.jsx("p",{className:"text-muted-foreground",children:"Истории, размышления и экспертные мнения о мире коллекционирования"})]}),t.jsx("div",{className:"space-y-8",children:f.map(m=>{const g=d(m.relatedItems);return t.jsxs(M,{className:"overflow-hidden",children:[t.jsx(V,{className:"pb-4",children:t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"space-y-3 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ft,{className:"w-4 h-4"}),u(m.publishDate)]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ir,{className:"w-4 h-4"}),m.readTime," мин чтения"]}),t.jsx(_,{variant:"outline",className:"text-xs",children:m.category})]}),t.jsx("h2",{className:"text-2xl leading-tight",children:m.title}),t.jsx("p",{className:"text-muted-foreground leading-relaxed",children:m.excerpt})]})})}),t.jsxs(z,{className:"space-y-4",children:[g.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Связанные предметы:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(y=>t.jsxs("div",{className:"group cursor-pointer transition-all duration-200 hover:scale-105",onClick:()=>n(y.id),children:[t.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-lg",children:[t.jsx(Q,{src:y.photos[0],alt:y.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(_,{variant:"secondary",className:"bg-white/90 text-primary text-xs",children:y.category})})]}),t.jsxs("div",{className:"mt-2 space-y-1",children:[t.jsx("h5",{className:"text-sm font-medium line-clamp-1 group-hover:text-primary transition-colors",children:y.title}),t.jsx("p",{className:"text-xs text-muted-foreground",children:y.year})]})]},y.id))})]}),t.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:g.length>0&&`${g.length} связанных предмета`}),t.jsxs(T,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>s(m.id),children:["Читать полностью",t.jsx(Xs,{className:"w-4 h-4"})]})]})]})]},m.id)})}),l>1&&t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>o(m=>Math.max(1,m-1)),disabled:a===1,className:"gap-2",children:[t.jsx(ut,{className:"w-4 h-4"}),"Предыдущая"]}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:l},(m,g)=>g+1).map(m=>t.jsx(T,{variant:a===m?"default":"outline",size:"sm",onClick:()=>o(m),className:"w-8 h-8 p-0",children:m},m))}),t.jsxs(T,{variant:"outline",size:"sm",onClick:()=>o(m=>Math.min(l,m+1)),disabled:a===l,className:"gap-2",children:["Следующая",t.jsx(or,{className:"w-4 h-4"})]})]})]})}function zo({postId:e,items:r,blogPosts:n,onBack:s,onItemClick:a,onPostClick:o}){const l=n.find(d=>d.id===e);if(!l)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-muted-foreground",children:"Пост не найден"}),t.jsxs(T,{variant:"outline",onClick:s,className:"mt-4",children:[t.jsx(Me,{className:"w-4 h-4 mr-2"}),"Назад к блогу"]})]});const i=d=>r.filter(m=>d.includes(m.id)),f=d=>new Date(d).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),u=i(l.relatedItems);return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[t.jsxs(T,{variant:"ghost",onClick:s,className:"gap-2",children:[t.jsx(Me,{className:"w-4 h-4"}),"Назад к блогу"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(_,{variant:"secondary",children:l.category}),t.jsx("h1",{className:"text-4xl font-bold leading-tight",children:l.title}),t.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ft,{className:"w-4 h-4"}),t.jsx("span",{children:f(l.publishDate)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ir,{className:"w-4 h-4"}),t.jsxs("span",{children:[l.readTime," мин. чтения"]})]})]})]}),t.jsx(M,{children:t.jsx(z,{className:"prose prose-gray max-w-none pt-6",children:t.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:l.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})})}),u.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Связанные предметы"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(d=>t.jsxs(M,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>a(d.id),children:[t.jsx("div",{className:"aspect-square overflow-hidden rounded-t-lg",children:t.jsx(Q,{src:d.photos[0],alt:d.title,className:"w-full h-full object-cover"})}),t.jsxs(V,{className:"pb-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(_,{variant:"outline",children:d.category}),t.jsx("span",{className:"text-sm text-muted-foreground",children:d.year})]}),t.jsx("h3",{className:"font-semibold line-clamp-2",children:d.title})]}),t.jsxs(z,{className:"pt-0",children:[t.jsx("p",{className:"text-muted-foreground line-clamp-2 text-sm",children:d.description}),d.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[d.tags.slice(0,3).map(m=>t.jsx(_,{variant:"secondary",className:"text-xs",children:m},m)),d.tags.length>3&&t.jsxs(_,{variant:"secondary",className:"text-xs",children:["+",d.tags.length-3]})]})]})]},d.id))})]}),t.jsxs("div",{className:"flex justify-between items-center pt-8 border-t",children:[t.jsxs(T,{variant:"outline",onClick:s,className:"gap-2",children:[t.jsx(ut,{className:"w-4 h-4"}),"К списку постов"]}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-sm text-muted-foreground",children:"Понравился пост? Поделитесь им!"})}),t.jsx("div",{className:"w-32"})," "]})]})}function U({className:e,type:r,...n}){return t.jsx("input",{type:r,"data-slot":"input",className:D("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var Bo="Label",ns=c.forwardRef((e,r)=>t.jsx($.label,{...e,ref:r,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ns.displayName=Bo;var Uo=ns;function F({className:e,...r}){return t.jsx(Uo,{"data-slot":"label",className:D("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}var We="Collapsible",[Go,yl]=ce(We),[Wo,yt]=Go(We),as=c.forwardRef((e,r)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:l,...i}=e,[f,u]=ze({prop:s,defaultProp:a??!1,onChange:l,caller:We});return t.jsx(Wo,{scope:n,disabled:o,contentId:pe(),open:f,onOpenToggle:c.useCallback(()=>u(d=>!d),[u]),children:t.jsx($.div,{"data-state":Nt(f),"data-disabled":o?"":void 0,...i,ref:r})})});as.displayName=We;var os="CollapsibleTrigger",is=c.forwardRef((e,r)=>{const{__scopeCollapsible:n,...s}=e,a=yt(os,n);return t.jsx($.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Nt(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:r,onClick:G(e.onClick,a.onOpenToggle)})});is.displayName=os;var jt="CollapsibleContent",ls=c.forwardRef((e,r)=>{const{forceMount:n,...s}=e,a=yt(jt,e.__scopeCollapsible);return t.jsx(Ne,{present:n||a.open,children:({present:o})=>t.jsx(Vo,{...s,ref:r,present:o})})});ls.displayName=jt;var Vo=c.forwardRef((e,r)=>{const{__scopeCollapsible:n,present:s,children:a,...o}=e,l=yt(jt,n),[i,f]=c.useState(s),u=c.useRef(null),d=q(r,u),m=c.useRef(0),g=m.current,y=c.useRef(0),C=y.current,h=l.open||i,p=c.useRef(h),b=c.useRef(void 0);return c.useEffect(()=>{const N=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(N)},[]),be(()=>{const N=u.current;if(N){b.current=b.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const S=N.getBoundingClientRect();m.current=S.height,y.current=S.width,p.current||(N.style.transitionDuration=b.current.transitionDuration,N.style.animationName=b.current.animationName),f(s)}},[l.open,s]),t.jsx($.div,{"data-state":Nt(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!h,...o,ref:d,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...e.style},children:h&&a})});function Nt(e){return e?"open":"closed"}var qo=as;function Zt({...e}){return t.jsx(qo,{"data-slot":"collapsible",...e})}function Ko({...e}){return t.jsx(is,{"data-slot":"collapsible-trigger",...e})}function Ho({...e}){return t.jsx(ls,{"data-slot":"collapsible-content",...e})}function Yo({onSearch:e,availableTags:r,availableCategories:n,initialFilters:s}){var w,R;const[a,o]=c.useState((s==null?void 0:s.title)||""),[l,i]=c.useState(((w=s==null?void 0:s.yearFrom)==null?void 0:w.toString())||""),[f,u]=c.useState(((R=s==null?void 0:s.yearTo)==null?void 0:R.toString())||""),[d,m]=c.useState((s==null?void 0:s.tags)||[]),[g,y]=c.useState((s==null?void 0:s.category)||""),[C,h]=c.useState(!1);c.useEffect(()=>{var x,v;s&&(o(s.title||""),i(((x=s.yearFrom)==null?void 0:x.toString())||""),u(((v=s.yearTo)==null?void 0:v.toString())||""),m(s.tags||[]),y(s.category||""),(s.tags&&s.tags.length>0||s.category)&&h(!0))},[s]);const p=()=>{e({title:a,yearFrom:l?parseInt(l):null,yearTo:f?parseInt(f):null,tags:d,category:g})},b=x=>{m(v=>v.includes(x)?v.filter(E=>E!==x):[...v,x])},N=()=>{o(""),i(""),u(""),m([]),y(""),e({title:"",yearFrom:null,yearTo:null,tags:[],category:""})},S=a||l||f||d.length>0||g;return t.jsx(M,{className:"w-full",children:t.jsxs(z,{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(It,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(U,{placeholder:"Search by title...",value:a,onChange:x=>o(x.target.value),className:"pl-10",onKeyPress:x=>x.key==="Enter"&&p()})]}),t.jsx(Zt,{open:C,onOpenChange:h,children:t.jsx(Ko,{asChild:!0,children:t.jsxs(T,{variant:"outline",className:"gap-2",children:[t.jsx(Zs,{className:"w-4 h-4"}),"Filters",S&&t.jsx(_,{variant:"secondary",className:"ml-1 px-1.5 py-0.5 text-xs",children:[a&&"title",l&&"year",d.length&&"tags",g&&"category"].filter(Boolean).length})]})})}),t.jsxs(T,{onClick:p,className:"gap-2",children:[t.jsx(It,{className:"w-4 h-4"}),"Search"]}),S&&t.jsxs(T,{variant:"outline",onClick:N,className:"gap-2",children:[t.jsx(W,{className:"w-4 h-4"}),"Clear"]})]}),t.jsx(Zt,{open:C,onOpenChange:h,children:t.jsxs(Ho,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"year-from",children:"Year From"}),t.jsx(U,{id:"year-from",type:"number",placeholder:"1900",value:l,onChange:x=>i(x.target.value),min:"1800",max:"2030"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"year-to",children:"Year To"}),t.jsx(U,{id:"year-to",type:"number",placeholder:"2030",value:f,onChange:x=>u(x.target.value),min:"1800",max:"2030"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Filter by Category"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(x=>t.jsxs(T,{variant:g===x?"default":"outline",size:"sm",onClick:()=>y(g===x?"":x),className:"h-auto py-1 px-3 text-sm transition-all duration-200 hover:scale-105 active:scale-95 active:transition-none",children:[x,g===x&&t.jsx(W,{className:"w-3 h-3 ml-1"})]},x))}),g&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Selected Category:"}),t.jsxs(_,{variant:"secondary",className:"gap-1",children:[g,t.jsx("button",{onClick:()=>y(""),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:t.jsx(W,{className:"w-3 h-3"})})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Filter by Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(x=>t.jsxs(T,{variant:d.includes(x)?"default":"outline",size:"sm",onClick:()=>b(x),className:"h-auto py-1 px-3 text-sm transition-all duration-200 hover:scale-105 active:scale-95 active:transition-none",children:[x,d.includes(x)&&t.jsx(W,{className:"w-3 h-3 ml-1"})]},x))})]}),d.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Selected Tags:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(x=>t.jsxs(_,{variant:"secondary",className:"gap-1",children:[x,t.jsx("button",{onClick:()=>b(x),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:t.jsx(W,{className:"w-3 h-3"})})]},x))})]})]})})]})})}const Xo="https://collepto.3451881.workers.dev/api";class Zo{constructor(r){Ke(this,"baseUrl");Ke(this,"sessionToken",null);this.baseUrl=r,this.sessionToken=localStorage.getItem("collepto_session")}async request(r,n={}){const s={...n,headers:{"Content-Type":"application/json",...n.headers}};this.sessionToken&&(s.headers={...s.headers,Authorization:`Bearer ${this.sessionToken}`});try{const a=await fetch(`${this.baseUrl}${r}`,s),o=await a.json();if(!a.ok)throw new Error(o.error||`HTTP ${a.status}`);return o}catch(a){return console.error("API request failed:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async login(r,n){const s=btoa(`${r}:${n}`),a=await this.request("/auth/login",{method:"POST",headers:{Authorization:`Basic ${s}`}});return a.success&&a.data&&(this.sessionToken=a.data.sessionId,localStorage.setItem("collepto_session",this.sessionToken)),a}async logout(){const r=await this.request("/auth/logout",{method:"POST"});return this.sessionToken=null,localStorage.removeItem("collepto_session"),r}async checkAuthStatus(){return this.request("/auth/status")}async getItems(){return this.request("/items")}async getItem(r){return this.request(`/items/${r}`)}async searchItems(r){const n=new URLSearchParams;return r.q&&n.append("q",r.q),r.category&&n.append("category",r.category),r.yearFrom&&n.append("yearFrom",r.yearFrom.toString()),r.yearTo&&n.append("yearTo",r.yearTo.toString()),r.tags&&r.tags.length>0&&n.append("tags",r.tags.join(",")),this.request(`/items/search?${n.toString()}`)}async getBlogPosts(){return this.request("/blog")}async getBlogPost(r){return this.request(`/blog/${r}`)}async createItem(r){return this.request("/admin/items",{method:"POST",body:JSON.stringify(r)})}async updateItem(r,n){return this.request(`/admin/items/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteItem(r){return this.request(`/admin/items/${r}`,{method:"DELETE"})}async createBlogPost(r){return this.request("/admin/blog",{method:"POST",body:JSON.stringify(r)})}async updateBlogPost(r,n){return this.request(`/admin/blog/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteBlogPost(r){return this.request(`/admin/blog/${r}`,{method:"DELETE"})}async publishBlogPost(r,n){return this.request(`/admin/blog/${r}/publish`,{method:"POST",body:JSON.stringify({published:n})})}async uploadPhoto(r,n){const s=new FormData;s.append("photo",n);const a={method:"POST",body:s};this.sessionToken&&(a.headers={Authorization:`Bearer ${this.sessionToken}`});try{const o=await fetch(`${this.baseUrl}/admin/photos/item/${r}/upload`,a),l=await o.json();if(!o.ok)throw new Error(l.error||`HTTP ${o.status}`);return l}catch(o){return console.error("Photo upload failed:",o),{success:!1,error:o instanceof Error?o.message:"Upload failed"}}}async deletePhoto(r){return this.request(`/admin/photos/${r}`,{method:"DELETE"})}async exportData(){return this.request("/admin/export")}async downloadExport(){if(!this.sessionToken)throw new Error("Authentication required");const r=await fetch(`${this.baseUrl}/admin/export/download`,{headers:{Authorization:`Bearer ${this.sessionToken}`}});if(!r.ok)throw new Error("Export download failed");const n=await r.blob(),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`collepto_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}isAuthenticated(){return!!this.sessionToken}clearSession(){this.sessionToken=null,localStorage.removeItem("collepto_session")}}const L=new Zo(Xo);function Jo(){const[e,r]=c.useState("collection"),[n,s]=c.useState(null),[a,o]=c.useState(null),[l,i]=c.useState([]),[f,u]=c.useState([]),[d,m]=c.useState([]),[g,y]=c.useState(!0),[C,h]=c.useState(null),[p,b]=c.useState({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),N=()=>{const A=l.flatMap(k=>k.tags);return[...new Set(A)].sort()},S=()=>{const A=l.map(k=>k.category).filter(Boolean);return[...new Set(A)].sort()};c.useEffect(()=>{(async()=>{y(!0),h(null);try{const[k,B]=await Promise.all([L.getItems(),L.getBlogPosts()]);if(!k.success)throw new Error(k.error||"Failed to load items");if(!B.success)throw new Error(B.error||"Failed to load blog posts");const te=k.data||[],de=B.data||[];i(te),u(te),m(de)}catch(k){console.error("Failed to load data:",k),h(k instanceof Error?k.message:"Failed to load data")}finally{y(!1)}})()},[]);const w=async A=>{const k={...A,category:A.category||""};b(k);try{if(A.title||A.category||A.yearFrom||A.yearTo||A.tags.length>0){const B=await L.searchItems({q:A.title||void 0,category:A.category||void 0,yearFrom:A.yearFrom||void 0,yearTo:A.yearTo||void 0,tags:A.tags.length>0?A.tags:void 0});B.success&&B.data?u(B.data):(console.error("Search failed:",B.error),u([]))}else u(l)}catch(B){console.error("Search error:",B),u([])}},R=()=>{b({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),u(l)},x=A=>{s(A),r("item")},v=A=>{o(A),r("post")},E=A=>{const k={...p,tags:[A]};w(k)},j=A=>{const k={...p,category:A};w(k)},I=()=>{window.location.href="/admin"};return g?t.jsx(Ee,{defaultTheme:"light",storageKey:"collepto-theme",children:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading collection..."})]})})}):C?t.jsx(Ee,{defaultTheme:"light",storageKey:"collepto-theme",children:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",C]}),t.jsx(T,{onClick:()=>window.location.reload(),children:"Reload Page"})]})})}):t.jsx(Ee,{defaultTheme:"light",storageKey:"collepto-theme",children:t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:t.jsxs("div",{className:"container flex h-14 items-center",children:[t.jsx("div",{className:"mr-4 flex",children:t.jsx("button",{className:"flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors",onClick:()=>{r("collection"),s(null),o(null)},children:t.jsx("span",{children:"Collepto"})})}),t.jsxs("nav",{className:"flex items-center space-x-6 text-sm font-medium",children:[t.jsx("button",{className:`transition-colors hover:text-primary ${e==="collection"?"text-primary":"text-muted-foreground"}`,onClick:()=>{r("collection"),s(null),o(null)},children:"Collection"}),t.jsx("button",{className:`transition-colors hover:text-primary ${e==="blog"||e==="post"?"text-primary":"text-muted-foreground"}`,onClick:()=>{r("blog"),s(null),o(null)},children:"Blog"})]}),t.jsx("div",{className:"flex flex-1 items-center justify-end space-x-2",children:t.jsxs(T,{variant:"ghost",size:"sm",onClick:I,className:"gap-2",children:[t.jsx(Js,{className:"w-4 h-4"}),"Admin"]})})]})}),t.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e==="collection"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Винтажная коллекция"}),t.jsx("p",{className:"text-muted-foreground",children:"Исследуйте уникальные винтажные предметы, собранные с любовью за годы коллекционирования"})]}),t.jsx(Yo,{onSearch:w,availableTags:N(),availableCategories:S(),initialFilters:p}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("p",{className:"text-muted-foreground",children:["Показано ",f.length," из ",l.length," предметов"]}),p.category&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Категория:"}),t.jsxs(_,{variant:"secondary",className:"gap-1",children:[p.category,t.jsx(W,{className:"w-3 h-3 cursor-pointer hover:text-destructive",onClick:()=>{const A={...p,category:""};w(A)}})]})]}),(p.title||p.yearFrom||p.yearTo||p.tags.length>0||p.category)&&t.jsxs(T,{variant:"outline",size:"sm",onClick:R,className:"gap-2",children:[t.jsx(W,{className:"w-4 h-4"}),"Очистить фильтры"]})]})}),f.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-muted-foreground",children:"Нет предметов, соответствующих вашим фильтрам."}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Попробуйте изменить критерии поиска или очистить фильтры."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(A=>t.jsx(ta,{...A,onMoreDetails:x,onTagClick:E,onCategoryClick:j},A.id))})]}),e==="blog"&&t.jsx($o,{items:l,blogPosts:d,onItemClick:x,onPostClick:v}),e==="item"&&n&&(()=>{const A=l.find(k=>k.id===n);return A?t.jsx(Fo,{item:A,onBack:()=>r("collection"),onTagClick:E,onCategoryClick:j,allItems:l,onItemClick:x}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-muted-foreground",children:"Предмет не найден"}),t.jsx(T,{onClick:()=>r("collection"),children:"Вернуться к коллекции"})]})})(),e==="post"&&a&&t.jsx(zo,{postId:a,items:l,blogPosts:d,onBack:()=>r("blog"),onItemClick:x,onPostClick:v})]})]})})}const Qo=ht("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ie({className:e,variant:r,...n}){return t.jsx("div",{"data-slot":"alert",role:"alert",className:D(Qo({variant:r}),e),...n})}function le({className:e,...r}){return t.jsx("div",{"data-slot":"alert-description",className:D("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...r})}function ei({onAuthSuccess:e}){const[r,n]=c.useState(""),[s,a]=c.useState(""),[o,l]=c.useState(!1),[i,f]=c.useState(null),[u,d]=c.useState(!0);c.useEffect(()=>{(async()=>{var y;try{const C=await L.checkAuthStatus();if(C.success&&((y=C.data)!=null&&y.authenticated)){e();return}}catch(C){console.error("Auth check failed:",C)}finally{d(!1)}})()},[e]);const m=async g=>{g.preventDefault(),l(!0),f(null);try{const y=await L.login(r,s);y.success?e():f(y.error||"Ошибка авторизации")}catch{f("Не удалось подключиться к серверу")}finally{l(!1)}};return u?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nt,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Проверка авторизации..."})]})}):t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsxs(M,{className:"w-full max-w-md",children:[t.jsx(V,{children:t.jsx(J,{className:"text-center",children:"Админка Collepto"})}),t.jsx(z,{children:t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"username",children:"Логин"}),t.jsx(U,{id:"username",type:"text",value:r,onChange:g=>n(g.target.value),required:!0,disabled:o})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"password",children:"Пароль"}),t.jsx(U,{id:"password",type:"password",value:s,onChange:g=>a(g.target.value),required:!0,disabled:o})]}),i&&t.jsx(ie,{variant:"destructive",children:t.jsx(le,{children:i})}),t.jsxs(T,{type:"submit",className:"w-full",disabled:o,children:[o&&t.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Войти"]})]})})]})})}function ti(e){const r=e+"CollectionProvider",[n,s]=ce(r),[a,o]=n(r,{collectionRef:{current:null},itemMap:new Map}),l=h=>{const{scope:p,children:b}=h,N=ne.useRef(null),S=ne.useRef(new Map).current;return t.jsx(a,{scope:p,itemMap:S,collectionRef:N,children:b})};l.displayName=r;const i=e+"CollectionSlot",f=Ae(i),u=ne.forwardRef((h,p)=>{const{scope:b,children:N}=h,S=o(i,b),w=q(p,S.collectionRef);return t.jsx(f,{ref:w,children:N})});u.displayName=i;const d=e+"CollectionItemSlot",m="data-radix-collection-item",g=Ae(d),y=ne.forwardRef((h,p)=>{const{scope:b,children:N,...S}=h,w=ne.useRef(null),R=q(p,w),x=o(d,b);return ne.useEffect(()=>(x.itemMap.set(w,{ref:w,...S}),()=>void x.itemMap.delete(w))),t.jsx(g,{[m]:"",ref:R,children:N})});y.displayName=d;function C(h){const p=o(e+"CollectionConsumer",h);return ne.useCallback(()=>{const N=p.collectionRef.current;if(!N)return[];const S=Array.from(N.querySelectorAll(`[${m}]`));return Array.from(p.itemMap.values()).sort((x,v)=>S.indexOf(x.ref.current)-S.indexOf(v.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:l,Slot:u,ItemSlot:y},C,s]}var ri=c.createContext(void 0);function cs(e){const r=c.useContext(ri);return e||r||"ltr"}var st="rovingFocusGroup.onEntryFocus",si={bubbles:!1,cancelable:!0},Ie="RovingFocusGroup",[dt,ds,ni]=ti(Ie),[ai,us]=ce(Ie,[ni]),[oi,ii]=ai(Ie),fs=c.forwardRef((e,r)=>t.jsx(dt.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(dt.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(li,{...e,ref:r})})}));fs.displayName=Ie;var li=c.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:f,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,g=c.useRef(null),y=q(r,g),C=cs(o),[h,p]=ze({prop:l,defaultProp:i??null,onChange:f,caller:Ie}),[b,N]=c.useState(!1),S=ye(u),w=ds(n),R=c.useRef(!1),[x,v]=c.useState(0);return c.useEffect(()=>{const E=g.current;if(E)return E.addEventListener(st,S),()=>E.removeEventListener(st,S)},[S]),t.jsx(oi,{scope:n,orientation:s,dir:C,loop:a,currentTabStopId:h,onItemFocus:c.useCallback(E=>p(E),[p]),onItemShiftTab:c.useCallback(()=>N(!0),[]),onFocusableItemAdd:c.useCallback(()=>v(E=>E+1),[]),onFocusableItemRemove:c.useCallback(()=>v(E=>E-1),[]),children:t.jsx($.div,{tabIndex:b||x===0?-1:0,"data-orientation":s,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:G(e.onMouseDown,()=>{R.current=!0}),onFocus:G(e.onFocus,E=>{const j=!R.current;if(E.target===E.currentTarget&&j&&!b){const I=new CustomEvent(st,si);if(E.currentTarget.dispatchEvent(I),!I.defaultPrevented){const A=w().filter(K=>K.focusable),k=A.find(K=>K.active),B=A.find(K=>K.id===h),de=[k,B,...A].filter(Boolean).map(K=>K.ref.current);gs(de,d)}}R.current=!1}),onBlur:G(e.onBlur,()=>N(!1))})})}),ms="RovingFocusGroupItem",hs=c.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:l,...i}=e,f=pe(),u=o||f,d=ii(ms,n),m=d.currentTabStopId===u,g=ds(n),{onFocusableItemAdd:y,onFocusableItemRemove:C,currentTabStopId:h}=d;return c.useEffect(()=>{if(s)return y(),()=>C()},[s,y,C]),t.jsx(dt.ItemSlot,{scope:n,id:u,focusable:s,active:a,children:t.jsx($.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...i,ref:r,onMouseDown:G(e.onMouseDown,p=>{s?d.onItemFocus(u):p.preventDefault()}),onFocus:G(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:G(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const b=ui(p,d.orientation,d.dir);if(b!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let S=g().filter(w=>w.focusable).map(w=>w.ref.current);if(b==="last")S.reverse();else if(b==="prev"||b==="next"){b==="prev"&&S.reverse();const w=S.indexOf(p.currentTarget);S=d.loop?fi(S,w+1):S.slice(w+1)}setTimeout(()=>gs(S))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:h!=null}):l})})});hs.displayName=ms;var ci={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function di(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ui(e,r,n){const s=di(e.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return ci[s]}function gs(e,r=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:r}),document.activeElement!==n))return}function fi(e,r){return e.map((n,s)=>e[(r+s)%e.length])}var mi=fs,hi=hs,Ve="Tabs",[gi,jl]=ce(Ve,[us]),ps=us(),[pi,wt]=gi(Ve),xs=c.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:i,activationMode:f="automatic",...u}=e,d=cs(i),[m,g]=ze({prop:s,onChange:a,defaultProp:o??"",caller:Ve});return t.jsx(pi,{scope:n,baseId:pe(),value:m,onValueChange:g,orientation:l,dir:d,activationMode:f,children:t.jsx($.div,{dir:d,"data-orientation":l,...u,ref:r})})});xs.displayName=Ve;var vs="TabsList",bs=c.forwardRef((e,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=wt(vs,n),l=ps(n);return t.jsx(mi,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:t.jsx($.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:r})})});bs.displayName=vs;var ys="TabsTrigger",js=c.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,l=wt(ys,n),i=ps(n),f=Cs(l.baseId,s),u=Ss(l.baseId,s),d=s===l.value;return t.jsx(hi,{asChild:!0,...i,focusable:!a,active:d,children:t.jsx($.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:f,...o,ref:r,onMouseDown:G(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:G(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:G(e.onFocus,()=>{const m=l.activationMode!=="manual";!d&&!a&&m&&l.onValueChange(s)})})})});js.displayName=ys;var Ns="TabsContent",ws=c.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...l}=e,i=wt(Ns,n),f=Cs(i.baseId,s),u=Ss(i.baseId,s),d=s===i.value,m=c.useRef(d);return c.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),t.jsx(Ne,{present:a||d,children:({present:g})=>t.jsx($.div,{"data-state":d?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":f,hidden:!g,id:u,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:m.current?"0s":void 0},children:g&&o})})});ws.displayName=Ns;function Cs(e,r){return`${e}-trigger-${r}`}function Ss(e,r){return`${e}-content-${r}`}var xi=xs,vi=bs,bi=js,yi=ws;function ji({className:e,...r}){return t.jsx(xi,{"data-slot":"tabs",className:D("flex flex-col gap-2",e),...r})}function Ni({className:e,...r}){return t.jsx(vi,{"data-slot":"tabs-list",className:D("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...r})}function Jt({className:e,...r}){return t.jsx(bi,{"data-slot":"tabs-trigger",className:D("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Qt({className:e,...r}){return t.jsx(yi,{"data-slot":"tabs-content",className:D("flex-1 outline-none",e),...r})}var Es="AlertDialog",[wi,Nl]=ce(Es,[Fr]),ee=Fr(),As=e=>{const{__scopeAlertDialog:r,...n}=e,s=ee(r);return t.jsx(es,{...s,...n,modal:!0})};As.displayName=Es;var Ci="AlertDialogTrigger",Si=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=ee(n);return t.jsx(ko,{...a,...s,ref:r})});Si.displayName=Ci;var Ei="AlertDialogPortal",Is=e=>{const{__scopeAlertDialog:r,...n}=e,s=ee(r);return t.jsx(ts,{...s,...n})};Is.displayName=Ei;var Ai="AlertDialogOverlay",ks=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=ee(n);return t.jsx(rs,{...a,...s,ref:r})});ks.displayName=Ai;var ve="AlertDialogContent",[Ii,ki]=wi(ve),Ri=hn("AlertDialogContent"),Rs=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,children:s,...a}=e,o=ee(n),l=c.useRef(null),i=q(r,l),f=c.useRef(null);return t.jsx(So,{contentName:ve,titleName:Ts,docsSlug:"alert-dialog",children:t.jsx(Ii,{scope:n,cancelRef:f,children:t.jsxs(ss,{role:"alertdialog",...o,...a,ref:i,onOpenAutoFocus:G(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=f.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[t.jsx(Ri,{children:s}),t.jsx(Pi,{contentRef:l})]})})})});Rs.displayName=ve;var Ts="AlertDialogTitle",Ps=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=ee(n);return t.jsx(Ro,{...a,...s,ref:r})});Ps.displayName=Ts;var Ds="AlertDialogDescription",Os=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=ee(n);return t.jsx(To,{...a,...s,ref:r})});Os.displayName=Ds;var Ti="AlertDialogAction",_s=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=ee(n);return t.jsx(Ge,{...a,...s,ref:r})});_s.displayName=Ti;var Ms="AlertDialogCancel",Ls=c.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=ki(Ms,n),o=ee(n),l=q(r,a);return t.jsx(Ge,{...o,...s,ref:l})});Ls.displayName=Ms;var Pi=({contentRef:e})=>{const r=`\`${ve}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ve}\` by passing a \`${Ds}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ve}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(r)},[r,e]),null},Di=As,Oi=Is,_i=ks,Mi=Rs,Li=_s,Fi=Ls,$i=Ps,zi=Os;function Bi({...e}){return t.jsx(Di,{"data-slot":"alert-dialog",...e})}function Ui({...e}){return t.jsx(Oi,{"data-slot":"alert-dialog-portal",...e})}function Gi({className:e,...r}){return t.jsx(_i,{"data-slot":"alert-dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function Wi({className:e,...r}){return t.jsxs(Ui,{children:[t.jsx(Gi,{}),t.jsx(Mi,{"data-slot":"alert-dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r})]})}function Vi({className:e,...r}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:D("flex flex-col gap-2 text-center sm:text-left",e),...r})}function qi({className:e,...r}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:D("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...r})}function Ki({className:e,...r}){return t.jsx($i,{"data-slot":"alert-dialog-title",className:D("text-lg font-semibold",e),...r})}function Hi({className:e,...r}){return t.jsx(zi,{"data-slot":"alert-dialog-description",className:D("text-muted-foreground text-sm",e),...r})}function Yi({className:e,...r}){return t.jsx(Li,{className:D(pt(),e),...r})}function Xi({className:e,...r}){return t.jsx(Fi,{className:D(pt({variant:"outline"}),e),...r})}function er({className:e,...r}){return t.jsx("textarea",{"data-slot":"textarea",className:D("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}var Zi="Separator",tr="horizontal",Ji=["horizontal","vertical"],Fs=c.forwardRef((e,r)=>{const{decorative:n,orientation:s=tr,...a}=e,o=Qi(s)?s:tr,i=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return t.jsx($.div,{"data-orientation":o,...i,...a,ref:r})});Fs.displayName=Zi;function Qi(e){return Ji.includes(e)}var el=Fs;function tl({className:e,orientation:r="horizontal",decorative:n=!0,...s}){return t.jsx(el,{"data-slot":"separator-root",decorative:n,orientation:r,className:D("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}var Ct="Progress",St=100,[rl,wl]=ce(Ct),[sl,nl]=rl(Ct),$s=c.forwardRef((e,r)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=al,...l}=e;(a||a===0)&&!rr(a)&&console.error(ol(`${a}`,"Progress"));const i=rr(a)?a:St;s!==null&&!sr(s,i)&&console.error(il(`${s}`,"Progress"));const f=sr(s,i)?s:null,u=Fe(f)?o(f,i):void 0;return t.jsx(sl,{scope:n,value:f,max:i,children:t.jsx($.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Fe(f)?f:void 0,"aria-valuetext":u,role:"progressbar","data-state":Us(f,i),"data-value":f??void 0,"data-max":i,...l,ref:r})})});$s.displayName=Ct;var zs="ProgressIndicator",Bs=c.forwardRef((e,r)=>{const{__scopeProgress:n,...s}=e,a=nl(zs,n);return t.jsx($.div,{"data-state":Us(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:r})});Bs.displayName=zs;function al(e,r){return`${Math.round(e/r*100)}%`}function Us(e,r){return e==null?"indeterminate":e===r?"complete":"loading"}function Fe(e){return typeof e=="number"}function rr(e){return Fe(e)&&!isNaN(e)&&e>0}function sr(e,r){return Fe(e)&&!isNaN(e)&&e<=r&&e>=0}function ol(e,r){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${St}\`.`}function il(e,r){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${St} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ll=$s,cl=Bs;function dl({className:e,value:r,...n}){return t.jsx(ll,{"data-slot":"progress",className:D("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:t.jsx(cl,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}function ul({itemId:e,existingPhotos:r=[],onPhotosUpdated:n,maxPhotos:s=10}){const[a,o]=c.useState(!1),[l,i]=c.useState([]),[f,u]=c.useState(null),d=r.length+l.filter(x=>x.status==="success").length<s,m=s-r.length-l.filter(x=>x.status==="success").length,g=x=>{if(!x.type.startsWith("image/"))return"Файл должен быть изображением";const v=25*1024*1024;return x.size>v?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(x.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},y=async x=>{i(v=>[...v,{file:x,progress:0,status:"uploading"}]);try{const v=setInterval(()=>{i(j=>j.map(I=>I.file===x&&I.status==="uploading"?{...I,progress:Math.min(I.progress+10,90)}:I))},200),E=await L.uploadPhoto(e,x);if(clearInterval(v),E.success&&E.data)i(j=>j.map(I=>I.file===x?{...I,progress:100,status:"success",url:E.data.publicUrl,id:E.data.id}:I)),n==null||n();else throw new Error(E.error||"Ошибка загрузки")}catch(v){const E=v instanceof Error?v.message:"Ошибка загрузки";i(j=>j.map(I=>I.file===x?{...I,progress:0,status:"error",error:E}:I))}},C=c.useCallback(x=>{u(null);const v=Array.from(x);if(v.length>m){u(`Можно загрузить только ${m} фото. Максимум ${s} фото на предмет.`);return}const E=[],j=[];if(v.forEach(I=>{const A=g(I);A?j.push(`${I.name}: ${A}`):E.push(I)}),j.length>0){u(j.join(`
`));return}E.forEach(I=>{y(I)})},[e,m,s]),h=c.useCallback(x=>{x.preventDefault(),o(!0)},[]),p=c.useCallback(x=>{x.preventDefault(),o(!1)},[]),b=c.useCallback(x=>{x.preventDefault(),o(!1),d&&C(x.dataTransfer.files)},[d,C]),N=c.useCallback(x=>{x.target.files&&d&&C(x.target.files)},[d,C]),S=x=>{i(v=>v.filter(E=>E.file!==x))},w=x=>{i(v=>v.filter(E=>E.file!==x)),y(x)},R=async x=>{try{u(null);const v=await L.deletePhoto(x);v.success?n==null||n():u(v.error||"Ошибка удаления фото")}catch(v){u(v instanceof Error?v.message:"Ошибка удаления фото")}};return t.jsxs("div",{className:"space-y-4",children:[d&&t.jsx(M,{className:`border-2 border-dashed transition-colors ${a?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:h,onDragLeave:p,onDrop:b,children:t.jsx(z,{className:"p-8",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(lr,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:"Загрузите фотографии"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Можно загрузить ещё ",m," из ",s," фото"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:N,className:"hidden",id:`photo-upload-${e}`}),t.jsx("label",{htmlFor:`photo-upload-${e}`,children:t.jsx(T,{variant:"outline",className:"gap-2",asChild:!0,children:t.jsxs("span",{children:[t.jsx(mt,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Поддерживаемые форматы: JPEG, PNG, GIF, WebP, BMP, TIFF",t.jsx("br",{}),"Максимальный размер: 25MB"]})]})]})})}),f&&t.jsxs(ie,{variant:"destructive",children:[t.jsx(he,{className:"h-4 w-4"}),t.jsx(le,{className:"whitespace-pre-line",children:f})]}),l.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium",children:"Загрузка файлов"}),l.map((x,v)=>t.jsx(M,{children:t.jsx(z,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsxs("div",{className:"w-10 h-10 rounded bg-muted flex items-center justify-center",children:[x.status==="uploading"&&t.jsx(nt,{className:"w-4 h-4 animate-spin"}),x.status==="success"&&t.jsx(Qs,{className:"w-4 h-4 text-green-600"}),x.status==="error"&&t.jsx(he,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium truncate",children:x.file.name}),t.jsx(_,{variant:x.status==="success"?"default":x.status==="error"?"destructive":"secondary",children:x.status==="uploading"?"Загрузка...":x.status==="success"?"Готово":"Ошибка"})]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[(x.file.size/1024/1024).toFixed(1)," MB"]}),x.status==="uploading"&&t.jsx(dl,{value:x.progress,className:"h-1"}),x.status==="error"&&x.error&&t.jsx("p",{className:"text-xs text-red-600",children:x.error})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[x.status==="error"&&t.jsx(T,{variant:"outline",size:"sm",onClick:()=>w(x.file),children:"Повторить"}),t.jsx(T,{variant:"ghost",size:"sm",onClick:()=>S(x.file),children:t.jsx(W,{className:"w-4 h-4"})})]})]})})},v))]}),r.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"font-medium",children:["Загруженные фото (",r.length,")"]}),t.jsxs(_,{variant:"secondary",children:[r.length,"/",s]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map(x=>t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"aspect-square overflow-hidden rounded-lg",children:t.jsx(Q,{src:x.url,alt:x.filename,className:"w-full h-full object-cover"})}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center",children:t.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>R(x.id),children:t.jsx(W,{className:"w-4 h-4"})})})]},x.id))})]}),!d&&t.jsxs(ie,{children:[t.jsx(he,{className:"h-4 w-4"}),t.jsxs(le,{children:["Достигнут лимит в ",s," фотографий для этого предмета."]})]})]})}function fl({photos:e,onPhotosChange:r,maxPhotos:n=10}){const[s,a]=c.useState(!1),[o,l]=c.useState(null),i=e.length<n,f=n-e.length,u=b=>{if(!b.type.startsWith("image/"))return"Файл должен быть изображением";const N=25*1024*1024;return b.size>N?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(b.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},d=c.useCallback(b=>{l(null);const N=Array.from(b);if(N.length>f){l(`Можно загрузить только ${f} фото. Максимум ${n} фото на предмет.`);return}const S=[],w=[];if(N.forEach(R=>{const x=u(R);x?w.push(`${R.name}: ${x}`):S.push(R)}),w.length>0){l(w.join(`
`));return}r([...e,...S])},[e,r,f,n]),m=c.useCallback(b=>{b.preventDefault(),a(!0)},[]),g=c.useCallback(b=>{b.preventDefault(),a(!1)},[]),y=c.useCallback(b=>{b.preventDefault(),a(!1),i&&d(b.dataTransfer.files)},[i,d]),C=c.useCallback(b=>{b.target.files&&i&&d(b.target.files)},[i,d]),h=b=>{const N=e.filter((S,w)=>w!==b);r(N)},p=b=>URL.createObjectURL(b);return t.jsxs("div",{className:"space-y-4",children:[i&&t.jsx(M,{className:`border-2 border-dashed transition-colors ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:m,onDragLeave:g,onDrop:y,children:t.jsx(z,{className:"p-6",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"mx-auto w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(lr,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-sm",children:"Добавьте фотографии"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Можно добавить ещё ",f," из ",n," фото"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:C,className:"hidden",id:"photo-preview-upload"}),t.jsx("label",{htmlFor:"photo-preview-upload",children:t.jsx(T,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:t.jsxs("span",{children:[t.jsx(mt,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"JPEG, PNG, GIF, WebP, BMP, TIFF · Макс. 25MB"})]})]})})}),o&&t.jsxs(ie,{variant:"destructive",children:[t.jsx(he,{className:"h-4 w-4"}),t.jsx(le,{className:"whitespace-pre-line",children:o})]}),e.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"font-medium text-sm",children:["Выбранные фото (",e.length,")"]}),t.jsxs(_,{variant:"secondary",className:"text-xs",children:[e.length,"/",n]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:e.map((b,N)=>t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-muted",children:t.jsx("img",{src:p(b),alt:`Предпросмотр ${N+1}`,className:"w-full h-full object-cover",onLoad:S=>{URL.revokeObjectURL(S.target.src)}})}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center",children:t.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>h(N),children:t.jsx(W,{className:"w-4 h-4"})})}),t.jsx("div",{className:"absolute bottom-1 left-1 right-1 bg-black/60 text-white text-xs px-2 py-1 rounded truncate",children:b.name})]},N))})]}),!i&&t.jsxs(ie,{children:[t.jsx(he,{className:"h-4 w-4"}),t.jsxs(le,{children:["Достигнут лимит в ",n," фотографий для этого предмета."]})]})]})}function ml({itemId:e,onSave:r,onCancel:n}){var E;const[s,a]=c.useState({title:"",description:"",fullDescription:"",year:new Date().getFullYear(),yearFrom:void 0,yearTo:void 0,country:"",organization:"",size:"",edition:"",series:"",tags:[],category:"",condition:"",acquisition:"",value:"",photos:[]}),[o,l]=c.useState(""),[i,f]=c.useState(!1),[u,d]=c.useState(!1),[m,g]=c.useState(null),[y,C]=c.useState({}),[h,p]=c.useState([]);c.useEffect(()=>{e&&b()},[e]);const b=async()=>{if(e){f(!0),g(null);try{const j=await L.getItem(e);j.success&&j.data?a(j.data):g(j.error||"Не удалось загрузить предмет")}catch{g("Ошибка загрузки предмета")}finally{f(!1)}}},N=()=>{var I,A;const j={};return(I=s.title)!=null&&I.trim()||(j.title="Название обязательно"),(A=s.category)!=null&&A.trim()||(j.category="Категория обязательна"),(!s.year||s.year<1800||s.year>2030)&&(j.year="Год должен быть между 1800 и 2030"),s.yearFrom&&s.yearTo&&s.yearFrom>s.yearTo&&(j.yearRange='Год "от" не может быть больше года "до"'),C(j),Object.keys(j).length===0},S=async()=>{var j;if(N()){d(!0),g(null);try{let I;if(e){if(I=await L.updateItem(e,s),I.success){const A=await L.getItem(e);A.success&&A.data&&r(A.data)}}else if(I=await L.createItem(s),I.success&&((j=I.data)!=null&&j.id)){const A=I.data.id;if(h.length>0)try{for(const B of h)await L.uploadPhoto(A,B);p([])}catch(B){console.error("Photo upload error:",B),g("Предмет создан, но не все фото загружены. Вы можете добавить их позже.")}const k=await L.getItem(A);k.success&&k.data&&r(k.data)}I.success||g(I.error||"Ошибка сохранения")}catch{g("Ошибка сохранения предмета")}finally{d(!1)}}},w=(j,I)=>{a(A=>({...A,[j]:I})),y[j]&&C(A=>{const k={...A};return delete k[j],k})},R=()=>{var j;o.trim()&&!((j=s.tags)!=null&&j.includes(o.trim()))&&(w("tags",[...s.tags||[],o.trim()]),l(""))},x=j=>{var I;w("tags",((I=s.tags)==null?void 0:I.filter(A=>A!==j))||[])},v=j=>{j.key==="Enter"&&(j.preventDefault(),R())};return i?t.jsx("div",{className:"p-8 text-center",children:t.jsx("div",{className:"text-lg font-medium",children:"Загрузка предмета..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(T,{variant:"outline",onClick:n,className:"gap-2",children:[t.jsx(Me,{className:"w-4 h-4"}),"Назад"]}),t.jsx("h1",{className:"text-2xl font-semibold",children:e?"Редактировать предмет":"Новый предмет"})]}),t.jsxs(T,{onClick:S,disabled:u,className:"gap-2",children:[t.jsx(en,{className:"w-4 h-4"}),u?"Сохранение...":e?"Сохранить":"Создать предмет"]})]}),m&&t.jsxs(ie,{variant:"destructive",children:[t.jsx(he,{className:"h-4 w-4"}),t.jsx(le,{children:m})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[t.jsxs(M,{children:[t.jsx(V,{children:t.jsx(J,{children:"Основная информация"})}),t.jsxs(z,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"title",children:"Название *"}),t.jsx(U,{id:"title",value:s.title||"",onChange:j=>w("title",j.target.value),placeholder:"Введите название предмета"}),y.title&&t.jsx("p",{className:"text-sm text-red-600",children:y.title})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"category",children:"Категория *"}),t.jsx(U,{id:"category",value:s.category||"",onChange:j=>w("category",j.target.value),placeholder:"Например: Винтажные камеры"}),y.category&&t.jsx("p",{className:"text-sm text-red-600",children:y.category})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"description",children:"Краткое описание"}),t.jsx(er,{id:"description",value:s.description||"",onChange:j=>w("description",j.target.value),placeholder:"Краткое описание предмета",rows:3})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"fullDescription",children:"Подробное описание"}),t.jsx(er,{id:"fullDescription",value:s.fullDescription||"",onChange:j=>w("fullDescription",j.target.value),placeholder:"Подробное описание с историей и деталями",rows:5})]})]})]}),t.jsxs(M,{children:[t.jsx(V,{children:t.jsx(J,{children:"Детали"})}),t.jsxs(z,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"year",children:"Год *"}),t.jsx(U,{id:"year",type:"number",min:"1800",max:"2024",value:s.year||"",onChange:j=>w("year",parseInt(j.target.value)||"")}),y.year&&t.jsx("p",{className:"text-sm text-red-600",children:y.year})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"country",children:"Страна"}),t.jsx(U,{id:"country",value:s.country||"",onChange:j=>w("country",j.target.value),placeholder:"Страна производства"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"yearFrom",children:"Год от"}),t.jsx(U,{id:"yearFrom",type:"number",min:"1800",max:"2024",value:s.yearFrom||"",onChange:j=>w("yearFrom",parseInt(j.target.value)||void 0),placeholder:"Начало диапазона"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"yearTo",children:"Год до"}),t.jsx(U,{id:"yearTo",type:"number",min:"1800",max:"2024",value:s.yearTo||"",onChange:j=>w("yearTo",parseInt(j.target.value)||void 0),placeholder:"Конец диапазона"})]})]}),y.yearRange&&t.jsx("p",{className:"text-sm text-red-600",children:y.yearRange}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"organization",children:"Организация/Издатель"}),t.jsx(U,{id:"organization",value:s.organization||"",onChange:j=>w("organization",j.target.value),placeholder:"Производитель или издатель"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"size",children:"Размер"}),t.jsx(U,{id:"size",value:s.size||"",onChange:j=>w("size",j.target.value),placeholder:"Размеры предмета"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"edition",children:"Тираж"}),t.jsx(U,{id:"edition",value:s.edition||"",onChange:j=>w("edition",j.target.value),placeholder:"Тираж или серийность"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"series",children:"Серия"}),t.jsx(U,{id:"series",value:s.series||"",onChange:j=>w("series",j.target.value),placeholder:"Серия или коллекция"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"condition",children:"Состояние"}),t.jsx(U,{id:"condition",value:s.condition||"",onChange:j=>w("condition",j.target.value),placeholder:"Состояние предмета"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"acquisition",children:"Как приобретен"}),t.jsx(U,{id:"acquisition",value:s.acquisition||"",onChange:j=>w("acquisition",j.target.value),placeholder:"История приобретения"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{htmlFor:"value",children:"Стоимость"}),t.jsx(U,{id:"value",value:s.value||"",onChange:j=>w("value",j.target.value),placeholder:"Примерная стоимость"})]})]})]})]}),t.jsxs(M,{children:[t.jsx(V,{children:t.jsx(J,{children:"Теги"})}),t.jsxs(z,{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{value:o,onChange:j=>l(j.target.value),onKeyPress:v,placeholder:"Добавить тег",className:"flex-1"}),t.jsx(T,{onClick:R,disabled:!o.trim(),children:t.jsx(at,{className:"w-4 h-4"})})]}),s.tags&&s.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((j,I)=>t.jsxs(_,{variant:"secondary",className:"gap-1",children:[j,t.jsx("button",{onClick:()=>x(j),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:t.jsx(W,{className:"w-3 h-3"})})]},I))})]})]}),t.jsx(tl,{}),t.jsxs(M,{children:[t.jsx(V,{children:t.jsx(J,{children:"Фотографии предмета"})}),t.jsx(z,{children:e?t.jsx(ul,{itemId:e,existingPhotos:((E=s.photos)==null?void 0:E.map((j,I)=>({id:`photo-${I}`,url:j,filename:`photo-${I+1}.jpg`})))||[],onPhotosUpdated:()=>{b()}}):t.jsx(fl,{photos:h,onPhotosChange:p,maxPhotos:10})})]})]})}function hl(){const[e,r]=c.useState([]),[n,s]=c.useState([]),[a,o]=c.useState(!0),[l,i]=c.useState(null),[f,u]=c.useState("dashboard"),[d,m]=c.useState(),[g,y]=c.useState(!1),[C,h]=c.useState(null);c.useEffect(()=>{p()},[]);const p=async()=>{o(!0),i(null);try{const[v,E]=await Promise.all([L.getItems(),L.getBlogPosts()]);v.success&&v.data&&r(v.data),E.success&&E.data&&s(E.data)}catch{i("Ошибка загрузки данных")}finally{o(!1)}},b=async()=>{try{await L.logout(),window.location.reload()}catch(v){console.error("Logout failed:",v),L.clearSession(),window.location.reload()}},N=async()=>{try{await L.downloadExport()}catch(v){alert("Ошибка экспорта: "+(v instanceof Error?v.message:"Неизвестная ошибка"))}},S=()=>{m(void 0),u("item-editor")},w=async()=>{if(C)try{const v=await L.deleteItem(C.id);v.success?(r(E=>E.filter(j=>j.id!==C.id)),y(!1),h(null)):alert("Ошибка удаления: "+(v.error||"Неизвестная ошибка"))}catch(v){alert("Ошибка удаления: "+(v instanceof Error?v.message:"Неизвестная ошибка"))}},R=v=>{r(E=>{const j=E.findIndex(I=>I.id===v.id);if(j>=0){const I=[...E];return I[j]=v,I}else return[v,...E]}),u("dashboard")},x=()=>{u("dashboard"),m(void 0)};return f==="item-editor"?t.jsx("div",{className:"min-h-screen bg-background",children:t.jsx("div",{className:"container mx-auto max-w-7xl p-4",children:t.jsx(ml,{itemId:d,onSave:R,onCancel:x})})}):a?t.jsx("div",{className:"min-h-screen bg-background p-4",children:t.jsx("div",{className:"container mx-auto max-w-7xl",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h1",{children:"Админка"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Загрузка данных..."})]})})}):t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:t.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h1",{className:"text-xl font-semibold",children:"Админка Collepto"}),t.jsx(_,{variant:"secondary",children:"Администратор"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(T,{onClick:N,variant:"outline",size:"sm",className:"gap-2",children:[t.jsx(tn,{className:"w-4 h-4"}),"Экспорт"]}),t.jsxs(T,{onClick:b,variant:"outline",size:"sm",className:"gap-2",children:[t.jsx(cr,{className:"w-4 h-4"}),"Выйти"]})]})]})})}),t.jsxs("div",{className:"container mx-auto max-w-7xl p-4",children:[l&&t.jsx(ie,{variant:"destructive",className:"mb-6",children:t.jsx(le,{children:l})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs(M,{children:[t.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(J,{className:"text-sm font-medium",children:"Предметы"}),t.jsx(rn,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(z,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"в коллекции"})]})]}),t.jsxs(M,{children:[t.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(J,{className:"text-sm font-medium",children:"Посты блога"}),t.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(z,{children:[t.jsx("div",{className:"text-2xl font-bold",children:n.length}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.filter(v=>v.published).length," опубликовано"]})]})]}),t.jsxs(M,{children:[t.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(J,{className:"text-sm font-medium",children:"Категории"}),t.jsx(nn,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(z,{children:[t.jsx("div",{className:"text-2xl font-bold",children:new Set(e.map(v=>v.category)).size}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"уникальных"})]})]}),t.jsxs(M,{children:[t.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(J,{className:"text-sm font-medium",children:"Фотографии"}),t.jsx(mt,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(z,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.reduce((v,E)=>{var j;return v+(((j=E.photos)==null?void 0:j.length)||0)},0)}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"всего загружено"})]})]})]}),t.jsxs(ji,{defaultValue:"items",className:"w-full",children:[t.jsxs(Ni,{className:"grid w-full grid-cols-2",children:[t.jsx(Jt,{value:"items",children:"Предметы коллекции"}),t.jsx(Jt,{value:"blog",children:"Блог"})]}),t.jsxs(Qt,{value:"items",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Управление предметами"}),t.jsxs(T,{onClick:S,className:"gap-2",children:[t.jsx(at,{className:"w-4 h-4"}),"Добавить предмет"]})]}),t.jsx("div",{className:"grid gap-4",children:e.map(v=>{var E,j;return t.jsx(M,{children:t.jsx(z,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-medium",children:v.title}),t.jsx(_,{variant:"outline",children:v.category}),t.jsx(_,{variant:"secondary",children:v.year})]}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:v.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[t.jsxs("span",{children:[((E=v.photos)==null?void 0:E.length)||0," фото"]}),t.jsxs("span",{children:[((j=v.tags)==null?void 0:j.length)||0," тегов"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[t.jsx(kt,{className:"w-3 h-3"}),"Просмотр"]}),t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[t.jsx(Rt,{className:"w-3 h-3"}),"Изменить"]}),t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive",children:[t.jsx(Tt,{className:"w-3 h-3"}),"Удалить"]})]})]})})},v.id)})})]}),t.jsxs(Qt,{value:"blog",className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Управление блогом"}),t.jsxs(T,{className:"gap-2",children:[t.jsx(at,{className:"w-4 h-4"}),"Новый пост"]})]}),t.jsx("div",{className:"grid gap-4",children:n.map(v=>{var E;return t.jsx(M,{children:t.jsx(z,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-medium",children:v.title}),t.jsx(_,{variant:v.published?"default":"secondary",children:v.published?"Опубликован":"Черновик"}),t.jsx(_,{variant:"outline",children:v.category})]}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:v.excerpt}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[t.jsx("span",{children:new Date(v.publishDate).toLocaleDateString("ru-RU")}),t.jsxs("span",{children:[v.readTime," мин чтения"]}),t.jsxs("span",{children:[((E=v.relatedItems)==null?void 0:E.length)||0," связанных предметов"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[t.jsx(kt,{className:"w-3 h-3"}),"Просмотр"]}),t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[t.jsx(Rt,{className:"w-3 h-3"}),"Изменить"]}),t.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive",children:[t.jsx(Tt,{className:"w-3 h-3"}),"Удалить"]})]})]})})},v.id)})})]})]})]}),t.jsx(Bi,{open:g,onOpenChange:y,children:t.jsxs(Wi,{children:[t.jsxs(Vi,{children:[t.jsx(Ki,{children:"Удалить предмет?"}),t.jsxs(Hi,{children:['Вы уверены, что хотите удалить предмет "',C==null?void 0:C.title,'"? Это действие нельзя отменить. Все связанные фотографии также будут удалены.']})]}),t.jsxs(qi,{children:[t.jsx(Xi,{onClick:()=>y(!1),children:"Отмена"}),t.jsx(Yi,{onClick:w,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Удалить"})]})]})})]})}function gl(){const[e,r]=c.useState("admin-auth"),[n,s]=c.useState(!1),[a,o]=c.useState(!0);c.useEffect(()=>{(async()=>{var d;if(L.isAuthenticated())try{const m=await L.checkAuthStatus();m.success&&((d=m.data)!=null&&d.authenticated)?(s(!0),r("admin")):(L.clearSession(),s(!1),r("admin-auth"))}catch(m){console.error("Auth check failed:",m),L.clearSession(),s(!1),r("admin-auth")}else s(!1),r("admin-auth");o(!1)})()},[]);const l=()=>{s(!0),r("admin")},i=async()=>{try{await L.logout()}catch(u){console.error("Logout error:",u)}finally{s(!1),r("admin-auth")}},f=()=>{window.location.href="/"};return a?t.jsx(Ee,{defaultTheme:"light",storageKey:"collepto-theme",children:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"mt-4 text-muted-foreground",children:"Checking authentication..."})]})})}):t.jsx(Ee,{defaultTheme:"light",storageKey:"collepto-theme",children:t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:t.jsxs("div",{className:"container flex h-14 items-center",children:[t.jsx("div",{className:"mr-4 flex",children:t.jsx("button",{className:"flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors",onClick:f,children:t.jsx("span",{children:"Collepto Admin"})})}),t.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[t.jsxs(T,{variant:"ghost",size:"sm",onClick:f,className:"gap-2",children:[t.jsx(an,{className:"w-4 h-4"}),"Main Site"]}),n&&t.jsxs(T,{variant:"ghost",size:"sm",onClick:i,className:"gap-2",children:[t.jsx(cr,{className:"w-4 h-4"}),"Logout"]})]})]})}),t.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e==="admin-auth"&&t.jsx(ei,{onAuthSuccess:l}),e==="admin"&&n&&t.jsx(hl,{})]})]})})}function pl(){return window.location.pathname.startsWith("/admin")?t.jsx(gl,{}):t.jsx(Jo,{})}ot.createRoot(document.getElementById("root")).render(t.jsx(ne.StrictMode,{children:t.jsx(pl,{})}));
