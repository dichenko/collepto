var qs=Object.defineProperty;var Ks=(e,t,n)=>t in e?qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pt=(e,t,n)=>(Ks(e,typeof t!="symbol"?t+"":t,n),n);import{r as c,a as Wr,R as Gr,b as Ys,c as de}from"./vendor-194d1c16.js";import{S as or,F as Js,X as q,a as Xs,C as _t,b as Vr,A as ae,c as Ft,d as Zs,D as Qs,M as ea,e as Hr,f as ta,L as Pt,U as qr,I as zt,g as Ce,h as ra,i as na,P as kt,j as sa,k as Kr,l as aa,m as oa,n as ia,E as ir,o as lr,T as cr,H as la}from"./ui-78299bc6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Yr={exports:{}},at={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=c,da=Symbol.for("react.element"),ua=Symbol.for("react.fragment"),fa=Object.prototype.hasOwnProperty,ma=ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ha={key:!0,ref:!0,__self:!0,__source:!0};function Jr(e,t,n){var s,a={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)fa.call(t,s)&&!ha.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:da,type:e,key:o,ref:l,props:a,_owner:ma.current}}at.Fragment=ua;at.jsx=Jr;at.jsxs=Jr;Yr.exports=at;var r=Yr.exports,It={},dr=Wr;It.createRoot=dr.createRoot,It.hydrateRoot=dr.hydrateRoot;const pa="modulepreload",ga=function(e){return"/"+e},ur={},xa=function(t,n,s){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=ga(o),o in ur)return;ur[o]=!0;const l=o.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(!!s)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${i}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":pa,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})};var fr="popstate";function va(e={}){function t(s,a){let{pathname:o,search:l,hash:i}=s.location;return Tt("",{pathname:o,search:l,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:ze(a)}return ba(t,n,null,e)}function _(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Z(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ya(){return Math.random().toString(36).substring(2,10)}function mr(e,t){return{usr:e.state,key:e.key,idx:t}}function Tt(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Te(t):t,state:n,key:t&&t.key||s||ya()}}function ze({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Te(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function ba(e,t,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,i="POP",u=null,d=f();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function f(){return(l.state||{idx:null}).idx}function h(){i="POP";let p=f(),y=p==null?null:p-d;d=p,u&&u({action:i,location:m.location,delta:y})}function g(p,y){i="PUSH";let v=Tt(m.location,p,y);n&&n(v,p),d=f()+1;let N=mr(v,d),C=m.createHref(v);try{l.pushState(N,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(C)}o&&u&&u({action:i,location:m.location,delta:1})}function b(p,y){i="REPLACE";let v=Tt(m.location,p,y);n&&n(v,p),d=f();let N=mr(v,d),C=m.createHref(v);l.replaceState(N,"",C),o&&u&&u({action:i,location:m.location,delta:0})}function w(p){return ja(p)}let m={get action(){return i},get location(){return e(a,l)},listen(p){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(fr,h),u=p,()=>{a.removeEventListener(fr,h),u=null}},createHref(p){return t(a,p)},createURL:w,encodeLocation(p){let y=w(p);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:b,go(p){return l.go(p)}};return m}function ja(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:ze(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Xr(e,t,n="/"){return wa(e,t,n,!1)}function wa(e,t,n,s){let a=typeof t=="string"?Te(t):t,o=oe(a.pathname||"/",n);if(o==null)return null;let l=Zr(e);Na(l);let i=null;for(let u=0;i==null&&u<l.length;++u){let d=La(o);i=Aa(l[u],d,s)}return i}function Zr(e,t=[],n=[],s=""){let a=(o,l,i)=>{let u={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(_(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length));let d=se([s,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(_(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Zr(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Ia(d,o.index),routesMeta:f})};return e.forEach((o,l)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))a(o,l);else for(let u of Qr(o.path))a(o,l,u)}),t}function Qr(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Qr(s.join("/")),i=[];return i.push(...l.map(u=>u===""?o:[o,u].join("/"))),a&&i.push(...l),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function Na(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ta(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Ca=/^:[\w-]+$/,Ea=3,Sa=2,Ra=1,Pa=10,ka=-2,hr=e=>e==="*";function Ia(e,t){let n=e.split("/"),s=n.length;return n.some(hr)&&(s+=ka),t&&(s+=Sa),n.filter(a=>!hr(a)).reduce((a,o)=>a+(Ca.test(o)?Ea:o===""?Ra:Pa),s)}function Ta(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Aa(e,t,n=!1){let{routesMeta:s}=e,a={},o="/",l=[];for(let i=0;i<s.length;++i){let u=s[i],d=i===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=rt({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!h&&d&&n&&!s[s.length-1].route.index&&(h=rt({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:se([o,h.pathname]),pathnameBase:_a(se([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=se([o,h.pathnameBase]))}return l}function rt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=Da(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:s.reduce((d,{paramName:f,isOptional:h},g)=>{if(f==="*"){let w=i[g]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=i[g];return h&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:e}}function Da(e,t=!1,n=!0){Z(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,i,u)=>(s.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function La(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Z(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function oe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function Oa(e,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?Te(e):e;return{pathname:n?n.startsWith("/")?n:Ma(n,t):t,search:Fa(s),hash:za(a)}}function Ma(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function gt(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $a(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function en(e){let t=$a(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function tn(e,t,n,s=!1){let a;typeof e=="string"?a=Te(e):(a={...e},_(!a.pathname||!a.pathname.includes("?"),gt("?","pathname","search",a)),_(!a.pathname||!a.pathname.includes("#"),gt("#","pathname","hash",a)),_(!a.search||!a.search.includes("#"),gt("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,i;if(l==null)i=n;else{let h=t.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}i=h>=0?t[h]:"/"}let u=Oa(a,i),d=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var se=e=>e.join("/").replace(/\/\/+/g,"/"),_a=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fa=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,za=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ba(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var rn=["POST","PUT","PATCH","DELETE"];new Set(rn);var Ua=["GET",...rn];new Set(Ua);var Ae=c.createContext(null);Ae.displayName="DataRouter";var ot=c.createContext(null);ot.displayName="DataRouterState";c.createContext(!1);var nn=c.createContext({isTransitioning:!1});nn.displayName="ViewTransition";var Wa=c.createContext(new Map);Wa.displayName="Fetchers";var Ga=c.createContext(null);Ga.displayName="Await";var Q=c.createContext(null);Q.displayName="Navigation";var Ue=c.createContext(null);Ue.displayName="Location";var ee=c.createContext({outlet:null,matches:[],isDataRoute:!1});ee.displayName="Route";var Bt=c.createContext(null);Bt.displayName="RouteError";function Va(e,{relative:t}={}){_(We(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=c.useContext(Q),{hash:a,pathname:o,search:l}=Ge(e,{relative:t}),i=o;return n!=="/"&&(i=o==="/"?n:se([n,o])),s.createHref({pathname:i,search:l,hash:a})}function We(){return c.useContext(Ue)!=null}function me(){return _(We(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(Ue).location}var sn="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function an(e){c.useContext(Q).static||c.useLayoutEffect(e)}function Ut(){let{isDataRoute:e}=c.useContext(ee);return e?so():Ha()}function Ha(){_(We(),"useNavigate() may be used only in the context of a <Router> component.");let e=c.useContext(Ae),{basename:t,navigator:n}=c.useContext(Q),{matches:s}=c.useContext(ee),{pathname:a}=me(),o=JSON.stringify(en(s)),l=c.useRef(!1);return an(()=>{l.current=!0}),c.useCallback((u,d={})=>{if(Z(l.current,sn),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=tn(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:se([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,a,e])}c.createContext(null);function on(){let{matches:e}=c.useContext(ee),t=e[e.length-1];return t?t.params:{}}function Ge(e,{relative:t}={}){let{matches:n}=c.useContext(ee),{pathname:s}=me(),a=JSON.stringify(en(n));return c.useMemo(()=>tn(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function qa(e,t){return ln(e,t)}function ln(e,t,n,s){var y;_(We(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=c.useContext(Q),{matches:o}=c.useContext(ee),l=o[o.length-1],i=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let v=f&&f.path||"";cn(u,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let h=me(),g;if(t){let v=typeof t=="string"?Te(t):t;_(d==="/"||((y=v.pathname)==null?void 0:y.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=h;let b=g.pathname||"/",w=b;if(d!=="/"){let v=d.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Xr(e,{pathname:w});Z(f||m!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Z(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=Za(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:se([d,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:se([d,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,s);return t&&p?c.createElement(Ue.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},p):p}function Ka(){let e=no(),t=Ba(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=c.createElement(c.Fragment,null,c.createElement("p",null,"💿 Hey developer 👋"),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:o},"ErrorBoundary")," or"," ",c.createElement("code",{style:o},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:a},n):null,l)}var Ya=c.createElement(Ka,null),Ja=class extends c.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?c.createElement(ee.Provider,{value:this.props.routeContext},c.createElement(Bt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xa({routeContext:e,match:t,children:n}){let s=c.useContext(Ae);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),c.createElement(ee.Provider,{value:e},n)}function Za(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);_(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,i=-1;if(n)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(i=u),d.route.id){let{loaderData:f,errors:h}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||g){l=!0,i>=0?a=a.slice(0,i+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let h,g=!1,b=null,w=null;n&&(h=o&&d.route.id?o[d.route.id]:void 0,b=d.route.errorElement||Ya,l&&(i<0&&f===0?(cn("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):i===f&&(g=!0,w=d.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,f+1)),p=()=>{let y;return h?y=b:g?y=w:d.route.Component?y=c.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=u,c.createElement(Xa,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?c.createElement(Ja,{location:n.location,revalidation:n.revalidation,component:b,error:h,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}function Wt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qa(e){let t=c.useContext(Ae);return _(t,Wt(e)),t}function eo(e){let t=c.useContext(ot);return _(t,Wt(e)),t}function to(e){let t=c.useContext(ee);return _(t,Wt(e)),t}function Gt(e){let t=to(e),n=t.matches[t.matches.length-1];return _(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ro(){return Gt("useRouteId")}function no(){var s;let e=c.useContext(Bt),t=eo("useRouteError"),n=Gt("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function so(){let{router:e}=Qa("useNavigate"),t=Gt("useNavigate"),n=c.useRef(!1);return an(()=>{n.current=!0}),c.useCallback(async(a,o={})=>{Z(n.current,sn),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var pr={};function cn(e,t,n){!t&&!pr[e]&&(pr[e]=!0,Z(!1,n))}c.memo(ao);function ao({routes:e,future:t,state:n}){return ln(e,void 0,n,t)}function we(e){_(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oo({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){_(!We(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),i=c.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Te(n));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:g="default"}=n,b=c.useMemo(()=>{let w=oe(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:h,key:g},navigationType:s}},[l,u,d,f,h,g,s]);return Z(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:c.createElement(Q.Provider,{value:i},c.createElement(Ue.Provider,{children:t,value:b}))}function io({children:e,location:t}){return qa(At(e),t)}function At(e,t=[]){let n=[];return c.Children.forEach(e,(s,a)=>{if(!c.isValidElement(s))return;let o=[...t,a];if(s.type===c.Fragment){n.push.apply(n,At(s.props.children,o));return}_(s.type===we,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=At(s.props.children,o)),n.push(l)}),n}var Ze="get",Qe="application/x-www-form-urlencoded";function it(e){return e!=null&&typeof e.tagName=="string"}function lo(e){return it(e)&&e.tagName.toLowerCase()==="button"}function co(e){return it(e)&&e.tagName.toLowerCase()==="form"}function uo(e){return it(e)&&e.tagName.toLowerCase()==="input"}function fo(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mo(e,t){return e.button===0&&(!t||t==="_self")&&!fo(e)}var He=null;function ho(){if(He===null)try{new FormData(document.createElement("form"),0),He=!1}catch{He=!0}return He}var po=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xt(e){return e!=null&&!po.has(e)?(Z(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qe}"`),null):e}function go(e,t){let n,s,a,o,l;if(co(e)){let i=e.getAttribute("action");s=i?oe(i,t):null,n=e.getAttribute("method")||Ze,a=xt(e.getAttribute("enctype"))||Qe,o=new FormData(e)}else if(lo(e)||uo(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||i.getAttribute("action");if(s=u?oe(u,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Ze,a=xt(e.getAttribute("formenctype"))||xt(i.getAttribute("enctype"))||Qe,o=new FormData(i,e),!ho()){let{name:d,type:f,value:h}=e;if(f==="image"){let g=d?`${d}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else d&&o.append(d,h)}}else{if(it(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ze,s=null,a=Qe,l=e}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xo(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&oe(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function vo(e,t){if(e.id in t)return t[e.id];try{let n=await xa(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yo(e){return e!=null&&typeof e.page=="string"}function bo(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function jo(e,t,n){let s=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await vo(o,n);return l.links?l.links():[]}return[]}));return Eo(s.flat(1).filter(bo).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function gr(e,t,n,s,a,o){let l=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,i=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return o==="assets"?t.filter((u,d)=>l(u,d)||i(u,d)):o==="data"?t.filter((u,d)=>{var h;let f=s.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(l(u,d)||i(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function wo(e,t,{includeHydrateFallback:n}={}){return No(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function No(e){return[...new Set(e)]}function Co(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function Eo(e,t){let n=new Set,s=new Set(t);return e.reduce((a,o)=>{if(t&&!yo(o)&&o.as==="script"&&o.href&&s.has(o.href))return a;let i=JSON.stringify(Co(o));return n.has(i)||(n.add(i),a.push({key:i,link:o})),a},[])}function dn(){let e=c.useContext(Ae);return Vt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function So(){let e=c.useContext(ot);return Vt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ht=c.createContext(void 0);Ht.displayName="FrameworkContext";function un(){let e=c.useContext(Ht);return Vt(e,"You must render this element inside a <HydratedRouter> element"),e}function Ro(e,t){let n=c.useContext(Ht),[s,a]=c.useState(!1),[o,l]=c.useState(!1),{onFocus:i,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:h}=t,g=c.useRef(null);c.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let m=y=>{y.forEach(v=>{l(v.isIntersecting)})},p=new IntersectionObserver(m,{threshold:.5});return g.current&&p.observe(g.current),()=>{p.disconnect()}}},[e]),c.useEffect(()=>{if(s){let m=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(m)}}},[s]);let b=()=>{a(!0)},w=()=>{a(!1),l(!1)};return n?e!=="intent"?[o,g,{}]:[o,g,{onFocus:$e(i,b),onBlur:$e(u,w),onMouseEnter:$e(d,b),onMouseLeave:$e(f,w),onTouchStart:$e(h,b)}]:[!1,g,{}]}function $e(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Po({page:e,...t}){let{router:n}=dn(),s=c.useMemo(()=>Xr(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?c.createElement(Io,{page:e,matches:s,...t}):null}function ko(e){let{manifest:t,routeModules:n}=un(),[s,a]=c.useState([]);return c.useEffect(()=>{let o=!1;return jo(e,t,n).then(l=>{o||a(l)}),()=>{o=!0}},[e,t,n]),s}function Io({page:e,matches:t,...n}){let s=me(),{manifest:a,routeModules:o}=un(),{basename:l}=dn(),{loaderData:i,matches:u}=So(),d=c.useMemo(()=>gr(e,t,u,a,s,"data"),[e,t,u,a,s]),f=c.useMemo(()=>gr(e,t,u,a,s,"assets"),[e,t,u,a,s]),h=c.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,m=!1;if(t.forEach(y=>{var N;let v=a.routes[y.route.id];!v||!v.hasLoader||(!d.some(C=>C.route.id===y.route.id)&&y.route.id in i&&((N=o[y.route.id])!=null&&N.shouldRevalidate)||v.hasClientLoader?m=!0:w.add(y.route.id))}),w.size===0)return[];let p=xo(e,l,"data");return m&&w.size>0&&p.searchParams.set("_routes",t.filter(y=>w.has(y.route.id)).map(y=>y.route.id).join(",")),[p.pathname+p.search]},[l,i,s,a,d,t,e,o]),g=c.useMemo(()=>wo(f,a),[f,a]),b=ko(f);return c.createElement(c.Fragment,null,h.map(w=>c.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),g.map(w=>c.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:m})=>c.createElement("link",{key:w,...m})))}function To(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var fn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fn&&(window.__reactRouterVersion="7.7.1")}catch{}function Ao({basename:e,children:t,window:n}){let s=c.useRef();s.current==null&&(s.current=va({window:n,v5Compat:!0}));let a=s.current,[o,l]=c.useState({action:a.action,location:a.location}),i=c.useCallback(u=>{c.startTransition(()=>l(u))},[l]);return c.useLayoutEffect(()=>a.listen(i),[a,i]),c.createElement(oo,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var mn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=c.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:i,target:u,to:d,preventScrollReset:f,viewTransition:h,...g},b){let{basename:w}=c.useContext(Q),m=typeof d=="string"&&mn.test(d),p,y=!1;if(typeof d=="string"&&m&&(p=d,fn))try{let j=new URL(window.location.href),P=d.startsWith("//")?new URL(j.protocol+d):new URL(d),I=oe(P.pathname,w);P.origin===j.origin&&I!=null?d=I+P.search+P.hash:y=!0}catch{Z(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Va(d,{relative:a}),[N,C,k]=Ro(s,g),S=Mo(d,{replace:l,state:i,target:u,preventScrollReset:f,relative:a,viewTransition:h});function x(j){t&&t(j),j.defaultPrevented||S(j)}let E=c.createElement("a",{...g,...k,href:p||v,onClick:y||o?t:x,ref:To(b,C),target:u,"data-discover":!m&&n==="render"?"true":void 0});return N&&!m?c.createElement(c.Fragment,null,E,c.createElement(Po,{page:v})):E});fe.displayName="Link";var Do=c.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:i,children:u,...d},f){let h=Ge(l,{relative:d.relative}),g=me(),b=c.useContext(ot),{navigator:w,basename:m}=c.useContext(Q),p=b!=null&&Bo(h)&&i===!0,y=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,v=g.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(v=v.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&m&&(N=oe(N,m)||N);const C=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=v===y||!a&&v.startsWith(y)&&v.charAt(C)==="/",S=N!=null&&(N===y||!a&&N.startsWith(y)&&N.charAt(y.length)==="/"),x={isActive:k,isPending:S,isTransitioning:p},E=k?t:void 0,j;typeof s=="function"?j=s(x):j=[s,k?"active":null,S?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(x):o;return c.createElement(fe,{...d,"aria-current":E,className:j,ref:f,style:P,to:l,viewTransition:i},typeof u=="function"?u(x):u)});Do.displayName="NavLink";var Lo=c.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:o,method:l=Ze,action:i,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:h,...g},b)=>{let w=Fo(),m=zo(i,{relative:d}),p=l.toLowerCase()==="get"?"get":"post",y=typeof i=="string"&&mn.test(i),v=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let C=N.nativeEvent.submitter,k=(C==null?void 0:C.getAttribute("formmethod"))||l;w(C||N.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:a,state:o,relative:d,preventScrollReset:f,viewTransition:h})};return c.createElement("form",{ref:b,method:p,action:m,onSubmit:s?u:v,...g,"data-discover":!y&&e==="render"?"true":void 0})});Lo.displayName="Form";function Oo(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hn(e){let t=c.useContext(Ae);return _(t,Oo(e)),t}function Mo(e,{target:t,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let i=Ut(),u=me(),d=Ge(e,{relative:o});return c.useCallback(f=>{if(mo(f,t)){f.preventDefault();let h=n!==void 0?n:ze(u)===ze(d);i(e,{replace:h,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,i,d,n,s,t,e,a,o,l])}var $o=0,_o=()=>`__${String(++$o)}__`;function Fo(){let{router:e}=hn("useSubmit"),{basename:t}=c.useContext(Q),n=ro();return c.useCallback(async(s,a={})=>{let{action:o,method:l,encType:i,formData:u,body:d}=go(s,t);if(a.navigate===!1){let f=a.fetcherKey||_o();await e.fetch(f,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||l,formEncType:a.encType||i,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||l,formEncType:a.encType||i,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function zo(e,{relative:t}={}){let{basename:n}=c.useContext(Q),s=c.useContext(ee);_(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...Ge(e||".",{relative:t})},l=me();if(e==null){o.search=l.search;let i=new URLSearchParams(o.search),u=i.getAll("index");if(u.some(f=>f==="")){i.delete("index"),u.filter(h=>h).forEach(h=>i.append("index",h));let f=i.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:se([n,o.pathname])),ze(o)}function Bo(e,{relative:t}={}){let n=c.useContext(nn);_(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=hn("useViewTransitionState"),a=Ge(e,{relative:t});if(!n.isTransitioning)return!1;let o=oe(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=oe(n.nextLocation.pathname,s)||n.nextLocation.pathname;return rt(a.pathname,l)!=null||rt(a.pathname,o)!=null}const Uo={theme:"system",setTheme:()=>null},Wo=c.createContext(Uo);function Dt({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...s}){const[a,o]=c.useState(()=>localStorage.getItem(n)||t);c.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),a==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(u);return}i.classList.add(a)},[a]);const l={theme:a,setTheme:i=>{localStorage.setItem(n,i),o(i)}};return r.jsx(Wo.Provider,{...s,value:l,children:e})}function xr(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pn(...e){return t=>{let n=!1;const s=e.map(a=>{const o=xr(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():xr(e[a],null)}}}}function H(...e){return c.useCallback(pn(...e),e)}function Be(e){const t=Go(e),n=c.forwardRef((s,a)=>{const{children:o,...l}=s,i=c.Children.toArray(o),u=i.find(Ho);if(u){const d=u.props.children,f=i.map(h=>h===u?c.Children.count(d)>1?c.Children.only(null):c.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...l,ref:a,children:c.isValidElement(d)?c.cloneElement(d,void 0,f):null})}return r.jsx(t,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var gn=Be("Slot");function Go(e){const t=c.forwardRef((n,s)=>{const{children:a,...o}=n;if(c.isValidElement(a)){const l=Ko(a),i=qo(o,a.props);return a.type!==c.Fragment&&(i.ref=s?pn(s,l):l),c.cloneElement(a,i)}return c.Children.count(a)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xn=Symbol("radix.slottable");function Vo(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=xn,t}function Ho(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xn}function qo(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const u=o(...i);return a(...i),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function Ko(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function vn(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=vn(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function yn(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=vn(e))&&(s&&(s+=" "),s+=t);return s}const vr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,yr=yn,qt=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return yr(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(d=>{const f=n==null?void 0:n[d],h=o==null?void 0:o[d];if(f===null)return null;const g=vr(f)||vr(h);return a[d][g]}),i=n&&Object.entries(n).reduce((d,f)=>{let[h,g]=f;return g===void 0||(d[h]=g),d},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:g,...b}=f;return Object.entries(b).every(w=>{let[m,p]=w;return Array.isArray(p)?p.includes({...o,...i}[m]):{...o,...i}[m]===p})?[...d,h,g]:d},[]);return yr(e,l,u,n==null?void 0:n.class,n==null?void 0:n.className)},Kt="-",Yo=e=>{const t=Xo(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const i=l.split(Kt);return i[0]===""&&i.length!==1&&i.shift(),bn(i,t)||Jo(l)},getConflictingClassGroupIds:(l,i)=>{const u=n[l]||[];return i&&s[l]?[...u,...s[l]]:u}}},bn=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?bn(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(Kt);return(l=t.validators.find(({validator:i})=>i(o)))==null?void 0:l.classGroupId},br=/^\[(.+)\]$/,Jo=e=>{if(br.test(e)){const t=br.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Xo=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return Qo(Object.entries(e.classGroups),n).forEach(([o,l])=>{Lt(l,s,o,t)}),s},Lt=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:jr(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(Zo(a)){Lt(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,l])=>{Lt(l,jr(t,o),n,s)})})},jr=(e,t)=>{let n=e;return t.split(Kt).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},Zo=e=>e.isThemeGetter,Qo=(e,t)=>t?e.map(([n,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,i])=>[t+l,i])):o);return[n,a]}):e,ei=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(o,l)=>{n.set(o,l),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return a(o,l),l},set(o,l){n.has(o)?n.set(o,l):a(o,l)}}},jn="!",ti=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],o=t.length,l=i=>{const u=[];let d=0,f=0,h;for(let p=0;p<i.length;p++){let y=i[p];if(d===0){if(y===a&&(s||i.slice(p,p+o)===t)){u.push(i.slice(f,p)),f=p+o;continue}if(y==="/"){h=p;continue}}y==="["?d++:y==="]"&&d--}const g=u.length===0?i:i.substring(f),b=g.startsWith(jn),w=b?g.substring(1):g,m=h&&h>f?h-f:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:m}};return n?i=>n({className:i,parseClassName:l}):l},ri=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},ni=e=>({cache:ei(e.cacheSize),parseClassName:ti(e),...Yo(e)}),si=/\s+/,ai=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],l=e.trim().split(si);let i="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{modifiers:f,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:b}=n(d);let w=!!b,m=s(w?g.substring(0,b):g);if(!m){if(!w){i=d+(i.length>0?" "+i:i);continue}if(m=s(g),!m){i=d+(i.length>0?" "+i:i);continue}w=!1}const p=ri(f).join(":"),y=h?p+jn:p,v=y+m;if(o.includes(v))continue;o.push(v);const N=a(m,w);for(let C=0;C<N.length;++C){const k=N[C];o.push(y+k)}i=d+(i.length>0?" "+i:i)}return i};function oi(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wn(t))&&(s&&(s+=" "),s+=n);return s}const wn=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=wn(e[s]))&&(n&&(n+=" "),n+=t);return n};function ii(e,...t){let n,s,a,o=l;function l(u){const d=t.reduce((f,h)=>h(f),e());return n=ni(d),s=n.cache.get,a=n.cache.set,o=i,i(u)}function i(u){const d=s(u);if(d)return d;const f=ai(u,n);return a(u,f),f}return function(){return o(oi.apply(null,arguments))}}const L=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Nn=/^\[(?:([a-z-]+):)?(.+)\]$/i,li=/^\d+\/\d+$/,ci=new Set(["px","full","screen"]),di=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ui=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,re=e=>Ee(e)||ci.has(e)||li.test(e),le=e=>De(e,"length",wi),Ee=e=>!!e&&!Number.isNaN(Number(e)),vt=e=>De(e,"number",Ee),_e=e=>!!e&&Number.isInteger(Number(e)),pi=e=>e.endsWith("%")&&Ee(e.slice(0,-1)),A=e=>Nn.test(e),ce=e=>di.test(e),gi=new Set(["length","size","percentage"]),xi=e=>De(e,gi,Cn),vi=e=>De(e,"position",Cn),yi=new Set(["image","url"]),bi=e=>De(e,yi,Ci),ji=e=>De(e,"",Ni),Fe=()=>!0,De=(e,t,n)=>{const s=Nn.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},wi=e=>ui.test(e)&&!fi.test(e),Cn=()=>!1,Ni=e=>mi.test(e),Ci=e=>hi.test(e),Ei=()=>{const e=L("colors"),t=L("spacing"),n=L("blur"),s=L("brightness"),a=L("borderColor"),o=L("borderRadius"),l=L("borderSpacing"),i=L("borderWidth"),u=L("contrast"),d=L("grayscale"),f=L("hueRotate"),h=L("invert"),g=L("gap"),b=L("gradientColorStops"),w=L("gradientColorStopPositions"),m=L("inset"),p=L("margin"),y=L("opacity"),v=L("padding"),N=L("saturate"),C=L("scale"),k=L("sepia"),S=L("skew"),x=L("space"),E=L("translate"),j=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",A,t],R=()=>[A,t],B=()=>["",re,le],J=()=>["auto",Ee,A],he=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ht=()=>["start","end","center","between","around","evenly","stretch"],Me=()=>["","0",A],ar=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Ee,A];return{cacheSize:500,separator:":",theme:{colors:[Fe],spacing:[re,le],blur:["none","",ce,A],brightness:te(),borderColor:[e],borderRadius:["none","","full",ce,A],borderSpacing:R(),borderWidth:B(),contrast:te(),grayscale:Me(),hueRotate:te(),invert:Me(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[pi,le],inset:I(),margin:I(),opacity:te(),padding:R(),saturate:te(),scale:te(),sepia:Me(),skew:te(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",A]}],container:["container"],columns:[{columns:[ce]}],"break-after":[{"break-after":ar()}],"break-before":[{"break-before":ar()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...he(),A]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_e,A]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",A]}],grow:[{grow:Me()}],shrink:[{shrink:Me()}],order:[{order:["first","last","none",_e,A]}],"grid-cols":[{"grid-cols":[Fe]}],"col-start-end":[{col:["auto",{span:["full",_e,A]},A]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[Fe]}],"row-start-end":[{row:["auto",{span:[_e,A]},A]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",A]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",A]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...ht()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ht(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ht(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",A,t]}],"min-w":[{"min-w":[A,t,"min","max","fit"]}],"max-w":[{"max-w":[A,t,"none","full","min","max","fit","prose",{screen:[ce]},ce]}],h:[{h:[A,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[A,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[A,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[A,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ce,le]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vt]}],"font-family":[{font:[Fe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",A]}],"line-clamp":[{"line-clamp":["none",Ee,vt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",re,A]}],"list-image":[{"list-image":["none",A]}],"list-style-type":[{list:["none","disc","decimal",A]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",re,le]}],"underline-offset":[{"underline-offset":["auto",re,A]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",A]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",A]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...he(),vi]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xi]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bi]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[re,A]}],"outline-w":[{outline:[re,le]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[re,le]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ce,ji]}],"shadow-color":[{shadow:[Fe]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ce,A]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",A]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",A]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",A]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[_e,A]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",A]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",A]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",A]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[re,le,vt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Si=ii(Ei);function D(...e){return Si(yn(e))}const Yt=qt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function T({className:e,variant:t,size:n,asChild:s=!1,...a}){const o=s?gn:"button";return r.jsx(o,{"data-slot":"button",className:D(Yt({variant:t,size:n,className:e})),...a})}const Ri=qt("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function M({className:e,variant:t,asChild:n=!1,...s}){const a=n?gn:"span";return r.jsx(a,{"data-slot":"badge",className:D(Ri({variant:t}),e),...s})}function F({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:D("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function K({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:D("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function ne({className:e,...t}){return r.jsx("h4",{"data-slot":"card-title",className:D("leading-none",e),...t})}function G({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:D("px-6 [&:last-child]:pb-6",e),...t})}const Pi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Ne(e){const[t,n]=c.useState(!1),s=()=>{n(!0)},{src:a,alt:o,style:l,className:i,...u}=e;return t?r.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:l,children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx("img",{src:Pi,alt:"Error loading image",...u,"data-original-url":a})})}):r.jsx("img",{src:a,alt:o,className:i,style:l,...u,onError:s})}function ki({item:e,onTagClick:t,onCategoryClick:n}){const[s,a]=c.useState(0),[o,l]=c.useState(!1),i=u=>{if(!e.photos.length)return;const d=u.currentTarget.getBoundingClientRect(),f=u.clientX-d.left,h=d.width,g=Math.floor(f/h*e.photos.length);a(Math.max(0,Math.min(g,e.photos.length-1)))};return r.jsxs(F,{className:"h-full flex flex-col transition-all duration-200 hover:shadow-lg",children:[r.jsx(K,{className:"p-0",children:r.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden rounded-t-lg cursor-pointer",onMouseMove:i,onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1),a(0)},children:[r.jsx(Ne,{src:e.photos.length>0?e.photos[s]||e.photos[0]:"/placeholder-image.jpg",alt:e.title,className:"w-full h-full object-cover transition-all duration-300"}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsx(M,{variant:"secondary",className:"bg-white/90 text-primary cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:u=>{u.stopPropagation(),n==null||n(e.category)},children:e.category})}),e.photos.length>1&&o&&r.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1",children:e.photos.map((u,d)=>r.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-200 ${d===s?"bg-white scale-110":"bg-white/50 hover:bg-white/75"}`},d))})]})}),r.jsxs(G,{className:"flex-1 p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"line-clamp-2 leading-tight",children:e.title}),r.jsx("span",{className:"text-muted-foreground text-sm shrink-0",children:e.year})]}),r.jsx("p",{className:"text-muted-foreground text-sm line-clamp-3 leading-relaxed",children:e.description})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,4).map((u,d)=>r.jsx(M,{variant:"outline",className:"text-xs cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>t==null?void 0:t(u),children:u},d)),e.tags.length>4&&r.jsxs(M,{variant:"outline",className:"text-xs cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-foreground hover:scale-105 active:scale-95 active:transition-none select-none",onClick:()=>{const u=e.tags.slice(4).join(", ");alert(`Остальные теги: ${u}`)},children:["+",e.tags.length-4]})]})})]})]})}function U({className:e,type:t,...n}){return r.jsx("input",{type:t,"data-slot":"input",className:D("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var Ii=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],z=Ii.reduce((e,t)=>{const n=Be(`Primitive.${t}`),s=c.forwardRef((a,o)=>{const{asChild:l,...i}=a,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Ti(e,t){e&&Wr.flushSync(()=>e.dispatchEvent(t))}var Ai="Label",En=c.forwardRef((e,t)=>r.jsx(z.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));En.displayName=Ai;var Di=En;function $({className:e,...t}){return r.jsx(Di,{"data-slot":"label",className:D("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function W(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Li(e,t){const n=c.createContext(t),s=o=>{const{children:l,...i}=o,u=c.useMemo(()=>i,Object.values(i));return r.jsx(n.Provider,{value:u,children:l})};s.displayName=e+"Provider";function a(o){const l=c.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function ve(e,t=[]){let n=[];function s(o,l){const i=c.createContext(l),u=n.length;n=[...n,l];const d=h=>{var y;const{scope:g,children:b,...w}=h,m=((y=g==null?void 0:g[e])==null?void 0:y[u])||i,p=c.useMemo(()=>w,Object.values(w));return r.jsx(m.Provider,{value:p,children:b})};d.displayName=o+"Provider";function f(h,g){var m;const b=((m=g==null?void 0:g[e])==null?void 0:m[u])||i,w=c.useContext(b);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=n.map(l=>c.createContext(l));return function(i){const u=(i==null?void 0:i[e])||o;return c.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return a.scopeName=e,[s,Oi(a,...t)]}function Oi(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((i,{useScope:u,scopeName:d})=>{const h=u(o)[`__scope${d}`];return{...i,...h}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var ke=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},Mi=Gr[" useInsertionEffect ".trim().toString()]||ke;function lt({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,o,l]=$i({defaultProp:t,onChange:n}),i=e!==void 0,u=i?e:a;{const f=c.useRef(e!==void 0);c.useEffect(()=>{const h=f.current;h!==i&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=i},[i,s])}const d=c.useCallback(f=>{var h;if(i){const g=_i(f)?f(e):f;g!==e&&((h=l.current)==null||h.call(l,g))}else o(f)},[i,e,o,l]);return[u,d]}function $i({defaultProp:e,onChange:t}){const[n,s]=c.useState(e),a=c.useRef(n),o=c.useRef(t);return Mi(()=>{o.current=t},[t]),c.useEffect(()=>{var l;a.current!==n&&((l=o.current)==null||l.call(o,n),a.current=n)},[n,a]),[n,s,o]}function _i(e){return typeof e=="function"}function Fi(e,t){return c.useReducer((n,s)=>t[n][s]??n,e)}var Le=e=>{const{present:t,children:n}=e,s=zi(t),a=typeof n=="function"?n({present:s.isPresent}):c.Children.only(n),o=H(s.ref,Bi(a));return typeof n=="function"||s.isPresent?c.cloneElement(a,{ref:o}):null};Le.displayName="Presence";function zi(e){const[t,n]=c.useState(),s=c.useRef(null),a=c.useRef(e),o=c.useRef("none"),l=e?"mounted":"unmounted",[i,u]=Fi(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const d=qe(s.current);o.current=i==="mounted"?d:"none"},[i]),ke(()=>{const d=s.current,f=a.current;if(f!==e){const g=o.current,b=qe(d);e?u("MOUNT"):b==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&g!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),ke(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=b=>{const m=qe(s.current).includes(b.animationName);if(b.target===t&&m&&(u("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},g=b=>{b.target===t&&(o.current=qe(s.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:c.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function qe(e){return(e==null?void 0:e.animationName)||"none"}function Bi(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ui=Gr[" useId ".trim().toString()]||(()=>{}),Wi=0;function Se(e){const[t,n]=c.useState(Ui());return ke(()=>{e||n(s=>s??String(Wi++))},[e]),e||(t?`radix-${t}`:"")}var ct="Collapsible",[Gi,eu]=ve(ct),[Vi,Jt]=Gi(ct),Sn=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:l,...i}=e,[u,d]=lt({prop:s,defaultProp:a??!1,onChange:l,caller:ct});return r.jsx(Vi,{scope:n,disabled:o,contentId:Se(),open:u,onOpenToggle:c.useCallback(()=>d(f=>!f),[d]),children:r.jsx(z.div,{"data-state":Zt(u),"data-disabled":o?"":void 0,...i,ref:t})})});Sn.displayName=ct;var Rn="CollapsibleTrigger",Pn=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,a=Jt(Rn,n);return r.jsx(z.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Zt(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:W(e.onClick,a.onOpenToggle)})});Pn.displayName=Rn;var Xt="CollapsibleContent",kn=c.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Jt(Xt,e.__scopeCollapsible);return r.jsx(Le,{present:n||a.open,children:({present:o})=>r.jsx(Hi,{...s,ref:t,present:o})})});kn.displayName=Xt;var Hi=c.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:a,...o}=e,l=Jt(Xt,n),[i,u]=c.useState(s),d=c.useRef(null),f=H(t,d),h=c.useRef(0),g=h.current,b=c.useRef(0),w=b.current,m=l.open||i,p=c.useRef(m),y=c.useRef(void 0);return c.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),ke(()=>{const v=d.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const N=v.getBoundingClientRect();h.current=N.height,b.current=N.width,p.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),u(s)}},[l.open,s]),r.jsx(z.div,{"data-state":Zt(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!m,...o,ref:f,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:m&&a})});function Zt(e){return e?"open":"closed"}var qi=Sn;function wr({...e}){return r.jsx(qi,{"data-slot":"collapsible",...e})}function Ki({...e}){return r.jsx(Pn,{"data-slot":"collapsible-trigger",...e})}function Yi({...e}){return r.jsx(kn,{"data-slot":"collapsible-content",...e})}function Ji({onSearch:e,availableTags:t,availableCategories:n,initialFilters:s}){var C,k;const[a,o]=c.useState((s==null?void 0:s.title)||""),[l,i]=c.useState(((C=s==null?void 0:s.yearFrom)==null?void 0:C.toString())||""),[u,d]=c.useState(((k=s==null?void 0:s.yearTo)==null?void 0:k.toString())||""),[f,h]=c.useState((s==null?void 0:s.tags)||[]),[g,b]=c.useState((s==null?void 0:s.category)||""),[w,m]=c.useState(!1);c.useEffect(()=>{var S,x;s&&(o(s.title||""),i(((S=s.yearFrom)==null?void 0:S.toString())||""),d(((x=s.yearTo)==null?void 0:x.toString())||""),h(s.tags||[]),b(s.category||""),(s.tags&&s.tags.length>0||s.category)&&m(!0))},[s]);const p=()=>{e({title:a,yearFrom:l?parseInt(l):null,yearTo:u?parseInt(u):null,tags:f,category:g})},y=S=>{h(x=>x.includes(S)?x.filter(E=>E!==S):[...x,S])},v=()=>{o(""),i(""),d(""),h([]),b(""),e({title:"",yearFrom:null,yearTo:null,tags:[],category:""})},N=a||l||u||f.length>0||g;return r.jsx(F,{className:"w-full",children:r.jsxs(G,{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(U,{placeholder:"Search by title...",value:a,onChange:S=>o(S.target.value),className:"pl-10",onKeyPress:S=>S.key==="Enter"&&p()})]}),r.jsx(wr,{open:w,onOpenChange:m,children:r.jsx(Ki,{asChild:!0,children:r.jsxs(T,{variant:"outline",className:"gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Filters",N&&r.jsx(M,{variant:"secondary",className:"ml-1 px-1.5 py-0.5 text-xs",children:[a&&"title",l&&"year",f.length&&"tags",g&&"category"].filter(Boolean).length})]})})}),r.jsxs(T,{onClick:p,className:"gap-2",children:[r.jsx(or,{className:"w-4 h-4"}),"Search"]}),N&&r.jsxs(T,{variant:"outline",onClick:v,className:"gap-2",children:[r.jsx(q,{className:"w-4 h-4"}),"Clear"]})]}),r.jsx(wr,{open:w,onOpenChange:m,children:r.jsxs(Yi,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"year-from",children:"Year From"}),r.jsx(U,{id:"year-from",type:"number",placeholder:"1900",value:l,onChange:S=>i(S.target.value),min:"1800",max:"2030"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"year-to",children:"Year To"}),r.jsx(U,{id:"year-to",type:"number",placeholder:"2030",value:u,onChange:S=>d(S.target.value),min:"1800",max:"2030"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Filter by Category"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(S=>r.jsxs(T,{variant:g===S?"default":"outline",size:"sm",onClick:()=>b(g===S?"":S),className:"h-auto py-1 px-3 text-sm transition-all duration-200 hover:scale-105 active:scale-95 active:transition-none",children:[S,g===S&&r.jsx(q,{className:"w-3 h-3 ml-1"})]},S))}),g&&r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Selected Category:"}),r.jsxs(M,{variant:"secondary",className:"gap-1",children:[g,r.jsx("button",{onClick:()=>b(""),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:r.jsx(q,{className:"w-3 h-3"})})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Filter by Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(S=>r.jsxs(T,{variant:f.includes(S)?"default":"outline",size:"sm",onClick:()=>y(S),className:"h-auto py-1 px-3 text-sm transition-all duration-200 hover:scale-105 active:scale-95 active:transition-none",children:[S,f.includes(S)&&r.jsx(q,{className:"w-3 h-3 ml-1"})]},S))})]}),f.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{children:"Selected Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(S=>r.jsxs(M,{variant:"secondary",className:"gap-1",children:[S,r.jsx("button",{onClick:()=>y(S),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:r.jsx(q,{className:"w-3 h-3"})})]},S))})]})]})})]})})}const Xi="https://collepto.3451881.workers.dev/api";class Zi{constructor(t){pt(this,"baseUrl");pt(this,"sessionToken",null);this.baseUrl=t,this.sessionToken=localStorage.getItem("collepto_session")}async request(t,n={}){const s={...n,headers:{"Content-Type":"application/json",...n.headers}};this.sessionToken&&(s.headers={...s.headers,Authorization:`Bearer ${this.sessionToken}`});try{const a=await fetch(`${this.baseUrl}${t}`,s),o=await a.json();if(!a.ok)throw new Error(o.error||`HTTP ${a.status}`);return o}catch(a){return console.error("API request failed:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async login(t,n){const s=btoa(`${t}:${n}`),a=await this.request("/auth/login",{method:"POST",headers:{Authorization:`Basic ${s}`}});return a.success&&a.data&&(this.sessionToken=a.data.sessionId,localStorage.setItem("collepto_session",this.sessionToken)),a}async logout(){const t=await this.request("/auth/logout",{method:"POST"});return this.sessionToken=null,localStorage.removeItem("collepto_session"),t}async checkAuthStatus(){return this.request("/auth/status")}async getItems(){return this.request("/items")}async getItem(t){return this.request(`/items/${t}`)}async getItemBySlug(t){return this.request(`/items/slug/${t}`)}async searchItems(t){const n=new URLSearchParams;return t.q&&n.append("q",t.q),t.category&&n.append("category",t.category),t.yearFrom&&n.append("yearFrom",t.yearFrom.toString()),t.yearTo&&n.append("yearTo",t.yearTo.toString()),t.tags&&t.tags.length>0&&n.append("tags",t.tags.join(",")),this.request(`/items/search?${n.toString()}`)}async getBlogPosts(){return this.request("/blog")}async getBlogPost(t){return this.request(`/blog/${t}`)}async getBlogPostBySlug(t){return this.request(`/blog/slug/${t}`)}async createItem(t){return this.request("/admin/items",{method:"POST",body:JSON.stringify(t)})}async updateItem(t,n){return this.request(`/admin/items/${t}`,{method:"PUT",body:JSON.stringify(n)})}async deleteItem(t){return this.request(`/admin/items/${t}`,{method:"DELETE"})}async createBlogPost(t){return this.request("/admin/blog",{method:"POST",body:JSON.stringify(t)})}async updateBlogPost(t,n){return this.request(`/admin/blog/${t}`,{method:"PUT",body:JSON.stringify(n)})}async deleteBlogPost(t){return this.request(`/admin/blog/${t}`,{method:"DELETE"})}async publishBlogPost(t,n){return this.request(`/admin/blog/${t}/publish`,{method:"POST",body:JSON.stringify({published:n})})}async uploadPhoto(t,n){const s=new FormData;s.append("photo",n);const a={method:"POST",body:s};this.sessionToken&&(a.headers={Authorization:`Bearer ${this.sessionToken}`});try{const o=await fetch(`${this.baseUrl}/admin/photos/item/${t}/upload`,a),l=await o.json();if(!o.ok)throw new Error(l.error||`HTTP ${o.status}`);return l}catch(o){return console.error("Photo upload failed:",o),{success:!1,error:o instanceof Error?o.message:"Upload failed"}}}async uploadPhotoBoth(t,n,s){const a=new FormData;a.append("original",n),a.append("processed",s);const o={method:"POST",body:a};this.sessionToken&&(o.headers={Authorization:`Bearer ${this.sessionToken}`});try{const l=await fetch(`${this.baseUrl}/admin/photos/item/${t}/upload-both`,o),i=await l.json();if(!l.ok)throw new Error(i.error||`HTTP ${l.status}`);return i}catch(l){return console.error("Photo upload (both) failed:",l),{success:!1,error:l instanceof Error?l.message:"Upload failed"}}}async deletePhoto(t){return this.request(`/admin/photos/${t}`,{method:"DELETE"})}async exportData(){return this.request("/admin/export")}async downloadExport(){if(!this.sessionToken)throw new Error("Authentication required");const t=await fetch(`${this.baseUrl}/admin/export/download`,{headers:{Authorization:`Bearer ${this.sessionToken}`}});if(!t.ok)throw new Error("Export download failed");const n=await t.blob(),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`collepto_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}isAuthenticated(){return!!this.sessionToken}clearSession(){this.sessionToken=null,localStorage.removeItem("collepto_session")}}const O=new Zi(Xi),Qi={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"ts",ч:"ch",ш:"sh",щ:"sch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"Y",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Sch",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya"};function el(e){return e.split("").map(t=>Qi[t]||t).join("")}function tl(e){return el(e).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}function In(e,t){const n=tl(e),s=t.substring(0,4);return!n||n.length<2?`item_${s}`:`${n}_${s}`}function rl(e,t){return`/items/${In(e,t)}`}function Nr(e,t){return`/blog/${In(e,t)}`}function nl(){const[e,t]=c.useState([]),[n,s]=c.useState([]),[a,o]=c.useState(!0),[l,i]=c.useState(null),[u,d]=c.useState({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),f=()=>{const m=e.flatMap(p=>p.tags);return[...new Set(m)].sort()},h=()=>{const m=e.map(p=>p.category).filter(Boolean);return[...new Set(m)].sort()};c.useEffect(()=>{(async()=>{try{o(!0),i(null);const p=await O.getItems();p.success&&p.data?(t(p.data),s(p.data)):i(p.error||"Failed to load items")}catch(p){console.error("Error loading items:",p),i("Failed to load items")}finally{o(!1)}})()},[]);const g=m=>{d(m);let p=e;if(m.title){const y=m.title.toLowerCase();p=p.filter(v=>v.title.toLowerCase().includes(y)||v.description.toLowerCase().includes(y))}m.yearFrom&&(p=p.filter(y=>y.year>=m.yearFrom)),m.yearTo&&(p=p.filter(y=>y.year<=m.yearTo)),m.tags.length>0&&(p=p.filter(y=>m.tags.some(v=>y.tags.includes(v)))),m.category&&(p=p.filter(y=>y.category===m.category)),s(p)},b=m=>{const p={...u,tags:[m]};g(p)},w=m=>{const p={...u,category:m};g(p)};return a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading collection..."})]})}):l?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",l]}),r.jsx(T,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"My Collection"}),r.jsxs("p",{className:"text-muted-foreground",children:[n.length," ",n.length===1?"item":"items",n.length!==e.length&&` of ${e.length} total`]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{to:"/blog",children:r.jsx(T,{variant:"outline",children:"Blog"})}),r.jsx(fe,{to:"/admin",children:r.jsx(T,{variant:"outline",size:"icon",children:r.jsx(Xs,{className:"h-4 w-4"})})})]})]}),r.jsx("div",{className:"mb-8",children:r.jsx(Ji,{availableTags:f(),availableCategories:h(),onSearch:g,initialFilters:u})}),(u.title||u.yearFrom||u.yearTo||u.tags.length>0||u.category)&&r.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[u.title&&r.jsxs(M,{variant:"secondary",children:["Title: ",u.title]}),u.yearFrom&&r.jsxs(M,{variant:"secondary",children:["From: ",u.yearFrom]}),u.yearTo&&r.jsxs(M,{variant:"secondary",children:["To: ",u.yearTo]}),u.tags.map(m=>r.jsxs(M,{variant:"secondary",children:["Tag: ",m]},m)),u.category&&r.jsxs(M,{variant:"secondary",children:["Category: ",u.category]}),r.jsx(T,{variant:"ghost",size:"sm",onClick:()=>g({title:"",yearFrom:null,yearTo:null,tags:[],category:""}),children:"Clear all"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(m=>r.jsx(fe,{to:rl(m.title,m.id),className:"block transition-transform hover:scale-105",children:r.jsx(ki,{item:m,onTagClick:b,onCategoryClick:w})},m.id))}),n.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No items found"}),r.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search filters"})]})]})})}function Ie(e){const t=c.useRef(e);return c.useEffect(()=>{t.current=e}),c.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function sl(e,t=globalThis==null?void 0:globalThis.document){const n=Ie(e);c.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var al="DismissableLayer",Ot="dismissableLayer.update",ol="dismissableLayer.pointerDownOutside",il="dismissableLayer.focusOutside",Cr,Tn=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),An=c.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:i,...u}=e,d=c.useContext(Tn),[f,h]=c.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=c.useState({}),w=H(t,x=>h(x)),m=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(p),v=f?m.indexOf(f):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=v>=y,k=dl(x=>{const E=x.target,j=[...d.branches].some(P=>P.contains(E));!C||j||(a==null||a(x),l==null||l(x),x.defaultPrevented||i==null||i())},g),S=ul(x=>{const E=x.target;[...d.branches].some(P=>P.contains(E))||(o==null||o(x),l==null||l(x),x.defaultPrevented||i==null||i())},g);return sl(x=>{v===d.layers.size-1&&(s==null||s(x),!x.defaultPrevented&&i&&(x.preventDefault(),i()))},g),c.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Cr=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Er(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Cr)}},[f,g,n,d]),c.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Er())},[f,d]),c.useEffect(()=>{const x=()=>b({});return document.addEventListener(Ot,x),()=>document.removeEventListener(Ot,x)},[]),r.jsx(z.div,{...u,ref:w,style:{pointerEvents:N?C?"auto":"none":void 0,...e.style},onFocusCapture:W(e.onFocusCapture,S.onFocusCapture),onBlurCapture:W(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:W(e.onPointerDownCapture,k.onPointerDownCapture)})});An.displayName=al;var ll="DismissableLayerBranch",cl=c.forwardRef((e,t)=>{const n=c.useContext(Tn),s=c.useRef(null),a=H(t,s);return c.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),r.jsx(z.div,{...e,ref:a})});cl.displayName=ll;function dl(e,t=globalThis==null?void 0:globalThis.document){const n=Ie(e),s=c.useRef(!1),a=c.useRef(()=>{});return c.useEffect(()=>{const o=i=>{if(i.target&&!s.current){let u=function(){Dn(ol,n,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function ul(e,t=globalThis==null?void 0:globalThis.document){const n=Ie(e),s=c.useRef(!1);return c.useEffect(()=>{const a=o=>{o.target&&!s.current&&Dn(il,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Er(){const e=new CustomEvent(Ot);document.dispatchEvent(e)}function Dn(e,t,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?Ti(a,o):a.dispatchEvent(o)}var yt="focusScope.autoFocusOnMount",bt="focusScope.autoFocusOnUnmount",Sr={bubbles:!1,cancelable:!0},fl="FocusScope",Ln=c.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[i,u]=c.useState(null),d=Ie(a),f=Ie(o),h=c.useRef(null),g=H(t,m=>u(m)),b=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(s){let m=function(N){if(b.paused||!i)return;const C=N.target;i.contains(C)?h.current=C:ue(h.current,{select:!0})},p=function(N){if(b.paused||!i)return;const C=N.relatedTarget;C!==null&&(i.contains(C)||ue(h.current,{select:!0}))},y=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&ue(i)};document.addEventListener("focusin",m),document.addEventListener("focusout",p);const v=new MutationObserver(y);return i&&v.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",p),v.disconnect()}}},[s,i,b.paused]),c.useEffect(()=>{if(i){Pr.add(b);const m=document.activeElement;if(!i.contains(m)){const y=new CustomEvent(yt,Sr);i.addEventListener(yt,d),i.dispatchEvent(y),y.defaultPrevented||(ml(vl(On(i)),{select:!0}),document.activeElement===m&&ue(i))}return()=>{i.removeEventListener(yt,d),setTimeout(()=>{const y=new CustomEvent(bt,Sr);i.addEventListener(bt,f),i.dispatchEvent(y),y.defaultPrevented||ue(m??document.body,{select:!0}),i.removeEventListener(bt,f),Pr.remove(b)},0)}}},[i,d,f,b]);const w=c.useCallback(m=>{if(!n&&!s||b.paused)return;const p=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(p&&y){const v=m.currentTarget,[N,C]=hl(v);N&&C?!m.shiftKey&&y===C?(m.preventDefault(),n&&ue(N,{select:!0})):m.shiftKey&&y===N&&(m.preventDefault(),n&&ue(C,{select:!0})):y===v&&m.preventDefault()}},[n,s,b.paused]);return r.jsx(z.div,{tabIndex:-1,...l,ref:g,onKeyDown:w})});Ln.displayName=fl;function ml(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(ue(s,{select:t}),document.activeElement!==n)return}function hl(e){const t=On(e),n=Rr(t,e),s=Rr(t.reverse(),e);return[n,s]}function On(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Rr(e,t){for(const n of e)if(!pl(n,{upTo:t}))return n}function pl(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function gl(e){return e instanceof HTMLInputElement&&"select"in e}function ue(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&gl(e)&&t&&e.select()}}var Pr=xl();function xl(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=kr(e,t),e.unshift(t)},remove(t){var n;e=kr(e,t),(n=e[0])==null||n.resume()}}}function kr(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function vl(e){return e.filter(t=>t.tagName!=="A")}var yl="Portal",Mn=c.forwardRef((e,t)=>{var i;const{container:n,...s}=e,[a,o]=c.useState(!1);ke(()=>o(!0),[]);const l=n||a&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return l?Ys.createPortal(r.jsx(z.div,{...s,ref:t}),l):null});Mn.displayName=yl;var jt=0;function bl(){c.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ir()),document.body.insertAdjacentElement("beforeend",e[1]??Ir()),jt++,()=>{jt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jt--}},[])}function Ir(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var X=function(){return X=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},X.apply(this,arguments)};function $n(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function jl(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var et="right-scroll-bar-position",tt="width-before-scroll-bar",wl="with-scroll-bars-hidden",Nl="--removed-body-scroll-bar-size";function wt(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Cl(e,t){var n=c.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var El=typeof window<"u"?c.useLayoutEffect:c.useEffect,Tr=new WeakMap;function Sl(e,t){var n=Cl(t||null,function(s){return e.forEach(function(a){return wt(a,s)})});return El(function(){var s=Tr.get(n);if(s){var a=new Set(s),o=new Set(e),l=n.current;a.forEach(function(i){o.has(i)||wt(i,null)}),o.forEach(function(i){a.has(i)||wt(i,l)})}Tr.set(n,e)},[e]),n}function Rl(e){return e}function Pl(e,t){t===void 0&&(t=Rl);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=t(o,s);return n.push(l),function(){n=n.filter(function(i){return i!==l})}},assignSyncMedium:function(o){for(s=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){s=!0;var l=[];if(n.length){var i=n;n=[],i.forEach(o),l=n}var u=function(){var f=l;l=[],f.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){l.push(f),d()},filter:function(f){return l=l.filter(f),n}}}};return a}function kl(e){e===void 0&&(e={});var t=Pl(null);return t.options=X({async:!0,ssr:!1},e),t}var _n=function(e){var t=e.sideCar,n=$n(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return c.createElement(s,X({},n))};_n.isSideCarExport=!0;function Il(e,t){return e.useMedium(t),_n}var Fn=kl(),Nt=function(){},dt=c.forwardRef(function(e,t){var n=c.useRef(null),s=c.useState({onScrollCapture:Nt,onWheelCapture:Nt,onTouchMoveCapture:Nt}),a=s[0],o=s[1],l=e.forwardProps,i=e.children,u=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,g=e.sideCar,b=e.noRelative,w=e.noIsolation,m=e.inert,p=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,N=e.gapMode,C=$n(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=g,S=Sl([n,t]),x=X(X({},C),a);return c.createElement(c.Fragment,null,f&&c.createElement(k,{sideCar:Fn,removeScrollBar:d,shards:h,noRelative:b,noIsolation:w,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:N}),l?c.cloneElement(c.Children.only(i),X(X({},x),{ref:S})):c.createElement(v,X({},x,{className:u,ref:S}),i))});dt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dt.classNames={fullWidth:tt,zeroRight:et};var Ar,Tl=function(){if(Ar)return Ar;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Al(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Tl();return t&&e.setAttribute("nonce",t),e}function Dl(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ll(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ol=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Al())&&(Dl(t,n),Ll(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ml=function(){var e=Ol();return function(t,n){c.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},zn=function(){var e=Ml(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},$l={left:0,top:0,right:0,gap:0},Ct=function(e){return parseInt(e||"",10)||0},_l=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Ct(n),Ct(s),Ct(a)]},Fl=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $l;var t=_l(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},zl=zn(),Re="data-scroll-locked",Bl=function(e,t,n,s){var a=e.left,o=e.top,l=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(wl,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(i,"px ").concat(s,`;
  }
  body[`).concat(Re,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(et,` {
    right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(tt,` {
    margin-right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(et," .").concat(et,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(tt," .").concat(tt,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Re,`] {
    `).concat(Nl,": ").concat(i,`px;
  }
`)},Dr=function(){var e=parseInt(document.body.getAttribute(Re)||"0",10);return isFinite(e)?e:0},Ul=function(){c.useEffect(function(){return document.body.setAttribute(Re,(Dr()+1).toString()),function(){var e=Dr()-1;e<=0?document.body.removeAttribute(Re):document.body.setAttribute(Re,e.toString())}},[])},Wl=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;Ul();var o=c.useMemo(function(){return Fl(a)},[a]);return c.createElement(zl,{styles:Bl(o,!t,a,n?"":"!important")})},Mt=!1;if(typeof window<"u")try{var Ke=Object.defineProperty({},"passive",{get:function(){return Mt=!0,!0}});window.addEventListener("test",Ke,Ke),window.removeEventListener("test",Ke,Ke)}catch{Mt=!1}var ye=Mt?{passive:!1}:!1,Gl=function(e){return e.tagName==="TEXTAREA"},Bn=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Gl(e)&&n[t]==="visible")},Vl=function(e){return Bn(e,"overflowY")},Hl=function(e){return Bn(e,"overflowX")},Lr=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=Un(e,s);if(a){var o=Wn(e,s),l=o[1],i=o[2];if(l>i)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},ql=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Kl=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Un=function(e,t){return e==="v"?Vl(t):Hl(t)},Wn=function(e,t){return e==="v"?ql(t):Kl(t)},Yl=function(e,t){return e==="h"&&t==="rtl"?-1:1},Jl=function(e,t,n,s,a){var o=Yl(e,window.getComputedStyle(t).direction),l=o*s,i=n.target,u=t.contains(i),d=!1,f=l>0,h=0,g=0;do{if(!i)break;var b=Wn(e,i),w=b[0],m=b[1],p=b[2],y=m-p-o*w;(w||y)&&Un(e,i)&&(h+=y,g+=w);var v=i.parentNode;i=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!u&&i!==document.body||u&&(t.contains(i)||t===i));return(f&&(a&&Math.abs(h)<1||!a&&l>h)||!f&&(a&&Math.abs(g)<1||!a&&-l>g))&&(d=!0),d},Ye=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Or=function(e){return[e.deltaX,e.deltaY]},Mr=function(e){return e&&"current"in e?e.current:e},Xl=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Zl=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ql=0,be=[];function ec(e){var t=c.useRef([]),n=c.useRef([0,0]),s=c.useRef(),a=c.useState(Ql++)[0],o=c.useState(zn)[0],l=c.useRef(e);c.useEffect(function(){l.current=e},[e]),c.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=jl([e.lockRef.current],(e.shards||[]).map(Mr),!0).filter(Boolean);return m.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=c.useCallback(function(m,p){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!l.current.allowPinchZoom;var y=Ye(m),v=n.current,N="deltaX"in m?m.deltaX:v[0]-y[0],C="deltaY"in m?m.deltaY:v[1]-y[1],k,S=m.target,x=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in m&&x==="h"&&S.type==="range")return!1;var E=Lr(x,S);if(!E)return!0;if(E?k=x:(k=x==="v"?"h":"v",E=Lr(x,S)),!E)return!1;if(!s.current&&"changedTouches"in m&&(N||C)&&(s.current=k),!k)return!0;var j=s.current||k;return Jl(j,p,m,j==="h"?N:C,!0)},[]),u=c.useCallback(function(m){var p=m;if(!(!be.length||be[be.length-1]!==o)){var y="deltaY"in p?Or(p):Ye(p),v=t.current.filter(function(k){return k.name===p.type&&(k.target===p.target||p.target===k.shadowParent)&&Xl(k.delta,y)})[0];if(v&&v.should){p.cancelable&&p.preventDefault();return}if(!v){var N=(l.current.shards||[]).map(Mr).filter(Boolean).filter(function(k){return k.contains(p.target)}),C=N.length>0?i(p,N[0]):!l.current.noIsolation;C&&p.cancelable&&p.preventDefault()}}},[]),d=c.useCallback(function(m,p,y,v){var N={name:m,delta:p,target:y,should:v,shadowParent:tc(y)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(C){return C!==N})},1)},[]),f=c.useCallback(function(m){n.current=Ye(m),s.current=void 0},[]),h=c.useCallback(function(m){d(m.type,Or(m),m.target,i(m,e.lockRef.current))},[]),g=c.useCallback(function(m){d(m.type,Ye(m),m.target,i(m,e.lockRef.current))},[]);c.useEffect(function(){return be.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",u,ye),document.addEventListener("touchmove",u,ye),document.addEventListener("touchstart",f,ye),function(){be=be.filter(function(m){return m!==o}),document.removeEventListener("wheel",u,ye),document.removeEventListener("touchmove",u,ye),document.removeEventListener("touchstart",f,ye)}},[]);var b=e.removeScrollBar,w=e.inert;return c.createElement(c.Fragment,null,w?c.createElement(o,{styles:Zl(a)}):null,b?c.createElement(Wl,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function tc(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const rc=Il(Fn,ec);var Gn=c.forwardRef(function(e,t){return c.createElement(dt,X({},e,{ref:t,sideCar:rc}))});Gn.classNames=dt.classNames;const nc=Gn;var sc=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},je=new WeakMap,Je=new WeakMap,Xe={},Et=0,Vn=function(e){return e&&(e.host||Vn(e.parentNode))},ac=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Vn(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},oc=function(e,t,n,s){var a=ac(t,Array.isArray(e)?e:[e]);Xe[n]||(Xe[n]=new WeakMap);var o=Xe[n],l=[],i=new Set,u=new Set(a),d=function(h){!h||i.has(h)||(i.add(h),d(h.parentNode))};a.forEach(d);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(g){if(i.has(g))f(g);else try{var b=g.getAttribute(s),w=b!==null&&b!=="false",m=(je.get(g)||0)+1,p=(o.get(g)||0)+1;je.set(g,m),o.set(g,p),l.push(g),m===1&&w&&Je.set(g,!0),p===1&&g.setAttribute(n,"true"),w||g.setAttribute(s,"true")}catch(y){console.error("aria-hidden: cannot operate on ",g,y)}})};return f(t),i.clear(),Et++,function(){l.forEach(function(h){var g=je.get(h)-1,b=o.get(h)-1;je.set(h,g),o.set(h,b),g||(Je.has(h)||h.removeAttribute(s),Je.delete(h)),b||h.removeAttribute(n)}),Et--,Et||(je=new WeakMap,je=new WeakMap,Je=new WeakMap,Xe={})}},ic=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=t||sc(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),oc(s,a,n,"aria-hidden")):function(){return null}},ut="Dialog",[Hn,qn]=ve(ut),[lc,Y]=Hn(ut),Kn=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,i=c.useRef(null),u=c.useRef(null),[d,f]=lt({prop:s,defaultProp:a??!1,onChange:o,caller:ut});return r.jsx(lc,{scope:t,triggerRef:i,contentRef:u,contentId:Se(),titleId:Se(),descriptionId:Se(),open:d,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(h=>!h),[f]),modal:l,children:n})};Kn.displayName=ut;var Yn="DialogTrigger",Jn=c.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Y(Yn,n),o=H(t,a.triggerRef);return r.jsx(z.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tr(a.open),...s,ref:o,onClick:W(e.onClick,a.onOpenToggle)})});Jn.displayName=Yn;var Qt="DialogPortal",[cc,Xn]=Hn(Qt,{forceMount:void 0}),Zn=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=Y(Qt,t);return r.jsx(cc,{scope:t,forceMount:n,children:c.Children.map(s,l=>r.jsx(Le,{present:n||o.open,children:r.jsx(Mn,{asChild:!0,container:a,children:l})}))})};Zn.displayName=Qt;var nt="DialogOverlay",Qn=c.forwardRef((e,t)=>{const n=Xn(nt,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Y(nt,e.__scopeDialog);return o.modal?r.jsx(Le,{present:s||o.open,children:r.jsx(uc,{...a,ref:t})}):null});Qn.displayName=nt;var dc=Be("DialogOverlay.RemoveScroll"),uc=c.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Y(nt,n);return r.jsx(nc,{as:dc,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(z.div,{"data-state":tr(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),pe="DialogContent",es=c.forwardRef((e,t)=>{const n=Xn(pe,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Y(pe,e.__scopeDialog);return r.jsx(Le,{present:s||o.open,children:o.modal?r.jsx(fc,{...a,ref:t}):r.jsx(mc,{...a,ref:t})})});es.displayName=pe;var fc=c.forwardRef((e,t)=>{const n=Y(pe,e.__scopeDialog),s=c.useRef(null),a=H(t,n.contentRef,s);return c.useEffect(()=>{const o=s.current;if(o)return ic(o)},[]),r.jsx(ts,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:W(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&o.preventDefault()}),onFocusOutside:W(e.onFocusOutside,o=>o.preventDefault())})}),mc=c.forwardRef((e,t)=>{const n=Y(pe,e.__scopeDialog),s=c.useRef(!1),a=c.useRef(!1);return r.jsx(ts,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,i;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(s.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),ts=c.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=e,i=Y(pe,n),u=c.useRef(null),d=H(t,u);return bl(),r.jsxs(r.Fragment,{children:[r.jsx(Ln,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(An,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":tr(i.open),...l,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(pc,{titleId:i.titleId}),r.jsx(xc,{contentRef:u,descriptionId:i.descriptionId})]})]})}),er="DialogTitle",rs=c.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Y(er,n);return r.jsx(z.h2,{id:a.titleId,...s,ref:t})});rs.displayName=er;var ns="DialogDescription",ss=c.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Y(ns,n);return r.jsx(z.p,{id:a.descriptionId,...s,ref:t})});ss.displayName=ns;var as="DialogClose",os=c.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Y(as,n);return r.jsx(z.button,{type:"button",...s,ref:t,onClick:W(e.onClick,()=>a.onOpenChange(!1))})});os.displayName=as;function tr(e){return e?"open":"closed"}var is="DialogTitleWarning",[hc,ls]=Li(is,{contentName:pe,titleName:er,docsSlug:"dialog"}),pc=({titleId:e})=>{const t=ls(is),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},gc="DialogDescriptionWarning",xc=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ls(gc).contentName}}.`;return c.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},cs=Kn,vc=Jn,ds=Zn,us=Qn,fs=es,yc=rs,bc=ss,ft=os;function jc({...e}){return r.jsx(cs,{"data-slot":"dialog",...e})}function wc({...e}){return r.jsx(ds,{"data-slot":"dialog-portal",...e})}function Nc({...e}){return r.jsx(ft,{"data-slot":"dialog-close",...e})}function Cc({className:e,...t}){return r.jsx(us,{"data-slot":"dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ec({className:e,children:t,...n}){return r.jsxs(wc,{"data-slot":"dialog-portal",children:[r.jsx(Cc,{}),r.jsxs(fs,{"data-slot":"dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,r.jsxs(ft,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[r.jsx(q,{}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Sc({photos:e,itemTitle:t}){const[n,s]=c.useState(null);if(!e||e.length===0)return null;const a=d=>{s(d)},o=()=>{s(null)},l=()=>{n!==null&&s((n+1)%e.length)},i=()=>{n!==null&&s(n===0?e.length-1:n-1)},u=d=>{n!==null&&(d.key==="ArrowLeft"?i():d.key==="ArrowRight"?l():d.key==="Escape"&&o())};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Фотографии (",e.length,")"]}),e.length===1?r.jsxs("div",{className:"relative w-full aspect-[4/3] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(0),children:[r.jsx(Ne,{src:e[0],alt:`${t} - фото 1`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:r.jsx("div",{className:"bg-black/50 text-white px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Увеличить"})})]}):e.length===2?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map((d,f)=>r.jsxs("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(f),children:[r.jsx(Ne,{src:d,alt:`${t} - фото ${f+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},f))}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.slice(0,6).map((d,f)=>r.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group",onClick:()=>a(f),children:[r.jsx(Ne,{src:d,alt:`${t} - фото ${f+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),f===5&&e.length>6&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsxs("span",{className:"text-white text-lg font-semibold",children:["+",e.length-6]})}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},f))})]}),r.jsx(jc,{open:n!==null,onOpenChange:d=>!d&&o(),children:r.jsx(Ec,{className:"max-w-[95vw] max-h-[95vh] p-0 border-0 bg-black/90",onKeyDown:u,children:r.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[r.jsx(Nc,{asChild:!0,children:r.jsx(T,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20",children:r.jsx(q,{className:"w-4 h-4"})})}),e.length>1&&n!==null&&r.jsxs(r.Fragment,{children:[r.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20",onClick:i,children:r.jsx(_t,{className:"w-6 h-6"})}),r.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20",onClick:l,children:r.jsx(Vr,{className:"w-6 h-6"})})]}),n!==null&&r.jsxs("div",{className:"relative max-w-full max-h-full",children:[r.jsx(Ne,{src:e[n],alt:`${t} - фото ${n+1}`,className:"max-w-full max-h-[90vh] object-contain"}),r.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded text-sm",children:[n+1," из ",e.length]})]})]})})})]})}function Rc({item:e,onBack:t}){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(T,{variant:"outline",onClick:t,className:"gap-2",children:[r.jsx(ae,{className:"w-4 h-4"}),"Назад к коллекции"]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Sc,{photos:e.photos,itemTitle:e.title}),r.jsx("div",{className:"flex justify-start",children:r.jsx(M,{variant:"secondary",children:e.category})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(F,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ft,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Год"}),r.jsx("p",{className:"font-medium",children:e.year})]})]})}),e.condition&&r.jsx(F,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zs,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Состояние"}),r.jsx("p",{className:"font-medium text-sm",children:e.condition})]})]})}),e.value&&r.jsx(F,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qs,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Стоимость"}),r.jsx("p",{className:"font-medium text-sm",children:e.value})]})]})}),e.acquisition&&r.jsx(F,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ea,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Приобретение"}),r.jsx("p",{className:"font-medium text-sm",children:e.acquisition})]})]})})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-3xl leading-tight",children:e.title}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"mb-2",children:"Краткое описание"}),r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]}),e.fullDescription&&r.jsxs("div",{children:[r.jsx("h3",{className:"mb-2",children:"Подробное описание"}),r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.fullDescription})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Теги"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((n,s)=>r.jsx(M,{variant:"outline",children:n},s))})]})]})})]})]})}function Pc(){const{slug:e}=on(),t=Ut(),[n,s]=c.useState(null),[a,o]=c.useState(!0),[l,i]=c.useState(null);c.useEffect(()=>{(async()=>{if(!e){i("Invalid item URL"),o(!1);return}try{o(!0),i(null);const f=await O.getItemBySlug(e);f.success&&f.data?s(f.data):i(f.error||"Item not found")}catch(f){console.error("Error loading item:",f),i("Failed to load item")}finally{o(!1)}})()},[e]),c.useEffect(()=>{if(n){document.title=`${n.title} - Collepto`;const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content",n.description||`${n.title} from ${n.year}`)}return()=>{document.title="Collepto";const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content","Personal collection management system")}},[n]);const u=()=>{t("/")};return a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading item..."})]})}):l||!n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",l||"Item not found"]}),r.jsxs(T,{onClick:u,children:[r.jsx(ae,{className:"mr-2 h-4 w-4"}),"Back to Collection"]})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(T,{variant:"outline",onClick:u,className:"mb-4",children:[r.jsx(ae,{className:"mr-2 h-4 w-4"}),"Back to Collection"]})}),r.jsx(Rc,{item:n,onBack:u})]})})}const St=5;function kc({posts:e}){const[t,n]=c.useState(1),s=Math.ceil(e.length/St),a=(t-1)*St,o=e.slice(a,a+St),l=i=>new Date(i).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return e.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground text-lg",children:"No blog posts available"})}):r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"space-y-6",children:o.map(i=>r.jsxs(F,{className:"transition-all duration-200 hover:shadow-lg",children:[r.jsx(K,{className:"pb-4",children:r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(M,{variant:"outline",className:"text-xs",children:i.category}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[r.jsx(Ft,{className:"w-4 h-4"}),l(i.publishDate)]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[r.jsx(Hr,{className:"w-4 h-4"}),i.readTime," мин"]})]}),r.jsx("h3",{className:"text-xl font-semibold hover:text-primary transition-colors",children:r.jsx(fe,{to:Nr(i.title,i.id),className:"hover:underline",children:i.title})})]})})}),r.jsxs(G,{className:"space-y-4",children:[r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.excerpt}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:i.relatedItems.length>0&&`${i.relatedItems.length} связанных предмета`}),r.jsx(fe,{to:Nr(i.title,i.id),children:r.jsxs(T,{variant:"outline",size:"sm",className:"gap-2",children:["Читать полностью",r.jsx(ta,{className:"w-4 h-4"})]})})]})]})]},i.id))}),s>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(i=>Math.max(1,i-1)),disabled:t===1,className:"gap-2",children:[r.jsx(_t,{className:"w-4 h-4"}),"Предыдущая"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:s},(i,u)=>u+1).map(i=>r.jsx(T,{variant:t===i?"default":"outline",size:"sm",onClick:()=>n(i),className:"w-8 h-8 p-0",children:i},i))}),r.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(i=>Math.min(s,i+1)),disabled:t===s,className:"gap-2",children:["Следующая",r.jsx(Vr,{className:"w-4 h-4"})]})]})]})}function Ic(){const[e,t]=c.useState([]),[n,s]=c.useState(!0),[a,o]=c.useState(null);return c.useEffect(()=>{(async()=>{try{s(!0),o(null);const i=await O.getBlogPosts();i.success&&i.data?t(i.data):o(i.error||"Failed to load blog posts")}catch(i){console.error("Error loading blog posts:",i),o("Failed to load blog posts")}finally{s(!1)}})()},[]),n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading blog posts..."})]})}):a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",a]}),r.jsx(T,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"Blog"}),r.jsxs("p",{className:"text-muted-foreground",children:[e.length," ",e.length===1?"post":"posts"]})]}),r.jsx(fe,{to:"/",children:r.jsxs(T,{variant:"outline",children:[r.jsx(ae,{className:"mr-2 h-4 w-4"}),"Back to Collection"]})})]}),r.jsx(kc,{posts:e})]})})}function Tc({post:e,onBack:t}){if(!e)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"Пост не найден"}),r.jsxs(T,{variant:"outline",onClick:t,className:"mt-4",children:[r.jsx(ae,{className:"w-4 h-4 mr-2"}),"Назад к блогу"]})]});const n=s=>new Date(s).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs(T,{variant:"ghost",onClick:t,className:"gap-2",children:[r.jsx(ae,{className:"w-4 h-4"}),"Назад к блогу"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(M,{variant:"secondary",children:e.category}),r.jsx("h1",{className:"text-4xl font-bold leading-tight",children:e.title}),r.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ft,{className:"w-4 h-4"}),r.jsx("span",{children:n(e.publishDate)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"w-4 h-4"}),r.jsxs("span",{children:[e.readTime," мин. чтения"]})]})]})]}),r.jsx(F,{children:r.jsx(G,{className:"prose prose-gray max-w-none pt-6",children:r.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})})}),e.relatedItems.length>0&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("p",{className:"text-muted-foreground",children:["В этом посте упоминается ",e.relatedItems.length," ",e.relatedItems.length===1?"предмет":"предметов"," из коллекции"]})}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t",children:[r.jsxs(T,{variant:"outline",onClick:t,className:"gap-2",children:[r.jsx(_t,{className:"w-4 h-4"}),"К списку постов"]}),r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Понравился пост? Поделитесь им!"})}),r.jsx("div",{className:"w-32"})," "]})]})}function Ac(){const{slug:e}=on(),t=Ut(),[n,s]=c.useState(null),[a,o]=c.useState(!0),[l,i]=c.useState(null);c.useEffect(()=>{(async()=>{if(!e){i("Invalid blog post URL"),o(!1);return}try{o(!0),i(null);const f=await O.getBlogPostBySlug(e);f.success&&f.data?s(f.data):i(f.error||"Blog post not found")}catch(f){console.error("Error loading blog post:",f),i("Failed to load blog post")}finally{o(!1)}})()},[e]),c.useEffect(()=>{if(n){document.title=`${n.title} - Collepto Blog`;const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content",n.excerpt)}return()=>{document.title="Collepto";const d=document.querySelector('meta[name="description"]');d&&d.setAttribute("content","Personal collection management system")}},[n]);const u=()=>{t("/blog")};return a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading blog post..."})]})}):l||!n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive text-lg mb-4",children:["Error: ",l||"Blog post not found"]}),r.jsxs(T,{onClick:u,children:[r.jsx(ae,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(T,{variant:"outline",onClick:u,className:"mb-4",children:[r.jsx(ae,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),r.jsx(Tc,{post:n,onBack:u})]})})}const Dc=qt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ge({className:e,variant:t,...n}){return r.jsx("div",{"data-slot":"alert",role:"alert",className:D(Dc({variant:t}),e),...n})}function xe({className:e,...t}){return r.jsx("div",{"data-slot":"alert-description",className:D("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Lc({onAuthSuccess:e}){const[t,n]=c.useState(""),[s,a]=c.useState(""),[o,l]=c.useState(!1),[i,u]=c.useState(null),[d,f]=c.useState(!0);c.useEffect(()=>{(async()=>{var b;try{const w=await O.checkAuthStatus();if(w.success&&((b=w.data)!=null&&b.authenticated)){e();return}}catch(w){console.error("Auth check failed:",w)}finally{f(!1)}})()},[e]);const h=async g=>{g.preventDefault(),l(!0),u(null);try{const b=await O.login(t,s);b.success?e():u(b.error||"Ошибка авторизации")}catch{u("Не удалось подключиться к серверу")}finally{l(!1)}};return d?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pt,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Проверка авторизации..."})]})}):r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:r.jsxs(F,{className:"w-full max-w-md",children:[r.jsx(K,{children:r.jsx(ne,{className:"text-center",children:"Админка Collepto"})}),r.jsx(G,{children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"username",children:"Логин"}),r.jsx(U,{id:"username",type:"text",value:t,onChange:g=>n(g.target.value),required:!0,disabled:o})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"password",children:"Пароль"}),r.jsx(U,{id:"password",type:"password",value:s,onChange:g=>a(g.target.value),required:!0,disabled:o})]}),i&&r.jsx(ge,{variant:"destructive",children:r.jsx(xe,{children:i})}),r.jsxs(T,{type:"submit",className:"w-full",disabled:o,children:[o&&r.jsx(Pt,{className:"w-4 h-4 mr-2 animate-spin"}),"Войти"]})]})})]})})}function Oc(e){const t=e+"CollectionProvider",[n,s]=ve(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:p,children:y}=m,v=de.useRef(null),N=de.useRef(new Map).current;return r.jsx(a,{scope:p,itemMap:N,collectionRef:v,children:y})};l.displayName=t;const i=e+"CollectionSlot",u=Be(i),d=de.forwardRef((m,p)=>{const{scope:y,children:v}=m,N=o(i,y),C=H(p,N.collectionRef);return r.jsx(u,{ref:C,children:v})});d.displayName=i;const f=e+"CollectionItemSlot",h="data-radix-collection-item",g=Be(f),b=de.forwardRef((m,p)=>{const{scope:y,children:v,...N}=m,C=de.useRef(null),k=H(p,C),S=o(f,y);return de.useEffect(()=>(S.itemMap.set(C,{ref:C,...N}),()=>void S.itemMap.delete(C))),r.jsx(g,{[h]:"",ref:k,children:v})});b.displayName=f;function w(m){const p=o(e+"CollectionConsumer",m);return de.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const N=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((S,x)=>N.indexOf(S.ref.current)-N.indexOf(x.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:l,Slot:d,ItemSlot:b},w,s]}var Mc=c.createContext(void 0);function ms(e){const t=c.useContext(Mc);return e||t||"ltr"}var Rt="rovingFocusGroup.onEntryFocus",$c={bubbles:!1,cancelable:!0},Ve="RovingFocusGroup",[$t,hs,_c]=Oc(Ve),[Fc,ps]=ve(Ve,[_c]),[zc,Bc]=Fc(Ve),gs=c.forwardRef((e,t)=>r.jsx($t.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx($t.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Uc,{...e,ref:t})})}));gs.displayName=Ve;var Uc=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,g=c.useRef(null),b=H(t,g),w=ms(o),[m,p]=lt({prop:l,defaultProp:i??null,onChange:u,caller:Ve}),[y,v]=c.useState(!1),N=Ie(d),C=hs(n),k=c.useRef(!1),[S,x]=c.useState(0);return c.useEffect(()=>{const E=g.current;if(E)return E.addEventListener(Rt,N),()=>E.removeEventListener(Rt,N)},[N]),r.jsx(zc,{scope:n,orientation:s,dir:w,loop:a,currentTabStopId:m,onItemFocus:c.useCallback(E=>p(E),[p]),onItemShiftTab:c.useCallback(()=>v(!0),[]),onFocusableItemAdd:c.useCallback(()=>x(E=>E+1),[]),onFocusableItemRemove:c.useCallback(()=>x(E=>E-1),[]),children:r.jsx(z.div,{tabIndex:y||S===0?-1:0,"data-orientation":s,...h,ref:b,style:{outline:"none",...e.style},onMouseDown:W(e.onMouseDown,()=>{k.current=!0}),onFocus:W(e.onFocus,E=>{const j=!k.current;if(E.target===E.currentTarget&&j&&!y){const P=new CustomEvent(Rt,$c);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const I=C().filter(V=>V.focusable),R=I.find(V=>V.active),B=I.find(V=>V.id===m),he=[R,B,...I].filter(Boolean).map(V=>V.ref.current);ys(he,f)}}k.current=!1}),onBlur:W(e.onBlur,()=>v(!1))})})}),xs="RovingFocusGroupItem",vs=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:l,...i}=e,u=Se(),d=o||u,f=Bc(xs,n),h=f.currentTabStopId===d,g=hs(n),{onFocusableItemAdd:b,onFocusableItemRemove:w,currentTabStopId:m}=f;return c.useEffect(()=>{if(s)return b(),()=>w()},[s,b,w]),r.jsx($t.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(z.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...i,ref:t,onMouseDown:W(e.onMouseDown,p=>{s?f.onItemFocus(d):p.preventDefault()}),onFocus:W(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:W(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=Vc(p,f.orientation,f.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let N=g().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")N.reverse();else if(y==="prev"||y==="next"){y==="prev"&&N.reverse();const C=N.indexOf(p.currentTarget);N=f.loop?Hc(N,C+1):N.slice(C+1)}setTimeout(()=>ys(N))}}),children:typeof l=="function"?l({isCurrentTabStop:h,hasTabStop:m!=null}):l})})});vs.displayName=xs;var Wc={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gc(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Vc(e,t,n){const s=Gc(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Wc[s]}function ys(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Hc(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var qc=gs,Kc=vs,mt="Tabs",[Yc,tu]=ve(mt,[ps]),bs=ps(),[Jc,rr]=Yc(mt),js=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:i,activationMode:u="automatic",...d}=e,f=ms(i),[h,g]=lt({prop:s,onChange:a,defaultProp:o??"",caller:mt});return r.jsx(Jc,{scope:n,baseId:Se(),value:h,onValueChange:g,orientation:l,dir:f,activationMode:u,children:r.jsx(z.div,{dir:f,"data-orientation":l,...d,ref:t})})});js.displayName=mt;var ws="TabsList",Ns=c.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=rr(ws,n),l=bs(n);return r.jsx(qc,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(z.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});Ns.displayName=ws;var Cs="TabsTrigger",Es=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,l=rr(Cs,n),i=bs(n),u=Ps(l.baseId,s),d=ks(l.baseId,s),f=s===l.value;return r.jsx(Kc,{asChild:!0,...i,focusable:!a,active:f,children:r.jsx(z.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...o,ref:t,onMouseDown:W(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?l.onValueChange(s):h.preventDefault()}),onKeyDown:W(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(s)}),onFocus:W(e.onFocus,()=>{const h=l.activationMode!=="manual";!f&&!a&&h&&l.onValueChange(s)})})})});Es.displayName=Cs;var Ss="TabsContent",Rs=c.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...l}=e,i=rr(Ss,n),u=Ps(i.baseId,s),d=ks(i.baseId,s),f=s===i.value,h=c.useRef(f);return c.useEffect(()=>{const g=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(g)},[]),r.jsx(Le,{present:a||f,children:({present:g})=>r.jsx(z.div,{"data-state":f?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:g&&o})})});Rs.displayName=Ss;function Ps(e,t){return`${e}-trigger-${t}`}function ks(e,t){return`${e}-content-${t}`}var Xc=js,Zc=Ns,Qc=Es,ed=Rs;function td({className:e,...t}){return r.jsx(Xc,{"data-slot":"tabs",className:D("flex flex-col gap-2",e),...t})}function rd({className:e,...t}){return r.jsx(Zc,{"data-slot":"tabs-list",className:D("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function $r({className:e,...t}){return r.jsx(Qc,{"data-slot":"tabs-trigger",className:D("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function _r({className:e,...t}){return r.jsx(ed,{"data-slot":"tabs-content",className:D("flex-1 outline-none",e),...t})}var Is="AlertDialog",[nd,ru]=ve(Is,[qn]),ie=qn(),Ts=e=>{const{__scopeAlertDialog:t,...n}=e,s=ie(t);return r.jsx(cs,{...s,...n,modal:!0})};Ts.displayName=Is;var sd="AlertDialogTrigger",ad=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ie(n);return r.jsx(vc,{...a,...s,ref:t})});ad.displayName=sd;var od="AlertDialogPortal",As=e=>{const{__scopeAlertDialog:t,...n}=e,s=ie(t);return r.jsx(ds,{...s,...n})};As.displayName=od;var id="AlertDialogOverlay",Ds=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ie(n);return r.jsx(us,{...a,...s,ref:t})});Ds.displayName=id;var Pe="AlertDialogContent",[ld,cd]=nd(Pe),dd=Vo("AlertDialogContent"),Ls=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,o=ie(n),l=c.useRef(null),i=H(t,l),u=c.useRef(null);return r.jsx(hc,{contentName:Pe,titleName:Os,docsSlug:"alert-dialog",children:r.jsx(ld,{scope:n,cancelRef:u,children:r.jsxs(fs,{role:"alertdialog",...o,...a,ref:i,onOpenAutoFocus:W(a.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=u.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(dd,{children:s}),r.jsx(fd,{contentRef:l})]})})})});Ls.displayName=Pe;var Os="AlertDialogTitle",Ms=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ie(n);return r.jsx(yc,{...a,...s,ref:t})});Ms.displayName=Os;var $s="AlertDialogDescription",_s=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ie(n);return r.jsx(bc,{...a,...s,ref:t})});_s.displayName=$s;var ud="AlertDialogAction",Fs=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=ie(n);return r.jsx(ft,{...a,...s,ref:t})});Fs.displayName=ud;var zs="AlertDialogCancel",Bs=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=cd(zs,n),o=ie(n),l=H(t,a);return r.jsx(ft,{...o,...s,ref:l})});Bs.displayName=zs;var fd=({contentRef:e})=>{const t=`\`${Pe}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Pe}\` by passing a \`${$s}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Pe}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},md=Ts,hd=As,pd=Ds,gd=Ls,xd=Fs,vd=Bs,yd=Ms,bd=_s;function jd({...e}){return r.jsx(md,{"data-slot":"alert-dialog",...e})}function wd({...e}){return r.jsx(hd,{"data-slot":"alert-dialog-portal",...e})}function Nd({className:e,...t}){return r.jsx(pd,{"data-slot":"alert-dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Cd({className:e,...t}){return r.jsxs(wd,{children:[r.jsx(Nd,{}),r.jsx(gd,{"data-slot":"alert-dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function Ed({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-header",className:D("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Sd({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-footer",className:D("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Rd({className:e,...t}){return r.jsx(yd,{"data-slot":"alert-dialog-title",className:D("text-lg font-semibold",e),...t})}function Pd({className:e,...t}){return r.jsx(bd,{"data-slot":"alert-dialog-description",className:D("text-muted-foreground text-sm",e),...t})}function kd({className:e,...t}){return r.jsx(xd,{className:D(Yt(),e),...t})}function Id({className:e,...t}){return r.jsx(vd,{className:D(Yt({variant:"outline"}),e),...t})}function Fr({className:e,...t}){return r.jsx("textarea",{"data-slot":"textarea",className:D("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var Td="Separator",zr="horizontal",Ad=["horizontal","vertical"],Us=c.forwardRef((e,t)=>{const{decorative:n,orientation:s=zr,...a}=e,o=Dd(s)?s:zr,i=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(z.div,{"data-orientation":o,...i,...a,ref:t})});Us.displayName=Td;function Dd(e){return Ad.includes(e)}var Ld=Us;function Od({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return r.jsx(Ld,{"data-slot":"separator-root",decorative:n,orientation:t,className:D("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}var nr="Progress",sr=100,[Md,nu]=ve(nr),[$d,_d]=Md(nr),Ws=c.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=Fd,...l}=e;(a||a===0)&&!Br(a)&&console.error(zd(`${a}`,"Progress"));const i=Br(a)?a:sr;s!==null&&!Ur(s,i)&&console.error(Bd(`${s}`,"Progress"));const u=Ur(s,i)?s:null,d=st(u)?o(u,i):void 0;return r.jsx($d,{scope:n,value:u,max:i,children:r.jsx(z.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":st(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":Hs(u,i),"data-value":u??void 0,"data-max":i,...l,ref:t})})});Ws.displayName=nr;var Gs="ProgressIndicator",Vs=c.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=_d(Gs,n);return r.jsx(z.div,{"data-state":Hs(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});Vs.displayName=Gs;function Fd(e,t){return`${Math.round(e/t*100)}%`}function Hs(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function st(e){return typeof e=="number"}function Br(e){return st(e)&&!isNaN(e)&&e>0}function Ur(e,t){return st(e)&&!isNaN(e)&&e<=t&&e>=0}function zd(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${sr}\`.`}function Bd(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${sr} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ud=Ws,Wd=Vs;function Gd({className:e,value:t,...n}){return r.jsx(Ud,{"data-slot":"progress",className:D("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:r.jsx(Wd,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function Vd({itemId:e,existingPhotos:t=[],onPhotosUpdated:n,maxPhotos:s=10}){const[a,o]=c.useState(!1),[l,i]=c.useState([]),[u,d]=c.useState(null),f=t.length+l.filter(x=>x.status==="success").length<s,h=s-t.length-l.filter(x=>x.status==="success").length,g=x=>{if(!x.type.startsWith("image/"))return"Файл должен быть изображением";const E=25*1024*1024;return x.size>E?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(x.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},b=async x=>new Promise((E,j)=>{const P=new Image;P.onload=()=>{try{let{width:R,height:B}=P;(R>1920||B>1920)&&(R>B?(B=B*1920/R,R=1920):(R=R*1920/B,B=1920));const J=document.createElement("canvas"),he=J.getContext("2d");if(!he)throw new Error("Canvas context not available");J.width=R,J.height=B,he.drawImage(P,0,0,R,B),J.toBlob(V=>{if(!V){j(new Error("Failed to process image"));return}const Oe=new File([V],x.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});console.log(`Image processed: ${x.size} → ${Oe.size} bytes (${Math.round(R)}x${Math.round(B)}px)`),E(Oe)},"image/jpeg",.8)}catch(I){console.error("Image processing error:",I),E(x)}},P.onerror=()=>{console.error("Failed to load image for processing"),E(x)},P.src=URL.createObjectURL(x)}),w=async x=>{i(E=>[...E,{file:x,progress:0,status:"uploading"}]);try{i(I=>I.map(R=>R.file===x?{...R,progress:10}:R));const E=await b(x);i(I=>I.map(R=>R.file===x?{...R,progress:20}:R));const j=setInterval(()=>{i(I=>I.map(R=>R.file===x&&R.status==="uploading"?{...R,progress:Math.min(R.progress+15,90)}:R))},300),P=await O.uploadPhotoBoth(e,x,E);if(clearInterval(j),P.success&&P.data)i(I=>I.map(R=>R.file===x?{...R,progress:100,status:"success",url:P.data.publicUrl,id:P.data.id}:R)),n==null||n();else throw new Error(P.error||"Ошибка загрузки")}catch(E){const j=E instanceof Error?E.message:"Ошибка загрузки";i(P=>P.map(I=>I.file===x?{...I,progress:0,status:"error",error:j}:I))}},m=c.useCallback(x=>{d(null);const E=Array.from(x);if(E.length>h){d(`Можно загрузить только ${h} фото. Максимум ${s} фото на предмет.`);return}const j=[],P=[];if(E.forEach(I=>{const R=g(I);R?P.push(`${I.name}: ${R}`):j.push(I)}),P.length>0){d(P.join(`
`));return}j.forEach(I=>{w(I)})},[e,h,s]),p=c.useCallback(x=>{x.preventDefault(),o(!0)},[]),y=c.useCallback(x=>{x.preventDefault(),o(!1)},[]),v=c.useCallback(x=>{x.preventDefault(),o(!1),f&&m(x.dataTransfer.files)},[f,m]),N=c.useCallback(x=>{x.target.files&&f&&m(x.target.files)},[f,m]),C=x=>{i(E=>E.filter(j=>j.file!==x))},k=x=>{i(E=>E.filter(j=>j.file!==x)),w(x)},S=async x=>{try{d(null);const E=await O.deletePhoto(x);E.success?n==null||n():d(E.error||"Ошибка удаления фото")}catch(E){d(E instanceof Error?E.message:"Ошибка удаления фото")}};return r.jsxs("div",{className:"space-y-4",children:[f&&r.jsx(F,{className:`border-2 border-dashed transition-colors ${a?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:p,onDragLeave:y,onDrop:v,children:r.jsx(G,{className:"p-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(qr,{className:"w-6 h-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Загрузите фотографии"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Можно загрузить ещё ",h," из ",s," фото"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:N,className:"hidden",id:`photo-upload-${e}`}),r.jsx("label",{htmlFor:`photo-upload-${e}`,children:r.jsx(T,{variant:"outline",className:"gap-2",asChild:!0,children:r.jsxs("span",{children:[r.jsx(zt,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Поддерживаемые форматы: JPEG, PNG, GIF, WebP, BMP, TIFF",r.jsx("br",{}),"Максимальный размер: 25MB"]})]})]})})}),u&&r.jsxs(ge,{variant:"destructive",children:[r.jsx(Ce,{className:"h-4 w-4"}),r.jsx(xe,{className:"whitespace-pre-line",children:u})]}),l.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium",children:"Загрузка файлов"}),l.map((x,E)=>r.jsx(F,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsxs("div",{className:"w-10 h-10 rounded bg-muted flex items-center justify-center",children:[x.status==="uploading"&&r.jsx(Pt,{className:"w-4 h-4 animate-spin"}),x.status==="success"&&r.jsx(ra,{className:"w-4 h-4 text-green-600"}),x.status==="error"&&r.jsx(Ce,{className:"w-4 h-4 text-red-600"})]}),r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium truncate",children:x.file.name}),r.jsx(M,{variant:x.status==="success"?"default":x.status==="error"?"destructive":"secondary",children:x.status==="uploading"?"Загрузка...":x.status==="success"?"Готово":"Ошибка"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[(x.file.size/1024/1024).toFixed(1)," MB"]}),x.status==="uploading"&&r.jsx(Gd,{value:x.progress,className:"h-1"}),x.status==="error"&&x.error&&r.jsx("p",{className:"text-xs text-red-600",children:x.error})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[x.status==="error"&&r.jsx(T,{variant:"outline",size:"sm",onClick:()=>k(x.file),children:"Повторить"}),r.jsx(T,{variant:"ghost",size:"sm",onClick:()=>C(x.file),children:r.jsx(q,{className:"w-4 h-4"})})]})]})})},E))]}),t.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium",children:["Загруженные фото (",t.length,")"]}),r.jsxs(M,{variant:"secondary",children:[t.length,"/",s]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(x=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"aspect-square overflow-hidden rounded-lg",children:r.jsx(Ne,{src:x.url,alt:x.filename,className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center",children:r.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>S(x.id),children:r.jsx(q,{className:"w-4 h-4"})})})]},x.id))})]}),!f&&r.jsxs(ge,{children:[r.jsx(Ce,{className:"h-4 w-4"}),r.jsxs(xe,{children:["Достигнут лимит в ",s," фотографий для этого предмета."]})]})]})}function Hd({photos:e,onPhotosChange:t,maxPhotos:n=10}){const[s,a]=c.useState(!1),[o,l]=c.useState(null),i=e.length<n,u=n-e.length,d=v=>{if(!v.type.startsWith("image/"))return"Файл должен быть изображением";const N=25*1024*1024;return v.size>N?"Размер файла не должен превышать 25MB":["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"].includes(v.type.toLowerCase())?null:"Неподдерживаемый формат изображения"},f=async v=>new Promise((N,C)=>{const k=new Image;k.onload=()=>{try{let{width:x,height:E}=k;(x>1920||E>1920)&&(x>E?(E=E*1920/x,x=1920):(x=x*1920/E,E=1920));const j=document.createElement("canvas"),P=j.getContext("2d");if(!P)throw new Error("Canvas context not available");j.width=x,j.height=E,P.drawImage(k,0,0,x,E),j.toBlob(I=>{if(!I){C(new Error("Failed to process image"));return}const R=new File([I],v.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});console.log(`Image processed: ${v.size} → ${R.size} bytes (${Math.round(x)}x${Math.round(E)}px)`),N(R)},"image/jpeg",.8)}catch(S){console.error("Image processing error:",S),N(v)}},k.onerror=()=>{console.error("Failed to load image for processing"),N(v)},k.src=URL.createObjectURL(v)}),h=c.useCallback(async v=>{l(null);const N=Array.from(v);if(N.length>u){l(`Можно загрузить только ${u} фото. Максимум ${n} фото на предмет.`);return}const C=[],k=[];if(N.forEach(S=>{const x=d(S);x?k.push(`${S.name}: ${x}`):C.push(S)}),k.length>0){l(k.join(`
`));return}try{const S=await Promise.all(C.map(async x=>{const E=await f(x);return{original:x,processed:E}}));t([...e,...S])}catch(S){console.error("Error processing images:",S),l("Ошибка обработки изображений. Попробуйте еще раз.")}},[e,t,u,n]),g=c.useCallback(v=>{v.preventDefault(),a(!0)},[]),b=c.useCallback(v=>{v.preventDefault(),a(!1)},[]),w=c.useCallback(v=>{v.preventDefault(),a(!1),i&&h(v.dataTransfer.files)},[i,h]),m=c.useCallback(v=>{v.target.files&&i&&h(v.target.files)},[i,h]),p=v=>{const N=e.filter((C,k)=>k!==v);t(N)},y=v=>URL.createObjectURL(v.processed);return r.jsxs("div",{className:"space-y-4",children:[i&&r.jsx(F,{className:`border-2 border-dashed transition-colors ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:g,onDragLeave:b,onDrop:w,children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"mx-auto w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(qr,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm",children:"Добавьте фотографии"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Перетащите файлы сюда или нажмите для выбора"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Можно добавить ещё ",u," из ",n," фото"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden",id:"photo-preview-upload"}),r.jsx("label",{htmlFor:"photo-preview-upload",children:r.jsx(T,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:r.jsxs("span",{children:[r.jsx(zt,{className:"w-4 h-4"}),"Выбрать файлы"]})})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"JPEG, PNG, GIF, WebP, BMP, TIFF · Макс. 25MB"})]})]})})}),o&&r.jsxs(ge,{variant:"destructive",children:[r.jsx(Ce,{className:"h-4 w-4"}),r.jsx(xe,{className:"whitespace-pre-line",children:o})]}),e.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium text-sm",children:["Выбранные фото (",e.length,")"]}),r.jsxs(M,{variant:"secondary",className:"text-xs",children:[e.length,"/",n]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:e.map((v,N)=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-muted",children:r.jsx("img",{src:y(v),alt:`Предпросмотр ${N+1}`,className:"w-full h-full object-cover",onLoad:C=>{URL.revokeObjectURL(C.target.src)}})}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center",children:r.jsx(T,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(N),children:r.jsx(q,{className:"w-4 h-4"})})}),r.jsx("div",{className:"absolute bottom-1 left-1 right-1 bg-black/60 text-white text-xs px-2 py-1 rounded truncate",children:v.original.name})]},N))})]}),!i&&r.jsxs(ge,{children:[r.jsx(Ce,{className:"h-4 w-4"}),r.jsxs(xe,{children:["Достигнут лимит в ",n," фотографий для этого предмета."]})]})]})}function qd({itemId:e,onSave:t,onCancel:n}){var E;const[s,a]=c.useState({title:"",description:"",fullDescription:"",year:new Date().getFullYear(),yearFrom:void 0,yearTo:void 0,country:"",organization:"",size:"",edition:"",series:"",tags:[],category:"",condition:"",acquisition:"",value:"",photos:[]}),[o,l]=c.useState(""),[i,u]=c.useState(!1),[d,f]=c.useState(!1),[h,g]=c.useState(null),[b,w]=c.useState({}),[m,p]=c.useState([]);c.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e){u(!0),g(null);try{const j=await O.getItem(e);j.success&&j.data?a(j.data):g(j.error||"Не удалось загрузить предмет")}catch{g("Ошибка загрузки предмета")}finally{u(!1)}}},v=()=>{var P,I;const j={};return(P=s.title)!=null&&P.trim()||(j.title="Название обязательно"),(I=s.category)!=null&&I.trim()||(j.category="Категория обязательна"),(!s.year||s.year<1800||s.year>2030)&&(j.year="Год должен быть между 1800 и 2030"),s.yearFrom&&s.yearTo&&s.yearFrom>s.yearTo&&(j.yearRange='Год "от" не может быть больше года "до"'),w(j),Object.keys(j).length===0},N=async()=>{var j;if(v()){f(!0),g(null);try{let P;if(e){if(P=await O.updateItem(e,s),P.success){const I=await O.getItem(e);I.success&&I.data&&t(I.data)}}else if(P=await O.createItem(s),P.success&&((j=P.data)!=null&&j.id)){const I=P.data.id;if(m.length>0)try{for(const B of m)await O.uploadPhotoBoth(I,B.original,B.processed);p([])}catch(B){console.error("Photo upload error:",B),g("Предмет создан, но не все фото загружены. Вы можете добавить их позже.")}const R=await O.getItem(I);R.success&&R.data&&t(R.data)}P.success||g(P.error||"Ошибка сохранения")}catch{g("Ошибка сохранения предмета")}finally{f(!1)}}},C=(j,P)=>{a(I=>({...I,[j]:P})),b[j]&&w(I=>{const R={...I};return delete R[j],R})},k=()=>{var j;o.trim()&&!((j=s.tags)!=null&&j.includes(o.trim()))&&(C("tags",[...s.tags||[],o.trim()]),l(""))},S=j=>{var P;C("tags",((P=s.tags)==null?void 0:P.filter(I=>I!==j))||[])},x=j=>{j.key==="Enter"&&(j.preventDefault(),k())};return i?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"text-lg font-medium",children:"Загрузка предмета..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(T,{variant:"outline",onClick:n,className:"gap-2",children:[r.jsx(ae,{className:"w-4 h-4"}),"Назад"]}),r.jsx("h1",{className:"text-2xl font-semibold",children:e?"Редактировать предмет":"Новый предмет"})]}),r.jsxs(T,{onClick:N,disabled:d,className:"gap-2",children:[r.jsx(na,{className:"w-4 h-4"}),d?"Сохранение...":e?"Сохранить":"Создать предмет"]})]}),h&&r.jsxs(ge,{variant:"destructive",children:[r.jsx(Ce,{className:"h-4 w-4"}),r.jsx(xe,{children:h})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(F,{children:[r.jsx(K,{children:r.jsx(ne,{children:"Основная информация"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"title",children:"Название *"}),r.jsx(U,{id:"title",value:s.title||"",onChange:j=>C("title",j.target.value),placeholder:"Введите название предмета"}),b.title&&r.jsx("p",{className:"text-sm text-red-600",children:b.title})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"category",children:"Категория *"}),r.jsx(U,{id:"category",value:s.category||"",onChange:j=>C("category",j.target.value),placeholder:"Например: Винтажные камеры"}),b.category&&r.jsx("p",{className:"text-sm text-red-600",children:b.category})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"description",children:"Краткое описание"}),r.jsx(Fr,{id:"description",value:s.description||"",onChange:j=>C("description",j.target.value),placeholder:"Краткое описание предмета",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"fullDescription",children:"Подробное описание"}),r.jsx(Fr,{id:"fullDescription",value:s.fullDescription||"",onChange:j=>C("fullDescription",j.target.value),placeholder:"Подробное описание с историей и деталями",rows:5})]})]})]}),r.jsxs(F,{children:[r.jsx(K,{children:r.jsx(ne,{children:"Детали"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"year",children:"Год *"}),r.jsx(U,{id:"year",type:"number",min:"1800",max:"2024",value:s.year||"",onChange:j=>C("year",parseInt(j.target.value)||"")}),b.year&&r.jsx("p",{className:"text-sm text-red-600",children:b.year})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"country",children:"Страна"}),r.jsx(U,{id:"country",value:s.country||"",onChange:j=>C("country",j.target.value),placeholder:"Страна производства"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"yearFrom",children:"Год от"}),r.jsx(U,{id:"yearFrom",type:"number",min:"1800",max:"2024",value:s.yearFrom||"",onChange:j=>C("yearFrom",parseInt(j.target.value)||void 0),placeholder:"Начало диапазона"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"yearTo",children:"Год до"}),r.jsx(U,{id:"yearTo",type:"number",min:"1800",max:"2024",value:s.yearTo||"",onChange:j=>C("yearTo",parseInt(j.target.value)||void 0),placeholder:"Конец диапазона"})]})]}),b.yearRange&&r.jsx("p",{className:"text-sm text-red-600",children:b.yearRange}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"organization",children:"Организация/Издатель"}),r.jsx(U,{id:"organization",value:s.organization||"",onChange:j=>C("organization",j.target.value),placeholder:"Производитель или издатель"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"size",children:"Размер"}),r.jsx(U,{id:"size",value:s.size||"",onChange:j=>C("size",j.target.value),placeholder:"Размеры предмета"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"edition",children:"Тираж"}),r.jsx(U,{id:"edition",value:s.edition||"",onChange:j=>C("edition",j.target.value),placeholder:"Тираж или серийность"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"series",children:"Серия"}),r.jsx(U,{id:"series",value:s.series||"",onChange:j=>C("series",j.target.value),placeholder:"Серия или коллекция"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"condition",children:"Состояние"}),r.jsx(U,{id:"condition",value:s.condition||"",onChange:j=>C("condition",j.target.value),placeholder:"Состояние предмета"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"acquisition",children:"Как приобретен"}),r.jsx(U,{id:"acquisition",value:s.acquisition||"",onChange:j=>C("acquisition",j.target.value),placeholder:"История приобретения"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{htmlFor:"value",children:"Стоимость"}),r.jsx(U,{id:"value",value:s.value||"",onChange:j=>C("value",j.target.value),placeholder:"Примерная стоимость"})]})]})]})]}),r.jsxs(F,{children:[r.jsx(K,{children:r.jsx(ne,{children:"Теги"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{value:o,onChange:j=>l(j.target.value),onKeyPress:x,placeholder:"Добавить тег",className:"flex-1"}),r.jsx(T,{onClick:k,disabled:!o.trim(),children:r.jsx(kt,{className:"w-4 h-4"})})]}),s.tags&&s.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((j,P)=>r.jsxs(M,{variant:"secondary",className:"gap-1",children:[j,r.jsx("button",{onClick:()=>S(j),className:"hover:bg-secondary-foreground/20 rounded-full p-0.5",children:r.jsx(q,{className:"w-3 h-3"})})]},P))})]})]}),r.jsx(Od,{}),r.jsxs(F,{children:[r.jsx(K,{children:r.jsx(ne,{children:"Фотографии предмета"})}),r.jsx(G,{children:e?r.jsx(Vd,{itemId:e,existingPhotos:((E=s.photos)==null?void 0:E.map((j,P)=>({id:`photo-${P}`,url:j,filename:`photo-${P+1}.jpg`})))||[],onPhotosUpdated:()=>{y()}}):r.jsx(Hd,{photos:m,onPhotosChange:p,maxPhotos:10})})]})]})}function Kd(){const[e,t]=c.useState([]),[n,s]=c.useState([]),[a,o]=c.useState(!0),[l,i]=c.useState(null),[u,d]=c.useState("dashboard"),[f,h]=c.useState(),[g,b]=c.useState(!1),[w,m]=c.useState(null);c.useEffect(()=>{p()},[]);const p=async()=>{o(!0),i(null);try{const[x,E]=await Promise.all([O.getItems(),O.getBlogPosts()]);x.success&&x.data&&t(x.data),E.success&&E.data&&s(E.data)}catch{i("Ошибка загрузки данных")}finally{o(!1)}},y=async()=>{try{await O.logout(),window.location.reload()}catch(x){console.error("Logout failed:",x),O.clearSession(),window.location.reload()}},v=async()=>{try{await O.downloadExport()}catch(x){alert("Ошибка экспорта: "+(x instanceof Error?x.message:"Неизвестная ошибка"))}},N=()=>{h(void 0),d("item-editor")},C=async()=>{if(w)try{const x=await O.deleteItem(w.id);x.success?(t(E=>E.filter(j=>j.id!==w.id)),b(!1),m(null)):alert("Ошибка удаления: "+(x.error||"Неизвестная ошибка"))}catch(x){alert("Ошибка удаления: "+(x instanceof Error?x.message:"Неизвестная ошибка"))}},k=x=>{t(E=>{const j=E.findIndex(P=>P.id===x.id);if(j>=0){const P=[...E];return P[j]=x,P}else return[x,...E]}),d("dashboard")},S=()=>{d("dashboard"),h(void 0)};return u==="item-editor"?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsx("div",{className:"container mx-auto max-w-7xl p-4",children:r.jsx(qd,{itemId:f,onSave:k,onCancel:S})})}):a?r.jsx("div",{className:"min-h-screen bg-background p-4",children:r.jsx("div",{className:"container mx-auto max-w-7xl",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{children:"Админка"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Загрузка данных..."})]})})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:r.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Админка Collepto"}),r.jsx(M,{variant:"secondary",children:"Администратор"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(T,{onClick:v,variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(sa,{className:"w-4 h-4"}),"Экспорт"]}),r.jsxs(T,{onClick:y,variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(Kr,{className:"w-4 h-4"}),"Выйти"]})]})]})})}),r.jsxs("div",{className:"container mx-auto max-w-7xl p-4",children:[l&&r.jsx(ge,{variant:"destructive",className:"mb-6",children:r.jsx(xe,{children:l})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs(F,{children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Предметы"}),r.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"в коллекции"})]})]}),r.jsxs(F,{children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Посты блога"}),r.jsx(oa,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.filter(x=>x.published).length," опубликовано"]})]})]}),r.jsxs(F,{children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Категории"}),r.jsx(ia,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:new Set(e.map(x=>x.category)).size}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"уникальных"})]})]}),r.jsxs(F,{children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Фотографии"}),r.jsx(zt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.reduce((x,E)=>{var j;return x+(((j=E.photos)==null?void 0:j.length)||0)},0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"всего загружено"})]})]})]}),r.jsxs(td,{defaultValue:"items",className:"w-full",children:[r.jsxs(rd,{className:"grid w-full grid-cols-2",children:[r.jsx($r,{value:"items",children:"Предметы коллекции"}),r.jsx($r,{value:"blog",children:"Блог"})]}),r.jsxs(_r,{value:"items",className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Управление предметами"}),r.jsxs(T,{onClick:N,className:"gap-2",children:[r.jsx(kt,{className:"w-4 h-4"}),"Добавить предмет"]})]}),r.jsx("div",{className:"grid gap-4",children:e.map(x=>{var E,j;return r.jsx(F,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-medium",children:x.title}),r.jsx(M,{variant:"outline",children:x.category}),r.jsx(M,{variant:"secondary",children:x.year})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:x.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:[((E=x.photos)==null?void 0:E.length)||0," фото"]}),r.jsxs("span",{children:[((j=x.tags)==null?void 0:j.length)||0," тегов"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[r.jsx(ir,{className:"w-3 h-3"}),"Просмотр"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[r.jsx(lr,{className:"w-3 h-3"}),"Изменить"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive",children:[r.jsx(cr,{className:"w-3 h-3"}),"Удалить"]})]})]})})},x.id)})})]}),r.jsxs(_r,{value:"blog",className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Управление блогом"}),r.jsxs(T,{className:"gap-2",children:[r.jsx(kt,{className:"w-4 h-4"}),"Новый пост"]})]}),r.jsx("div",{className:"grid gap-4",children:n.map(x=>{var E;return r.jsx(F,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-medium",children:x.title}),r.jsx(M,{variant:x.published?"default":"secondary",children:x.published?"Опубликован":"Черновик"}),r.jsx(M,{variant:"outline",children:x.category})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:x.excerpt}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[r.jsx("span",{children:new Date(x.publishDate).toLocaleDateString("ru-RU")}),r.jsxs("span",{children:[x.readTime," мин чтения"]}),r.jsxs("span",{children:[((E=x.relatedItems)==null?void 0:E.length)||0," связанных предметов"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[r.jsx(ir,{className:"w-3 h-3"}),"Просмотр"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",children:[r.jsx(lr,{className:"w-3 h-3"}),"Изменить"]}),r.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-destructive",children:[r.jsx(cr,{className:"w-3 h-3"}),"Удалить"]})]})]})})},x.id)})})]})]})]}),r.jsx(jd,{open:g,onOpenChange:b,children:r.jsxs(Cd,{children:[r.jsxs(Ed,{children:[r.jsx(Rd,{children:"Удалить предмет?"}),r.jsxs(Pd,{children:['Вы уверены, что хотите удалить предмет "',w==null?void 0:w.title,'"? Это действие нельзя отменить. Все связанные фотографии также будут удалены.']})]}),r.jsxs(Sd,{children:[r.jsx(Id,{onClick:()=>b(!1),children:"Отмена"}),r.jsx(kd,{onClick:C,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Удалить"})]})]})})]})}function Yd(){const[e,t]=c.useState("admin-auth"),[n,s]=c.useState(!1),[a,o]=c.useState(!0);c.useEffect(()=>{(async()=>{var f;if(O.isAuthenticated())try{const h=await O.checkAuthStatus();h.success&&((f=h.data)!=null&&f.authenticated)?(s(!0),t("admin")):(O.clearSession(),s(!1),t("admin-auth"))}catch(h){console.error("Auth check failed:",h),O.clearSession(),s(!1),t("admin-auth")}else s(!1),t("admin-auth");o(!1)})()},[]);const l=()=>{s(!0),t("admin")},i=async()=>{try{await O.logout()}catch(d){console.error("Logout error:",d)}finally{s(!1),t("admin-auth")}},u=()=>{window.location.href="/"};return a?r.jsx(Dt,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Checking authentication..."})]})})}):r.jsx(Dt,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center",children:[r.jsx("div",{className:"mr-4 flex",children:r.jsx("button",{className:"flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors",onClick:u,children:r.jsx("span",{children:"Collepto Admin"})})}),r.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[r.jsxs(T,{variant:"ghost",size:"sm",onClick:u,className:"gap-2",children:[r.jsx(la,{className:"w-4 h-4"}),"Main Site"]}),n&&r.jsxs(T,{variant:"ghost",size:"sm",onClick:i,className:"gap-2",children:[r.jsx(Kr,{className:"w-4 h-4"}),"Logout"]})]})]})}),r.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e==="admin-auth"&&r.jsx(Lc,{onAuthSuccess:l}),e==="admin"&&n&&r.jsx(Kd,{})]})]})})}function Jd(){return me().pathname.startsWith("/admin")?r.jsx(Yd,{}):r.jsx(Dt,{defaultTheme:"light",storageKey:"collepto-theme",children:r.jsxs(io,{children:[r.jsx(we,{path:"/",element:r.jsx(nl,{})}),r.jsx(we,{path:"/items/:slug",element:r.jsx(Pc,{})}),r.jsx(we,{path:"/blog",element:r.jsx(Ic,{})}),r.jsx(we,{path:"/blog/:slug",element:r.jsx(Ac,{})}),r.jsx(we,{path:"*",element:r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Page not found"}),r.jsx("a",{href:"/",className:"text-primary hover:underline",children:"Go home"})]})})})]})})}It.createRoot(document.getElementById("root")).render(r.jsx(de.StrictMode,{children:r.jsx(Ao,{children:r.jsx(Jd,{})})}));
